/*
 * Copyright (c) Orchestral Developments Ltd (2001 - 2014).
 *
 * This document is copyright. Except for the purpose of fair reviewing, no part
 * of this publication may be reproduced or transmitted in any form or by any
 * means, electronic or mechanical, including photocopying, recording, or any
 * information storage and retrieval system, without permission in writing from
 * the publisher. Infringers of copyright render themselves liable for
 * prosecution.
 */
YUI.add("yui2-orchestral-button-aria",function(e,t){
/*!(C) ORCHESTRAL*/
var n=e.YUI2,r=n.ORCHESTRAL;(function(){"use strict";function B(e,t){e.setAttribute(T,t)}function j(e,t,n){e.setAttribute(d+t,n)}function F(e,t,n){n.cfg.setProperty(v,!0),n.cfg.setProperty(_,n.get(P))}function I(e,t){t._menu.subscribe(E,F,t)}function q(e,t){j(t._button,m,e.newValue)}function R(e){var t=e._button.parentNode;e.set(v,!0),B(t,C),B(t.parentNode,C)}function U(e,t){var n=e.prevValue,r=e.newValue,i=t.length,s,o,u=!1;if(i>0)for(o=0;o<i;o+=1)s=t[o],!r&&!u&&!s.get(H)?(s._button.tabIndex=0,u=!0):s===r?s._button.tabIndex=0:s._button.tabIndex=-1;n&&j(n._button,m,!1),r&&j(r._button,m,!0)}function z(e){var t=e.length,n,r,i=!1,s=-1;if(t>0){for(r=0;r<t&&!i;r+=1)n=e[r],n.get(H)||(n._button.tabIndex>-1?i=!0:s<0&&(s=r));!i&&s>-1&&(e[s]._button.tabIndex=0)}}var e=n.lang,t=r.env.ua,i=n.widget.Button.prototype,s=i.initAttributes,o=r.widget.ButtonGroupBase.prototype,u=o.initAttributes,a=r.widget.CheckboxButtonGroup.prototype,f=a.addButton,l=r.widget.RadioButtonGroup.prototype,c=l.addButton,h=l.addButtons,p=t.gecko&&t.gecko>=1.9||t.ie&&t.ie>=8||!t.gecko||!t.ie,d="aria-",v="usearia",m="checked",g="type",y="menu",b="split",w="haspopup",E="render",S="radio",x="checkbox",T="role",N="checkedChange",C="presentation",k="element",L="group",A="radiogroup",O="checkedButtonChange",M="appendTo",_="labelledby",D="describedby",P="id",H="disabled";p&&(i.RADIO_DEFAULT_TITLE="",i.RADIO_CHECKED_TITLE="",i.CHECKBOX_DEFAULT_TITLE="",i.CHECKBOX_CHECKED_TITLE=""),e.augmentObject(i,{_setUseAria:function(e){var t=this.get(g),n=this._button;if(e)if(t===y||t===b)j(n,w,!0),this.on(M,I,this);else if(t===S||t===x)B(n,t),j(n,m,this.get(m)),t===x&&this.on(N,q,this)},initAttributes:function(t){this.setAttributeConfig(v,{value:t.usearia||p,validator:e.isBoolean,writeOnce:!0,method:this._setUseAria}),s.apply(this,arguments),p&&this.set(v,!0)}},!0),e.augmentObject(o,{_setLabelledBy:function(e){this.get(v)&&j(this.get(k),_,e)},_setDescribedBy:function(e){this.get(v)&&j(this.get(k),D,e)},initAttributes:function(t){this.setAttributeConfig(v,{value:t.usearia||p,validator:e.isBoolean,writeOnce:!0,method:this._setUseAria}),this.setAttributeConfig(_,{value:t.labelledby,validator:e.isString,method:this._setLabelledBy}),this.setAttributeConfig(D,{value:t.describedby,validator:e.isString,method:this._setDescribedBy}),u.apply(this,arguments),p&&this.set(v,!0)}},!0),e.augmentObject(a,{addButton:function(e){var t=f.call(this,e);return this.get(v)&&R(t),t},_setUseAria:function(e){e&&B(this.get(k),L)}},!0),e.augmentObject(l,{addButton:function(e){var t=c.call(this,e);return this.get(v)&&(R(t),t._button.tabIndex=t.get(m)?0:-1),t},addButtons:function(e){var t=h.call(this,e);return z(t),t},_setUseAria:function(e){e&&(B(this.get(k),A),this.on(O,function(e){U(e,this.getButtons())}))}},!0)})(),n.register("orchestral-button-aria",r.widget.Button,{version:"7.9",build:"0"})},"7.9.0",{requires:["yui2-yahoo","yui2-button","yui2-orchestral","yui2-orchestral-button-core"]});
