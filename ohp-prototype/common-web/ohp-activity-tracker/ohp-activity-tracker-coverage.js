/*
 * Copyright (c) Orchestral Developments Ltd (2001 - 2014).
 *
 * This document is copyright. Except for the purpose of fair reviewing, no part
 * of this publication may be reproduced or transmitted in any form or by any
 * means, electronic or mechanical, including photocopying, recording, or any
 * information storage and retrieval system, without permission in writing from
 * the publisher. Infringers of copyright render themselves liable for
 * prosecution.
 */

var __cov_3UnGTYMUt6ezjDJzPFsyHQ = (Function('return this'))();
if (!__cov_3UnGTYMUt6ezjDJzPFsyHQ.__coverage__) { __cov_3UnGTYMUt6ezjDJzPFsyHQ.__coverage__ = {}; }
__cov_3UnGTYMUt6ezjDJzPFsyHQ = __cov_3UnGTYMUt6ezjDJzPFsyHQ.__coverage__;
if (!(__cov_3UnGTYMUt6ezjDJzPFsyHQ['/build/work/UIE-COW-JOB1/Common-Web/com.orchestral.commonweb/web/ohp-activity-tracker/ohp-activity-tracker.js'])) {
   __cov_3UnGTYMUt6ezjDJzPFsyHQ['/build/work/UIE-COW-JOB1/Common-Web/com.orchestral.commonweb/web/ohp-activity-tracker/ohp-activity-tracker.js'] = {"path":"/build/work/UIE-COW-JOB1/Common-Web/com.orchestral.commonweb/web/ohp-activity-tracker/ohp-activity-tracker.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},"fnMap":{"1":{"name":"(anonymous_1)","line":2,"loc":{"start":{"line":2,"column":32},"end":{"line":2,"column":51}}},"2":{"name":"(anonymous_2)","line":49,"loc":{"start":{"line":49,"column":14},"end":{"line":49,"column":37}}},"3":{"name":"(anonymous_3)","line":68,"loc":{"start":{"line":68,"column":13},"end":{"line":68,"column":24}}},"4":{"name":"(anonymous_4)","line":78,"loc":{"start":{"line":78,"column":17},"end":{"line":78,"column":28}}},"5":{"name":"(anonymous_5)","line":93,"loc":{"start":{"line":93,"column":16},"end":{"line":93,"column":27}}},"6":{"name":"(anonymous_6)","line":104,"loc":{"start":{"line":104,"column":19},"end":{"line":104,"column":42}}},"7":{"name":"(anonymous_7)","line":110,"loc":{"start":{"line":110,"column":17},"end":{"line":110,"column":33}}},"8":{"name":"(anonymous_8)","line":124,"loc":{"start":{"line":124,"column":28},"end":{"line":124,"column":39}}}},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":150,"column":3}},"2":{"start":{"line":11,"column":0},"end":{"line":19,"column":65}},"3":{"start":{"line":21,"column":0},"end":{"line":40,"column":3}},"4":{"start":{"line":48,"column":0},"end":{"line":127,"column":3}},"5":{"start":{"line":50,"column":2},"end":{"line":50,"column":40}},"6":{"start":{"line":51,"column":2},"end":{"line":61,"column":4}},"7":{"start":{"line":63,"column":2},"end":{"line":63,"column":121}},"8":{"start":{"line":65,"column":2},"end":{"line":65,"column":24}},"9":{"start":{"line":69,"column":2},"end":{"line":69,"column":23}},"10":{"start":{"line":71,"column":2},"end":{"line":71,"column":50}},"11":{"start":{"line":73,"column":2},"end":{"line":75,"column":3}},"12":{"start":{"line":74,"column":3},"end":{"line":74,"column":40}},"13":{"start":{"line":79,"column":2},"end":{"line":79,"column":41}},"14":{"start":{"line":81,"column":2},"end":{"line":83,"column":5}},"15":{"start":{"line":85,"column":2},"end":{"line":85,"column":102}},"16":{"start":{"line":87,"column":2},"end":{"line":87,"column":82}},"17":{"start":{"line":88,"column":2},"end":{"line":88,"column":84}},"18":{"start":{"line":89,"column":2},"end":{"line":89,"column":85}},"19":{"start":{"line":90,"column":2},"end":{"line":90,"column":79}},"20":{"start":{"line":94,"column":2},"end":{"line":94,"column":61}},"21":{"start":{"line":105,"column":2},"end":{"line":107,"column":5}},"22":{"start":{"line":111,"column":2},"end":{"line":116,"column":5}},"23":{"start":{"line":119,"column":2},"end":{"line":119,"column":36}},"24":{"start":{"line":121,"column":2},"end":{"line":121,"column":41}},"25":{"start":{"line":125,"column":2},"end":{"line":125,"column":25}},"26":{"start":{"line":129,"column":0},"end":{"line":134,"column":1}},"27":{"start":{"line":130,"column":1},"end":{"line":130,"column":42}},"28":{"start":{"line":132,"column":1},"end":{"line":132,"column":45}},"29":{"start":{"line":133,"column":1},"end":{"line":133,"column":42}}},"branchMap":{"1":{"line":73,"type":"if","locations":[{"start":{"line":73,"column":2},"end":{"line":73,"column":2}},{"start":{"line":73,"column":2},"end":{"line":73,"column":2}}]},"2":{"line":106,"type":"binary-expr","locations":[{"start":{"line":106,"column":9},"end":{"line":106,"column":21}},{"start":{"line":106,"column":25},"end":{"line":106,"column":45}}]},"3":{"line":129,"type":"if","locations":[{"start":{"line":129,"column":0},"end":{"line":129,"column":0}},{"start":{"line":129,"column":0},"end":{"line":129,"column":0}}]}},"code":["(function () { /*!(C) ORCHESTRAL*/","YUI.add('ohp-activity-tracker', function (Y, NAME) {","","\"use strict\";","/**","Activity tracker. It detects configured user activities on the page and fires activityDetected","events to notify other modules that are interested.","","@module ohp-activity-tracker","**/","var ActivityTracker,","","\tOHP = Y.namespace('OHP'),","\tGlobalNS = YUI.namespace('OHP.ActivityTracker'),","","\tACTIVITY_STORAGE_KEY = 'ohp-activity-tracker-timestamp',","\tDEFAULT_ACTIVITY_THROTTLE_TIME = 2000, //millisecond","","\tactivitySyncer = new Y.COW.ActivitySyncer(ACTIVITY_STORAGE_KEY);","","Y.mix(GlobalNS, {","\t/*","\tThe key used in LocalStorage to store the timestamp for activities.","","\t@property ACTIVITY_STORAGE_KEY","\t@type String","\t@static","\t*/","\tACTIVITY_STORAGE_KEY: ACTIVITY_STORAGE_KEY,","","\t/*","\tNumber of milliseconds to throttle the registering of activity (exposed for unit testing purposes).","","\t@property _ACTIVITY_THROTTLE_TIME","\t@default 2000","\t@type Number","\t@protected","\t*/","\t_ACTIVITY_THROTTLE_TIME: DEFAULT_ACTIVITY_THROTTLE_TIME","});","","/**","@class ActivityTracker","@static","@namespace OHP","@extends Base","**/","ActivityTracker = Y.Base.create('ohp-activity-tracker', Y.Base, [], {","\tinitializer: function( /*config*/ ) {","\t\tthis._trackingEventSubscriptions = [];","\t\tthis._publishedEvents = [","\t\t\t/**","\t\t\tThe event is fired when any registered activity is detected.","\t\t\tThis event is broadcasted to Y and Y.Global.","","\t\t\t@event activityDetected","\t\t\t**/","\t\t\tthis.publish('activityDetected', {","\t\t\t\tbroadcast: 2","\t\t\t})","\t\t];","","\t\tthis._warningTimeoutHandler = Y.Global.on('ohp-activity-timeout:warningTimeout', this._deleteActivityStorageKey, this);","","\t\tthis._startTracking();","\t},","","\tdestructor: function() {","\t\tthis._stopTracking();","","\t\tY.Array.invoke(this._publishedEvents, 'detach');","","\t\tif (this._warningTimeoutHandler) {","\t\t\tthis._warningTimeoutHandler.detach();","\t\t}","\t},","","\t_startTracking: function() {","\t\tvar docBody = Y.one(Y.config.doc.body);","","\t\tthis._doLogActivity({","\t\t\ttype: 'ohp-activity-tracker:init'","\t\t});","","\t\tthis._logActivity = Y.throttle(Y.bind(this._doLogActivity, this), GlobalNS._ACTIVITY_THROTTLE_TIME);","","\t\tthis._trackingEventSubscriptions.push(docBody.on('keydown', this._logActivity));","\t\tthis._trackingEventSubscriptions.push(docBody.on('mousemove', this._logActivity));","\t\tthis._trackingEventSubscriptions.push(docBody.on('touchstart', this._logActivity));","\t\tthis._trackingEventSubscriptions.push(Y.on('mousewheel', this._logActivity));","\t},","","\t_stopTracking: function() {","\t\tY.Array.invoke(this._trackingEventSubscriptions, 'detach');","\t},","","\t/**","\tManually register some user activity for situations where that activity cannot be detected via standard dom events (e.g. inside YUI's","\tRich Text Editor which uses an iframe internally).","","\t@method registerActivity","\t@param {String} [activityType] the event type or a description of the type of activity that occured; defaults to \"registeredActivity\".","\t**/","\tregisterActivity: function(activityType) {","\t\tthis._logActivity({","\t\t\ttype: activityType || 'registeredActivity'","\t\t});","\t},","","\t_doLogActivity: function(event) {","\t\tvar timestamp = new Date().valueOf(),","\t\t\tpayload = {","\t\t\t\ttimestamp: timestamp,","\t\t\t\tactivity: event.type,","\t\t\t\turl: Y.config.win.location.href","\t\t\t};","","\t\t//Setting timestamp to LocalStorage fires events across windows","\t\tactivitySyncer.broadcast(payload);","\t\t// ohp-activity-tracker:activityDetected is fired locally and broadcasted across YUI sandboxes","\t\tthis.fire('activityDetected', payload);","\t},","","\t_deleteActivityStorageKey: function() {","\t\tactivitySyncer.clear();","\t}","});","","if (GlobalNS._instance) {","\tOHP.ActivityTracker = GlobalNS._instance;","} else {","\tOHP.ActivityTracker = new ActivityTracker();","\tGlobalNS._instance = OHP.ActivityTracker;","}","","","}, '7.9.0', {","    \"requires\": [","        \"base\",","        \"node-base\",","        \"event-base\",","        \"event-custom\",","        \"event-touch\",","        \"event-mousewheel\",","        \"yui-throttle\",","        \"json-stringify\",","        \"array-invoke\",","        \"cow-activity-syncer\"","    ]","});","","}());"]};
}
__cov_3UnGTYMUt6ezjDJzPFsyHQ = __cov_3UnGTYMUt6ezjDJzPFsyHQ['/build/work/UIE-COW-JOB1/Common-Web/com.orchestral.commonweb/web/ohp-activity-tracker/ohp-activity-tracker.js'];
__cov_3UnGTYMUt6ezjDJzPFsyHQ.s['1']++;YUI.add('ohp-activity-tracker',function(Y,NAME){'use strict';__cov_3UnGTYMUt6ezjDJzPFsyHQ.f['1']++;__cov_3UnGTYMUt6ezjDJzPFsyHQ.s['2']++;var ActivityTracker,OHP=Y.namespace('OHP'),GlobalNS=YUI.namespace('OHP.ActivityTracker'),ACTIVITY_STORAGE_KEY='ohp-activity-tracker-timestamp',DEFAULT_ACTIVITY_THROTTLE_TIME=2000,activitySyncer=new Y.COW.ActivitySyncer(ACTIVITY_STORAGE_KEY);__cov_3UnGTYMUt6ezjDJzPFsyHQ.s['3']++;Y.mix(GlobalNS,{ACTIVITY_STORAGE_KEY:ACTIVITY_STORAGE_KEY,_ACTIVITY_THROTTLE_TIME:DEFAULT_ACTIVITY_THROTTLE_TIME});__cov_3UnGTYMUt6ezjDJzPFsyHQ.s['4']++;ActivityTracker=Y.Base.create('ohp-activity-tracker',Y.Base,[],{initializer:function(){__cov_3UnGTYMUt6ezjDJzPFsyHQ.f['2']++;__cov_3UnGTYMUt6ezjDJzPFsyHQ.s['5']++;this._trackingEventSubscriptions=[];__cov_3UnGTYMUt6ezjDJzPFsyHQ.s['6']++;this._publishedEvents=[this.publish('activityDetected',{broadcast:2})];__cov_3UnGTYMUt6ezjDJzPFsyHQ.s['7']++;this._warningTimeoutHandler=Y.Global.on('ohp-activity-timeout:warningTimeout',this._deleteActivityStorageKey,this);__cov_3UnGTYMUt6ezjDJzPFsyHQ.s['8']++;this._startTracking();},destructor:function(){__cov_3UnGTYMUt6ezjDJzPFsyHQ.f['3']++;__cov_3UnGTYMUt6ezjDJzPFsyHQ.s['9']++;this._stopTracking();__cov_3UnGTYMUt6ezjDJzPFsyHQ.s['10']++;Y.Array.invoke(this._publishedEvents,'detach');__cov_3UnGTYMUt6ezjDJzPFsyHQ.s['11']++;if(this._warningTimeoutHandler){__cov_3UnGTYMUt6ezjDJzPFsyHQ.b['1'][0]++;__cov_3UnGTYMUt6ezjDJzPFsyHQ.s['12']++;this._warningTimeoutHandler.detach();}else{__cov_3UnGTYMUt6ezjDJzPFsyHQ.b['1'][1]++;}},_startTracking:function(){__cov_3UnGTYMUt6ezjDJzPFsyHQ.f['4']++;__cov_3UnGTYMUt6ezjDJzPFsyHQ.s['13']++;var docBody=Y.one(Y.config.doc.body);__cov_3UnGTYMUt6ezjDJzPFsyHQ.s['14']++;this._doLogActivity({type:'ohp-activity-tracker:init'});__cov_3UnGTYMUt6ezjDJzPFsyHQ.s['15']++;this._logActivity=Y.throttle(Y.bind(this._doLogActivity,this),GlobalNS._ACTIVITY_THROTTLE_TIME);__cov_3UnGTYMUt6ezjDJzPFsyHQ.s['16']++;this._trackingEventSubscriptions.push(docBody.on('keydown',this._logActivity));__cov_3UnGTYMUt6ezjDJzPFsyHQ.s['17']++;this._trackingEventSubscriptions.push(docBody.on('mousemove',this._logActivity));__cov_3UnGTYMUt6ezjDJzPFsyHQ.s['18']++;this._trackingEventSubscriptions.push(docBody.on('touchstart',this._logActivity));__cov_3UnGTYMUt6ezjDJzPFsyHQ.s['19']++;this._trackingEventSubscriptions.push(Y.on('mousewheel',this._logActivity));},_stopTracking:function(){__cov_3UnGTYMUt6ezjDJzPFsyHQ.f['5']++;__cov_3UnGTYMUt6ezjDJzPFsyHQ.s['20']++;Y.Array.invoke(this._trackingEventSubscriptions,'detach');},registerActivity:function(activityType){__cov_3UnGTYMUt6ezjDJzPFsyHQ.f['6']++;__cov_3UnGTYMUt6ezjDJzPFsyHQ.s['21']++;this._logActivity({type:(__cov_3UnGTYMUt6ezjDJzPFsyHQ.b['2'][0]++,activityType)||(__cov_3UnGTYMUt6ezjDJzPFsyHQ.b['2'][1]++,'registeredActivity')});},_doLogActivity:function(event){__cov_3UnGTYMUt6ezjDJzPFsyHQ.f['7']++;__cov_3UnGTYMUt6ezjDJzPFsyHQ.s['22']++;var timestamp=new Date().valueOf(),payload={timestamp:timestamp,activity:event.type,url:Y.config.win.location.href};__cov_3UnGTYMUt6ezjDJzPFsyHQ.s['23']++;activitySyncer.broadcast(payload);__cov_3UnGTYMUt6ezjDJzPFsyHQ.s['24']++;this.fire('activityDetected',payload);},_deleteActivityStorageKey:function(){__cov_3UnGTYMUt6ezjDJzPFsyHQ.f['8']++;__cov_3UnGTYMUt6ezjDJzPFsyHQ.s['25']++;activitySyncer.clear();}});__cov_3UnGTYMUt6ezjDJzPFsyHQ.s['26']++;if(GlobalNS._instance){__cov_3UnGTYMUt6ezjDJzPFsyHQ.b['3'][0]++;__cov_3UnGTYMUt6ezjDJzPFsyHQ.s['27']++;OHP.ActivityTracker=GlobalNS._instance;}else{__cov_3UnGTYMUt6ezjDJzPFsyHQ.b['3'][1]++;__cov_3UnGTYMUt6ezjDJzPFsyHQ.s['28']++;OHP.ActivityTracker=new ActivityTracker();__cov_3UnGTYMUt6ezjDJzPFsyHQ.s['29']++;GlobalNS._instance=OHP.ActivityTracker;}},'7.9.0',{'requires':['base','node-base','event-base','event-custom','event-touch','event-mousewheel','yui-throttle','json-stringify','array-invoke','cow-activity-syncer']});
