/*
 * Copyright (c) Orchestral Developments Ltd (2001 - 2014).
 *
 * This document is copyright. Except for the purpose of fair reviewing, no part
 * of this publication may be reproduced or transmitted in any form or by any
 * means, electronic or mechanical, including photocopying, recording, or any
 * information storage and retrieval system, without permission in writing from
 * the publisher. Infringers of copyright render themselves liable for
 * prosecution.
 */
YUI.add("ohp-docmagic",function(e,t){"use strict";function c(t,n){var r,i,s;r=e.Lang.isArray(t)?t.join(""):t,r=r.replace(/ {4}/g,"	"),r=r.replace(/^\n/mg,""),r=r.replace(/\s*$/mg,""),i=r.match(/^(\t)*/)[0].length;for(s=0;s<i-(n||0);s+=1)r=r.replace(/^\t/mg,"");return r=r.replace(/\t/g,"    "),r}function h(t){var n=t.getData(o),r=t.getData(u),i=!t.getData(a),s;return s=n?n.split(/,\s*/):[],i&&(r=r?r.split(/,\s*/):[],s=s.concat(e.Array.map(r,function(e){return"yui2-"+e}))),e.Array.map(s,function(e){return"'"+e+"'"})}function p(t){var n,r;return n=document.createElement("script"),n.type="text/javascript",r=t.getData(s)||e.guid(),f.push(r),n.text=l({moduleName:r,scriptContent:c(t.getDOMNode().text,1),modules:h(t),initializeGlobals:t.getData(u)&&!t.getData(a)}),n}function d(e){var t,n;return t=c(e.getDOMNode().innerHTML,1),n=document.createElement("style"),n.type="text/css",n.styleSheet?n.styleSheet.cssText=t:n.innerHTML=t,n}function v(e){var t=e.all('style[type="ohp-docmagic"]'),r=e.one("."+i.output.container);t.each(function(e){if(!e.hasClass(i.api.noDoc)){var t=n.create('<pre class="'+i.output.doc+" "+i.output.style.display+" "+e.getDOMNode().className+'">'+'<code class="'+i.output.style.language+'"></code>'+"</pre>");t.one("code").set("text",c(e.getHTML())),r.append(t)}var s=n.create('<div class="'+i.output.style.effective+'"></div>');s.append(d(e)),r.append(s),e.remove(!0)})}function m(e){var t=e.all('script[type="ohp-docmagic"]'),r=e.one("."+i.output.container);t.each(function(e){if(!e.hasClass(i.api.noDoc)){var t=n.create('<pre class="'+i.output.doc+" "+i.output.script.display+" "+e.getDOMNode().className+'">'+'<code class="'+i.output.script.language+'"></code>'+"</pre>");t.one("code").set("text",c(e.getHTML())),r.append(t)}var s=n.create('<div class="'+i.output.script.executable+'"></div>');s.append(p(e)),r.append(s),e.remove(!0)})}function g(e){var t=e.all("."+i.api.doc),r=e.one("."+i.output.container),s;t.each(function(e){s=n.create('<pre class="'+i.output.doc+" "+i.output.html.display+'">'+'<code class="'+i.output.html.language+'"></code>'+"</pre>"),s.one("code").set("text",c(e.getHTML())),r.append(s)})}var n=e.Node,r=e.OHP.OhpClassNameManager.create("docmagic").getClassName,i={api:{docMagic:r(),doc:r("doc"),noDoc:r("nodoc")},output:{container:r("output","container"),doc:r("output","doc"),html:{display:r("output","doc","html"),language:"language-markup"},script:{executable:r("output","executable","script"),display:r("output","doc","script"),language:"language-javascript"},style:{effective:r("output","effective","style"),display:r("output","doc","style"),language:"language-css"}}},s="yui3-module-name",o="yui3-modules",u="yui2-modules",a="yui2in3-disabled",f=[],l=e.Template.get("ohp-docmagic-script-template");e.all("."+i.api.docMagic).each(function(e){e.append('<div class="'+i.output.container+'"></div>'),v(e),g(e),m(e)}),e.use(f)},"7.9.0",{requires:["array-extras","node-base","template-base","ohp-docmagic-templates","ohp-ohp-class-name-manager"],skinnable:!0});
