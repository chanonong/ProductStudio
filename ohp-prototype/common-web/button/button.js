/*
 * Copyright (c) Orchestral Developments Ltd (2001 - 2014).
 *
 * This document is copyright. Except for the purpose of fair reviewing, no part
 * of this publication may be reproduced or transmitted in any form or by any
 * means, electronic or mechanical, including photocopying, recording, or any
 * information storage and retrieval system, without permission in writing from
 * the publisher. Infringers of copyright render themselves liable for
 * prosecution.
 */
YAHOO.namespace("ORCHESTRAL.widget"),function(){"use strict";function g(n){var r,i;return!(n instanceof YAHOO.widget.Button)&&(e.isString(n)||n.nodeName)&&(i=t.get(n),i.parentNode.tagName==="LABEL"&&(r=i.parentNode)),r}function y(e){var t,n=/^(&nbsp;|\s)*|(&nbsp;|\s)*$/g;return t=e.innerHTML,t&&(t=t.replace(n,"")),t}function b(e,t){e.set("label",y(t)),ORCHESTRAL.util.Dom.remove(t,!0)}var e=YAHOO.lang,t=YAHOO.util.Dom,n=YAHOO.util.Event,r,i,s,o,u,a,f,l,c,h,p,d,v,m={};r=function(e,n){if(!t.get(e))return;r.superclass.constructor.apply(this,arguments),this._removeButtonSubmitType(),p(this)},e.extend(r,YAHOO.widget.Button,{CSS_CLASS_NAME:"primary-button",_removeButtonSubmitType:function(){YAHOO.env.ua.ie&&YAHOO.env.ua.ie<8&&this._button.type==="submit"&&this._button.removeAttribute("type")}}),i=function(n,r){var s=Array.prototype.slice.call(arguments),o=e.isString(n)||ORCHESTRAL.util.Dom.isElement(n)?1:0,u=s[o]||{};if(!t.get(n))return;s[o]=e.merge({type:"submit"},u),i.superclass.constructor.apply(this,s),this._button.setAttribute("type","submit")},e.extend(i,r,{createButtonElement:function(){var e=this.NODE_NAME,t=document.createElement(e);return t.innerHTML="<"+e+' class="first-child"><button type="submit"></button></'+e+">",t},_onClick:function(e){if(this.get("type")!=="submit")return i.superclass._onClick.apply(e)},_removeButtonSubmitType:function(){}}),s=function(e,n){var r=t.get(e);if(!r)return;YAHOO.env.ua.ie===8&&r.type==="submit"&&r.setAttribute("type","button"),s.superclass.constructor.apply(this,arguments),p(this)},e.extend(s,YAHOO.widget.Button,{CSS_CLASS_NAME:"secondary-button"}),o=function(e,n){var r;if(!t.get(e))return;for(r=0;r<arguments.length;++r)arguments[r].icon&&(arguments[r].label='<span class="'+arguments[r].icon+'"></span>');o.superclass.constructor.apply(this,arguments),p(this)},e.extend(o,YAHOO.widget.Button,{CSS_CLASS_NAME:"icon-button"}),u=function(r,i){var s=Array.prototype.slice.call(arguments),o=e.isString(r)||ORCHESTRAL.util.Dom.isElement(r)?1:0,a=s[o]||{};if(!t.get(r))return;s[o]=e.merge({type:"link",href:"#"},a),u.superclass.constructor.apply(this,s),p(this),n.on(this.get("element"),"click",function(e){n.preventDefault(e)})},e.extend(u,YAHOO.widget.Button,{CSS_CLASS_NAME:"link-button",_setDisabled:function(e){e?(this.hasFocus()&&this.blur(),this._button.setAttribute("disabled","disabled"),this.addStateCSSClasses("disabled"),this.removeStateCSSClasses("hover"),this.removeStateCSSClasses("active"),this.removeStateCSSClasses("focus"),this._button.setAttribute("tabindex","-1")):(this._button.removeAttribute("disabled"),this.removeStateCSSClasses("disabled"),this._button.setAttribute("tabindex",this._configs.tabindex.value))}}),p=function(n){var r=n.get("element"),i,s,o,u;if(!r)return;i=t.getPreviousSibling(r);if(!i||t.hasClass(i,"yui-push-button")||t.hasClass(i,"yui-icon-button"))s=r.previousSibling,s&&s.nodeType===3&&e.trim(s.data)===""&&s.parentNode.removeChild(s);o=t.getNextSibling(r);if(!o||t.hasClass(o,"yui-push-button")||t.hasClass(o,"yui-icon-button"))u=r.nextSibling,u&&u.nodeType===3&&e.trim(u.data)===""&&u.parentNode.removeChild(u)},d=function(e,t){var n=e.currentStyle[t],r=t.charAt(0).toUpperCase()+t.substr(1),i="offset"+r,s="pixel"+r,o="",u,a=/^width|height$/;return n==="auto"?(u=e[i],u===undefined&&(o=0),o=u,a.test(t)&&(e.style[t]=u,e[i]>u&&(o=u-(e[i]-u)),e.style[t]="auto")):(!e.style[s]&&!e.style[t]&&(e.style[t]=n),o=e.style[s]),o+"px"},h=function(n,r){if(!t.get(n))return;if(arguments.length===1&&!e.isString(n)&&!n.nodeName)h.superclass.constructor.apply(this,arguments);else{var i={element:n,attributes:r||{}};i.attributes.srcelement=t.get(n),this._setCustomAttributesFromDOMAttributes(i),h.superclass.constructor.call(this,i.element,i.attributes)}},e.extend(h,YAHOO.widget.Button,{_setCustomAttributesFromDOMAttributes:function(e){var t=e.attributes,n=t.srcelement.attributes,r={},i,s,o,u,a,f,l;if(!t.dataset){for(f=0;f<n.length;f+=1){i=n[f];if(i.name.indexOf("data-")===0){s=i.name.substring(i.name.indexOf("-")+1),o=s.split("-").length-1;for(l=0;l<o;l++)u=s.indexOf("-")+1,a=s.charAt(u).toUpperCase(),s=s.substr(0,u-1)+a+s.substr(u+1);r[s]=i.value}}t.dataset=r}},initAttributes:function(t){var n=t||{};h.superclass.initAttributes.call(this,n),this.setAttributeConfig("dataset",{value:n.dataset,validator:e.isObject})}}),a=function(e,n){var r;if(!t.get(e))return;a.superclass.constructor.apply(this,arguments),r=this.get("ariaLabelledBy"),r&&this.get("element").setAttribute("aria-labelledby",r)},e.extend(a,YAHOO.widget.ButtonGroup,{_currentButtonWidth:"0px",_largestWidthButton:null,_initButtonWidths:function(){var e,n=ORCHESTRAL.env.ua.ie===6?"width":"min-width",r=ORCHESTRAL.env.ua.ie===6?"auto":"0px",i;this._currentButtonWidth="0px";for(i=0;i<this._buttons.length;i++)this._buttons[i].setStyle(n,r),t.setStyle(this._buttons[i].getElementsByClassName("first-child")[0],n,r),t.setStyle(this._buttons[i].getElementsByTagName("button")[0],n,r),e=this._buttons[i].getStyle("width"),e==="auto"&&document.all&&(e=d(this._buttons[i].get("element"),"width")),parseInt(e,10)>parseInt(this._currentButtonWidth,10)&&(this._currentButtonWidth=e,this._largestWidthButton=this._buttons[i]);for(i=0;i<this._buttons.length;i++)this._buttons[i].setStyle(n,this._currentButtonWidth),t.setStyle(this._buttons[i].getElementsByClassName("first-child")[0],n,this._currentButtonWidth),t.setStyle(this._buttons[i].getElementsByTagName("button")[0],n,this._currentButtonWidth)},_adjustButtonWidths:function(e,n){if(n===this._largestWidthButton){this._initButtonWidths();return}var r,i=ORCHESTRAL.env.ua.ie===6?"width":"min-width",s;if(e.type==="addCheckboxButton"||ORCHESTRAL.env.ua.ie===6){var o=ORCHESTRAL.env.ua.ie===6?"auto":"0px";n.setStyle(i,o),t.setStyle(n.getElementsByClassName("first-child")[0],i,o),t.setStyle(n.getElementsByTagName("button")[0],i,o)}r=n.getStyle("width"),r==="auto"&&document.all&&(r=d(n.get("element"),"width"));if(parseInt(r,10)>parseInt
(this._currentButtonWidth,10)){this._currentButtonWidth=r,this._largestWidthButton=n;for(s=0;s<this._buttons.length;s++)this._buttons[s].setStyle(i,this._currentButtonWidth),t.setStyle(this._buttons[s].getElementsByClassName("first-child")[0],i,this._currentButtonWidth),t.setStyle(this._buttons[s].getElementsByTagName("button")[0],i,this._currentButtonWidth)}else n.setStyle(i,this._currentButtonWidth),t.setStyle(n.getElementsByClassName("first-child")[0],i,this._currentButtonWidth),t.setStyle(n.getElementsByTagName("button")[0],i,this._currentButtonWidth)},initAttributes:function(t){var n=t||{};a.superclass.initAttributes.call(this,n),this.setAttributeConfig("ariaLabelledBy",{value:n.ariaLabelledBy,validator:e.isString})}}),f=function(r,i){var s;if(!t.get(r))return;f.superclass.constructor.apply(this,arguments),s=this.get("container"),e.isString(s)?n.onContentReady(s,function(){this._initButtonWidths()},null,this):this._initButtonWidths(),this.subscribe("addCheckboxButtonEvent",function(e){this._adjustButtonWidths(e,e.button)}),this.subscribe("removeCheckboxButtonEvent",function(e){this._adjustButtonWidths(e,e.button)})},e.extend(f,a,{CLASS_NAME_PREFIX:"",CSS_CLASS_NAME:"checkbox-group",init:function(r,i){var s;this._buttons=[],YAHOO.widget.ButtonGroup.superclass.init.call(this,r,i),this.addClass(this.CSS_CLASS_NAME),this.addButtons(this.getElementsByClassName("yui-checkbox-button")),this.addButtons(t.getElementsBy(function(e){return e.type==="checkbox"},"input",this.get("element"))),this.on("keydown",this._onKeyDown),this.on("appendTo",this._onAppendTo),s=this.get("container"),s&&(e.isString(s)?n.onContentReady(s,function(){this.appendTo(s)},null,this):this.appendTo(s))},addButton:function(t){var n=g(t),r,i,s,o,u,a;return t instanceof YAHOO.widget.Button&&t.get("type")==="checkbox"?r=t:!e.isString(t)&&!t.nodeName?(t.type="checkbox",r=new h(t)):r=new h(t,{type:"checkbox"}),r&&(o=this._buttons.length,u=r.get("name"),a=this.get("name"),r.index=o,this._buttons[o]=r,m[r.get("id")]=r,u!==a&&r.set("name",a),this.get("disabled")&&r.set("disabled",!0),i=r.get("element"),s=this.get("element"),i.parentNode!==s&&s.appendChild(i),r.on("labelChange",this._adjustButtonWidths,r,this)),n&&b(r,n),this.fireEvent("addCheckboxButtonEvent",{type:"addCheckboxButton",button:r}),r},removeButton:function(e){var t=this.getButton(e),n,r;if(t){this._buttons.splice(e,1),delete m[t.get("id")],t.destroy(),n=this._buttons.length;if(n>0){r=this._buttons.length-1;do this._buttons[r].index=r;while(r--)}this.fireEvent("removeCheckboxButtonEvent",{type:"removeCheckboxButton",button:t})}},_onKeyDown:function(e){},_onButtonCheckedChange:function(e,t){}}),l=function(r,i){var s,o;if(!t.get(r))return;l.superclass.constructor.apply(this,arguments),s=this.get("checkedButton"),this.on("checkedButtonChange",function(t){e.later(0,{},function(){s=t.newValue})}),o=this.get("container"),e.isString(o)?n.onContentReady(o,function(){this._initButtonWidths()},null,this):this._initButtonWidths(),this.subscribe("addButtonEvent",function(e){this._adjustButtonWidths(e,e.button)}),this.subscribe("removeButtonEvent",function(e){this._adjustButtonWidths(e,e.button)})},e.extend(l,a,{addButton:function(t){var n=g(t),r;return t instanceof YAHOO.widget.Button&&t.get("type")==="radio"?r=t:!e.isString(t)&&!t.nodeName?(t.type="radio",r=new h(t)):r=new h(t,{type:"radio"}),r=YAHOO.widget.ButtonGroup.prototype.addButton.call(this,r),r&&r.on("labelChange",this._adjustButtonWidths,r,this),n&&b(r,n),r},_onButtonCheckedChange:function(e,t){var n=e.newValue,r=this.get("checkedButton");!n&&t===r?(this.set("checkedButton",null),this.set("value",null)):l.superclass._onButtonCheckedChange.apply(this,arguments)}}),c=l,ORCHESTRAL.widget.Button=h,ORCHESTRAL.widget.PrimaryButton=r,ORCHESTRAL.widget.SubmitButton=i,ORCHESTRAL.widget.SecondaryButton=s,ORCHESTRAL.widget.IconButton=o,ORCHESTRAL.widget.LinkButton=u,ORCHESTRAL.widget.ButtonGroupBase=a,ORCHESTRAL.widget.CheckboxButtonGroup=f,ORCHESTRAL.widget.RadioButtonGroup=l,ORCHESTRAL.widget.ButtonGroup=ORCHESTRAL.widget.RadioButtonGroup}(),YAHOO.register("orchestral-button-core",ORCHESTRAL.widget.Button,{version:"7.9",build:"0"});
