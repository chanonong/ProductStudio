/*
 * Copyright (c) Orchestral Developments Ltd (2001 - 2014).
 *
 * This document is copyright. Except for the purpose of fair reviewing, no part
 * of this publication may be reproduced or transmitted in any form or by any
 * means, electronic or mechanical, including photocopying, recording, or any
 * information storage and retrieval system, without permission in writing from
 * the publisher. Infringers of copyright render themselves liable for
 * prosecution.
 */
YUI.add("ohp-showhide",function(e,t){function n(){n.superclass.constructor.apply(this,arguments),this.publish("beforeopen",{defaultFn:this._beforeOpen,bubbles:!0,broadcast:!0,preventable:!0}),this.publish("beforeclose",{defaultFn:this._beforeClose,bubbles:!1}),this.publish("afteropen",{defaultFn:this._afterOpen,bubbles:!1}),this.publish("afterclose",{defaultFn:this._afterClose,bubbles:!1})}n.NAME="showhide",n.ATTRS={startHidden:{value:!1},duration:{value:.5},childHeight:{value:1}};var r="ohp-showhide-toggle-open",i="ohp-showhide-toggle-closed";e.extend(n,e.OHP.Widget,{initializer:function(){},bindUI:function(){this.getStdModNode(e.WidgetStdMod.BODY)&&(this.set("childHeight",this.getStdModNode(e.WidgetStdMod.BODY).get("scrollHeight")),this.getStdModNode(e.WidgetStdMod.BODY).setStyle("zIndex",1),this.getStdModNode(e.WidgetStdMod.HEADER).setStyle("zIndex",5));var t=this.getStdModNode(e.WidgetStdMod.HEADER);t&&t.on("click",this.toggle,this)},syncUI:function(){this.get("startHidden")&&this.getStdModNode(e.WidgetStdMod.HEADER).simulate("click")},renderUI:function(){var t=this.getStdModNode(e.WidgetStdMod.HEADER);t&&t.addClass("evented"),this.get("contentBox").setStyle("zIndex","2")},toggle:function(){var t=this.getStdModNode(e.WidgetStdMod.HEADER),n=this.getStdModNode(e.WidgetStdMod.BODY),s,o,u,a;t.hasClass(i)&&n.setStyle("display","auto"),s=this.get("duration"),o=this.get("childHeight"),u=n.plug(e.Plugin.NodeFX,{from:{height:"0",opacity:0},to:{height:o,opacity:1},easing:e.Easing.easeOut,duration:s}),t.hasClass(i)?a=this.fire("beforeopen"):this.fire("beforeclose"),t.toggleClass(r),t.toggleClass(i),u.fx.set("reverse",!u.fx.get("reverse")),u.fx.run(),t.hasClass(i)?this.fire("afterclose"):this.fire("afteropen")},_beforeOpen:function(){this.getStdModNode(e.WidgetStdMod.BODY).setStyle("display","block")},_beforeClose:function(){},_afterOpen:function(){this.fire("toggle")},_afterClose:function(){this.getStdModNode(e.WidgetStdMod.BODY).setStyle("display","none"),this.fire("toggle")}}),e.namespace("OHP").ShowHide=n},"7.9.0",{requires:["selector","widget-stack","anim","node","ohp-widget","widget-position","widget-stdmod","node-event-simulate","base","widget","widget-anim"]});
