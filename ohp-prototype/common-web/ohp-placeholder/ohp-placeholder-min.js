/*
 * Copyright (c) Orchestral Developments Ltd (2001 - 2014).
 *
 * This document is copyright. Except for the purpose of fair reviewing, no part
 * of this publication may be reproduced or transmitted in any form or by any
 * means, electronic or mechanical, including photocopying, recording, or any
 * information storage and retrieval system, without permission in writing from
 * the publisher. Infringers of copyright render themselves liable for
 * prosecution.
 */
YUI.add("ohp-placeholder",function(e,t){"use strict";var n="placeholder",r=e.config.doc,i=e.config.win;e.namespace("OHP").PlaceholderPlugin=e.Base.create("PlaceholderPlugin",e.Plugin.Base,[],{initializer:function(){var t=this.get("host"),i=t.get("value"),s=e.Node.getDOMNode(t).tagName;if((s!=="INPUT"||t.getAttribute("type")!=="text")&&s!=="TEXTAREA"||!t.getAttribute("placeholder"))return;if(t.hasAttribute("data-ohp-placeholder")||t.hasClass("cow-off-screen-shim-element"))return;this._clone=this._initClone(t),t.setAttribute("data-ohp-placeholder",""),t.hasAttribute("tabindex")||t.setAttribute("tabindex","0"),t.get("value")?this._clone.hide():t.hide(),this.onHostEvent("blur",function(){t.get("value")||(t.hide(),this._clone.set("value",t.getAttribute("placeholder")||""),this._clone.show())},this),this._timer=e.later(200,this,function(){var s=t.getAttribute("class"),o=t.getAttribute("placeholder"),u=this._clone.getAttribute("class"),a=t.get("value");if(r.activeElement===e.Node.getDOMNode(t))return;a!==i&&(i=a,a?(t.show(),this._clone.hide()):(t.hide(),this._clone.set("value",o||""),this._clone.show())),s!==u.replace(new RegExp("\\s*"+n),"")&&(this._clone.setAttribute("class",s),this._clone.addClass(n)),t.hasAttribute("placeholder")&&this._clone.get("value")!==o&&this._clone.set("value",o||"")},[],!0)},destructor:function(){this._clone.remove(!0),this._timer&&this._timer.cancel()},_initClone:function(t){var r=t.cloneNode(),s=function(){t.show(),t.focus(),r.hide()};return r.removeAttribute("id"),r.removeAttribute("name"),r.removeAttribute("placeholder"),r.removeAttribute("tabindex"),r.setAttribute("data-ohp-placeholder",""),r.set("value",t.getAttribute("placeholder")),r.addClass(n),t.insert(r,"before"),i.attachEvent?e.Node.getDOMNode(r).attachEvent("onfocus",s):r.on("focus",s,this),r},_clone:null,_timer:null},{NS:"placeholder",ATTRS:{}})},"7.9.0",{requires:["base-build","node-style","plugin","event-base","node-base"]});
