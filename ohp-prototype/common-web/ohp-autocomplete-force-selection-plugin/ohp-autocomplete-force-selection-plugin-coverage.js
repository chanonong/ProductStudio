/*
 * Copyright (c) Orchestral Developments Ltd (2001 - 2014).
 *
 * This document is copyright. Except for the purpose of fair reviewing, no part
 * of this publication may be reproduced or transmitted in any form or by any
 * means, electronic or mechanical, including photocopying, recording, or any
 * information storage and retrieval system, without permission in writing from
 * the publisher. Infringers of copyright render themselves liable for
 * prosecution.
 */

var __cov_zBrBDPusUlZ35xulwG5ASQ = (Function('return this'))();
if (!__cov_zBrBDPusUlZ35xulwG5ASQ.__coverage__) { __cov_zBrBDPusUlZ35xulwG5ASQ.__coverage__ = {}; }
__cov_zBrBDPusUlZ35xulwG5ASQ = __cov_zBrBDPusUlZ35xulwG5ASQ.__coverage__;
if (!(__cov_zBrBDPusUlZ35xulwG5ASQ['/build/work/UIE-COW-JOB1/Common-Web/com.orchestral.commonweb/web/ohp-autocomplete-force-selection-plugin/ohp-autocomplete-force-selection-plugin.js'])) {
   __cov_zBrBDPusUlZ35xulwG5ASQ['/build/work/UIE-COW-JOB1/Common-Web/com.orchestral.commonweb/web/ohp-autocomplete-force-selection-plugin/ohp-autocomplete-force-selection-plugin.js'] = {"path":"/build/work/UIE-COW-JOB1/Common-Web/com.orchestral.commonweb/web/ohp-autocomplete-force-selection-plugin/ohp-autocomplete-force-selection-plugin.js","s":{"1":0,"2":0,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"fnMap":{"1":{"name":"(anonymous_1)","line":2,"loc":{"start":{"line":2,"column":51},"end":{"line":2,"column":70}}},"2":{"name":"ForceSelection","line":50,"loc":{"start":{"line":50,"column":0},"end":{"line":50,"column":38}}},"3":{"name":"(anonymous_3)","line":59,"loc":{"start":{"line":59,"column":14},"end":{"line":59,"column":31}}},"4":{"name":"(anonymous_4)","line":66,"loc":{"start":{"line":66,"column":34},"end":{"line":66,"column":46}}},"5":{"name":"(anonymous_5)","line":72,"loc":{"start":{"line":72,"column":26},"end":{"line":72,"column":37}}},"6":{"name":"(anonymous_6)","line":84,"loc":{"start":{"line":84,"column":13},"end":{"line":84,"column":24}}},"7":{"name":"(anonymous_7)","line":100,"loc":{"start":{"line":100,"column":25},"end":{"line":100,"column":36}}},"8":{"name":"(anonymous_8)","line":113,"loc":{"start":{"line":113,"column":25},"end":{"line":113,"column":37}}},"9":{"name":"(anonymous_9)","line":139,"loc":{"start":{"line":139,"column":23},"end":{"line":139,"column":34}}}},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":169,"column":3}},"2":{"start":{"line":16,"column":0},"end":{"line":30,"column":3}},"3":{"start":{"line":50,"column":0},"end":{"line":52,"column":1}},"4":{"start":{"line":51,"column":1},"end":{"line":51,"column":62}},"5":{"start":{"line":54,"column":0},"end":{"line":54,"column":25}},"6":{"start":{"line":55,"column":0},"end":{"line":55,"column":39}},"7":{"start":{"line":57,"column":0},"end":{"line":155,"column":3}},"8":{"start":{"line":60,"column":2},"end":{"line":60,"column":28}},"9":{"start":{"line":62,"column":2},"end":{"line":62,"column":57}},"10":{"start":{"line":64,"column":2},"end":{"line":80,"column":4}},"11":{"start":{"line":67,"column":4},"end":{"line":67,"column":34}},"12":{"start":{"line":68,"column":4},"end":{"line":68,"column":32}},"13":{"start":{"line":73,"column":4},"end":{"line":78,"column":5}},"14":{"start":{"line":74,"column":5},"end":{"line":74,"column":34}},"15":{"start":{"line":75,"column":5},"end":{"line":75,"column":31}},"16":{"start":{"line":77,"column":5},"end":{"line":77,"column":33}},"17":{"start":{"line":86,"column":2},"end":{"line":86,"column":47}},"18":{"start":{"line":88,"column":2},"end":{"line":88,"column":37}},"19":{"start":{"line":89,"column":2},"end":{"line":89,"column":34}},"20":{"start":{"line":90,"column":2},"end":{"line":90,"column":32}},"21":{"start":{"line":102,"column":2},"end":{"line":105,"column":67}},"22":{"start":{"line":107,"column":2},"end":{"line":107,"column":42}},"23":{"start":{"line":108,"column":2},"end":{"line":108,"column":61}},"24":{"start":{"line":111,"column":2},"end":{"line":111,"column":26}},"25":{"start":{"line":113,"column":2},"end":{"line":128,"column":11}},"26":{"start":{"line":115,"column":3},"end":{"line":115,"column":22}},"27":{"start":{"line":116,"column":3},"end":{"line":116,"column":23}},"28":{"start":{"line":118,"column":3},"end":{"line":118,"column":27}},"29":{"start":{"line":120,"column":3},"end":{"line":120,"column":16}},"30":{"start":{"line":121,"column":3},"end":{"line":121,"column":47}},"31":{"start":{"line":124,"column":3},"end":{"line":124,"column":49}},"32":{"start":{"line":126,"column":3},"end":{"line":126,"column":18}},"33":{"start":{"line":127,"column":3},"end":{"line":127,"column":17}},"34":{"start":{"line":130,"column":2},"end":{"line":130,"column":26}},"35":{"start":{"line":141,"column":2},"end":{"line":141,"column":48}},"36":{"start":{"line":143,"column":2},"end":{"line":153,"column":3}},"37":{"start":{"line":144,"column":3},"end":{"line":144,"column":22}},"38":{"start":{"line":146,"column":3},"end":{"line":146,"column":91}},"39":{"start":{"line":149,"column":3},"end":{"line":149,"column":27}},"40":{"start":{"line":150,"column":3},"end":{"line":150,"column":56}},"41":{"start":{"line":152,"column":3},"end":{"line":152,"column":62}},"42":{"start":{"line":157,"column":0},"end":{"line":157,"column":58}}},"branchMap":{"1":{"line":73,"type":"if","locations":[{"start":{"line":73,"column":4},"end":{"line":73,"column":4}},{"start":{"line":73,"column":4},"end":{"line":73,"column":4}}]},"2":{"line":73,"type":"binary-expr","locations":[{"start":{"line":73,"column":8},"end":{"line":73,"column":27}},{"start":{"line":73,"column":31},"end":{"line":73,"column":83}}]},"3":{"line":143,"type":"if","locations":[{"start":{"line":143,"column":2},"end":{"line":143,"column":2}},{"start":{"line":143,"column":2},"end":{"line":143,"column":2}}]}},"code":["(function () { /*!(C) ORCHESTRAL*/","YUI.add('ohp-autocomplete-force-selection-plugin', function (Y, NAME) {","","\"use strict\";","/**","Provides a plugin which adds force selection functionality to an Autocomplete control. Should be plugged in to the input hosting the","autocomplete.","","Consider enabling 'activateFirstItem' in the Autocomplete control. This will mean if the user clicks the change link by mistake, or if they","change their mind after selecting it, they can re-select the item with one key press (tab or enter) - as it will already be selected in the","list.","","@module ohp-autocomplete-force-selection-plugin","**/","","var Locale = Y.OHP.Locale,","\tgetClassName = Y.OHP.OhpClassNameManager.getClassName,","","\tCLASS_NAMES = {","\t\tcontainer: getClassName('ac', 'fs', 'container'),","\t\tdisplayText: getClassName('ac', 'fs', 'text'),","\t\tchangeLink: getClassName('ac', 'fs', 'link')","\t},","","\tTEXT_AND_LINK = Y.Handlebars.compile(","\t\t'<span class=\"' + CLASS_NAMES.container + '\">' +","\t\t\t'<span class=\"' + CLASS_NAMES.displayText + '\"></span>' +","\t\t\t'&nbsp;<a href=\"#\" class=\"' + CLASS_NAMES.changeLink + '\">' + Locale.get('widget.autocomplete.change') + '</a>' +","\t\t'</span>'","\t);","","/**","A plugin to ensure that users can only select values from the autocomplete suggestion list - other values will be cleared from the input on","blur. This plugin should be bound to an input instance that is hosting a Y.Plugin.AutoComplete.","","@example","","\tvar myInput = Y.one('#my-input');","","\tmyInput.plug(Y.Plugin.AutoComplete, {","\t\tsource: ['a', 'b', 'c', 'd']","\t});","","\tmyInput.plug(Y.OHP.Plugin.ForceSelection);","","@class ForceSelection","@namespace OHP.Plugin","@extends Plugin.Base","**/","function ForceSelection(/* config */) {","\tForceSelection.superclass.constructor.apply(this, arguments);","}","","ForceSelection.NS = 'fs';","ForceSelection.NAME = 'ForceSelection';","","Y.extend(ForceSelection, Y.Plugin.Base, {","","\tinitializer: function(config) {","\t\tthis._input = config.host;","","\t\tthis._displayContainer = this._setupDisplayContainer();","","\t\tthis._eventHandles = [","","\t\t\tthis._input.ac.after('select', function(e) {","\t\t\t\tthis._selectedItem = e.result;","\t\t\t\tthis._displaySelectedItem();","\t\t\t}, this),","","\t\t\t// If the text has changed since the last valid input, clear it out. If it hasn't changed, select again on blur.","\t\t\tthis._input.on('blur', function() {","\t\t\t\tif (!this._selectedItem || this._input.get('value') !== this._selectedItem.text) {","\t\t\t\t\tthis._input.set('value', '');","\t\t\t\t\tthis._selectedItem = null;","\t\t\t\t} else {","\t\t\t\t\tthis._displaySelectedItem();","\t\t\t\t}","\t\t\t}, this)","\t\t];","","\t},","","\tdestructor: function() {","","\t\tY.Array.invoke(this._eventHandles, 'detach');","","\t\tthis._displayContainer.purge(true);","\t\tthis._displayContainer.remove();","\t\tthis._displayContainer = null;","\t},","","\t/**","\tConstruct the container that will be used to display the read only view of the selected list item once the user has chosen from the","\tlist. A change link allows the user to revert back to the editable input with autocomplete and choose again.","","\t@method _setupDisplayContainer","\t@private","\t**/","\t_setupDisplayContainer: function() {","","\t\tvar input = this._input,","\t\t\tinputHeight = input.getDOMNode().offsetHeight,","\t\t\tdisplayContainer = Y.Node.create(TEXT_AND_LINK()),","\t\t\tchangeLink = displayContainer.one('.' + CLASS_NAMES.changeLink);","","\t\tinput.insert(displayContainer, 'after');","\t\tdisplayContainer.setStyle('minHeight', inputHeight + 'px');","","\t\t// Hide the display container to begin with","\t\tdisplayContainer.hide();","","\t\tchangeLink.on('click', function(e) {","","\t\t\te.preventDefault();","\t\t\te.stopPropagation();","","\t\t\tdisplayContainer.hide();","","\t\t\tinput.show();","\t\t\tinput.set('value', this._selectedItem.text);","","\t\t\t// Trigger the autocomplete list to search straight away","\t\t\tinput.ac.sendRequest(this._selectedItem.text);","","\t\t\tinput.select();","\t\t\tinput.focus();","\t\t}, this);","","\t\treturn displayContainer;","\t},","","\t/**","\tToggles the read only view of the selected item, if not already shown.","","\t@method _displaySelectedItem","\t@private","\t**/","\t_displaySelectedItem: function() {","","\t\tvar displayContainer = this._displayContainer;","","\t\tif (displayContainer.getAttribute('hidden') !== 'true') {","\t\t\tthis._input.hide();","","\t\t\tdisplayContainer.one('.' + CLASS_NAMES.displayText).setHTML(this._selectedItem.display);","","\t\t\t// Providing our own show method that sets display to be an inline block","\t\t\tdisplayContainer.show();","\t\t\tdisplayContainer.setStyle('display', 'inline-block');","","\t\t\tdisplayContainer.one('.' + CLASS_NAMES.changeLink).focus();","\t\t}","\t}","});","","Y.namespace('OHP.Plugin').ForceSelection = ForceSelection;","","","}, '7.9.0', {","    \"requires\": [","        \"base\",","        \"handlebars\",","        \"plugin\",","        \"ohp-locale-translations\",","        \"ohp-locale-base\",","        \"ohp-ohp-class-name-manager\"","    ]","});","","}());"]};
}
__cov_zBrBDPusUlZ35xulwG5ASQ = __cov_zBrBDPusUlZ35xulwG5ASQ['/build/work/UIE-COW-JOB1/Common-Web/com.orchestral.commonweb/web/ohp-autocomplete-force-selection-plugin/ohp-autocomplete-force-selection-plugin.js'];
__cov_zBrBDPusUlZ35xulwG5ASQ.s['1']++;YUI.add('ohp-autocomplete-force-selection-plugin',function(Y,NAME){'use strict';__cov_zBrBDPusUlZ35xulwG5ASQ.f['1']++;__cov_zBrBDPusUlZ35xulwG5ASQ.s['2']++;var Locale=Y.OHP.Locale,getClassName=Y.OHP.OhpClassNameManager.getClassName,CLASS_NAMES={container:getClassName('ac','fs','container'),displayText:getClassName('ac','fs','text'),changeLink:getClassName('ac','fs','link')},TEXT_AND_LINK=Y.Handlebars.compile('<span class="'+CLASS_NAMES.container+'">'+'<span class="'+CLASS_NAMES.displayText+'"></span>'+'&nbsp;<a href="#" class="'+CLASS_NAMES.changeLink+'">'+Locale.get('widget.autocomplete.change')+'</a>'+'</span>');function ForceSelection(){__cov_zBrBDPusUlZ35xulwG5ASQ.f['2']++;__cov_zBrBDPusUlZ35xulwG5ASQ.s['4']++;ForceSelection.superclass.constructor.apply(this,arguments);}__cov_zBrBDPusUlZ35xulwG5ASQ.s['5']++;ForceSelection.NS='fs';__cov_zBrBDPusUlZ35xulwG5ASQ.s['6']++;ForceSelection.NAME='ForceSelection';__cov_zBrBDPusUlZ35xulwG5ASQ.s['7']++;Y.extend(ForceSelection,Y.Plugin.Base,{initializer:function(config){__cov_zBrBDPusUlZ35xulwG5ASQ.f['3']++;__cov_zBrBDPusUlZ35xulwG5ASQ.s['8']++;this._input=config.host;__cov_zBrBDPusUlZ35xulwG5ASQ.s['9']++;this._displayContainer=this._setupDisplayContainer();__cov_zBrBDPusUlZ35xulwG5ASQ.s['10']++;this._eventHandles=[this._input.ac.after('select',function(e){__cov_zBrBDPusUlZ35xulwG5ASQ.f['4']++;__cov_zBrBDPusUlZ35xulwG5ASQ.s['11']++;this._selectedItem=e.result;__cov_zBrBDPusUlZ35xulwG5ASQ.s['12']++;this._displaySelectedItem();},this),this._input.on('blur',function(){__cov_zBrBDPusUlZ35xulwG5ASQ.f['5']++;__cov_zBrBDPusUlZ35xulwG5ASQ.s['13']++;if((__cov_zBrBDPusUlZ35xulwG5ASQ.b['2'][0]++,!this._selectedItem)||(__cov_zBrBDPusUlZ35xulwG5ASQ.b['2'][1]++,this._input.get('value')!==this._selectedItem.text)){__cov_zBrBDPusUlZ35xulwG5ASQ.b['1'][0]++;__cov_zBrBDPusUlZ35xulwG5ASQ.s['14']++;this._input.set('value','');__cov_zBrBDPusUlZ35xulwG5ASQ.s['15']++;this._selectedItem=null;}else{__cov_zBrBDPusUlZ35xulwG5ASQ.b['1'][1]++;__cov_zBrBDPusUlZ35xulwG5ASQ.s['16']++;this._displaySelectedItem();}},this)];},destructor:function(){__cov_zBrBDPusUlZ35xulwG5ASQ.f['6']++;__cov_zBrBDPusUlZ35xulwG5ASQ.s['17']++;Y.Array.invoke(this._eventHandles,'detach');__cov_zBrBDPusUlZ35xulwG5ASQ.s['18']++;this._displayContainer.purge(true);__cov_zBrBDPusUlZ35xulwG5ASQ.s['19']++;this._displayContainer.remove();__cov_zBrBDPusUlZ35xulwG5ASQ.s['20']++;this._displayContainer=null;},_setupDisplayContainer:function(){__cov_zBrBDPusUlZ35xulwG5ASQ.f['7']++;__cov_zBrBDPusUlZ35xulwG5ASQ.s['21']++;var input=this._input,inputHeight=input.getDOMNode().offsetHeight,displayContainer=Y.Node.create(TEXT_AND_LINK()),changeLink=displayContainer.one('.'+CLASS_NAMES.changeLink);__cov_zBrBDPusUlZ35xulwG5ASQ.s['22']++;input.insert(displayContainer,'after');__cov_zBrBDPusUlZ35xulwG5ASQ.s['23']++;displayContainer.setStyle('minHeight',inputHeight+'px');__cov_zBrBDPusUlZ35xulwG5ASQ.s['24']++;displayContainer.hide();__cov_zBrBDPusUlZ35xulwG5ASQ.s['25']++;changeLink.on('click',function(e){__cov_zBrBDPusUlZ35xulwG5ASQ.f['8']++;__cov_zBrBDPusUlZ35xulwG5ASQ.s['26']++;e.preventDefault();__cov_zBrBDPusUlZ35xulwG5ASQ.s['27']++;e.stopPropagation();__cov_zBrBDPusUlZ35xulwG5ASQ.s['28']++;displayContainer.hide();__cov_zBrBDPusUlZ35xulwG5ASQ.s['29']++;input.show();__cov_zBrBDPusUlZ35xulwG5ASQ.s['30']++;input.set('value',this._selectedItem.text);__cov_zBrBDPusUlZ35xulwG5ASQ.s['31']++;input.ac.sendRequest(this._selectedItem.text);__cov_zBrBDPusUlZ35xulwG5ASQ.s['32']++;input.select();__cov_zBrBDPusUlZ35xulwG5ASQ.s['33']++;input.focus();},this);__cov_zBrBDPusUlZ35xulwG5ASQ.s['34']++;return displayContainer;},_displaySelectedItem:function(){__cov_zBrBDPusUlZ35xulwG5ASQ.f['9']++;__cov_zBrBDPusUlZ35xulwG5ASQ.s['35']++;var displayContainer=this._displayContainer;__cov_zBrBDPusUlZ35xulwG5ASQ.s['36']++;if(displayContainer.getAttribute('hidden')!=='true'){__cov_zBrBDPusUlZ35xulwG5ASQ.b['3'][0]++;__cov_zBrBDPusUlZ35xulwG5ASQ.s['37']++;this._input.hide();__cov_zBrBDPusUlZ35xulwG5ASQ.s['38']++;displayContainer.one('.'+CLASS_NAMES.displayText).setHTML(this._selectedItem.display);__cov_zBrBDPusUlZ35xulwG5ASQ.s['39']++;displayContainer.show();__cov_zBrBDPusUlZ35xulwG5ASQ.s['40']++;displayContainer.setStyle('display','inline-block');__cov_zBrBDPusUlZ35xulwG5ASQ.s['41']++;displayContainer.one('.'+CLASS_NAMES.changeLink).focus();}else{__cov_zBrBDPusUlZ35xulwG5ASQ.b['3'][1]++;}}});__cov_zBrBDPusUlZ35xulwG5ASQ.s['42']++;Y.namespace('OHP.Plugin').ForceSelection=ForceSelection;},'7.9.0',{'requires':['base','handlebars','plugin','ohp-locale-translations','ohp-locale-base','ohp-ohp-class-name-manager']});
