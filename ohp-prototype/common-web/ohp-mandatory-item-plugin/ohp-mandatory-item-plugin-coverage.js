/*
 * Copyright (c) Orchestral Developments Ltd (2001 - 2014).
 *
 * This document is copyright. Except for the purpose of fair reviewing, no part
 * of this publication may be reproduced or transmitted in any form or by any
 * means, electronic or mechanical, including photocopying, recording, or any
 * information storage and retrieval system, without permission in writing from
 * the publisher. Infringers of copyright render themselves liable for
 * prosecution.
 */

var __cov_rF9HcKgVLIrv6H27d4Cj7w = (Function('return this'))();
if (!__cov_rF9HcKgVLIrv6H27d4Cj7w.__coverage__) { __cov_rF9HcKgVLIrv6H27d4Cj7w.__coverage__ = {}; }
__cov_rF9HcKgVLIrv6H27d4Cj7w = __cov_rF9HcKgVLIrv6H27d4Cj7w.__coverage__;
if (!(__cov_rF9HcKgVLIrv6H27d4Cj7w['/build/work/UIE-COW-JOB1/Common-Web/com.orchestral.commonweb/web/ohp-mandatory-item-plugin/ohp-mandatory-item-plugin.js'])) {
   __cov_rF9HcKgVLIrv6H27d4Cj7w['/build/work/UIE-COW-JOB1/Common-Web/com.orchestral.commonweb/web/ohp-mandatory-item-plugin/ohp-mandatory-item-plugin.js'] = {"path":"/build/work/UIE-COW-JOB1/Common-Web/com.orchestral.commonweb/web/ohp-mandatory-item-plugin/ohp-mandatory-item-plugin.js","s":{"1":0,"2":0,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0},"fnMap":{"1":{"name":"(anonymous_1)","line":2,"loc":{"start":{"line":2,"column":37},"end":{"line":2,"column":56}}},"2":{"name":"MandatoryListItemPlugin","line":20,"loc":{"start":{"line":20,"column":0},"end":{"line":20,"column":45}}},"3":{"name":"(anonymous_3)","line":28,"loc":{"start":{"line":28,"column":14},"end":{"line":28,"column":36}}},"4":{"name":"(anonymous_4)","line":40,"loc":{"start":{"line":40,"column":18},"end":{"line":40,"column":30}}},"5":{"name":"(anonymous_5)","line":54,"loc":{"start":{"line":54,"column":12},"end":{"line":54,"column":40}}}},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":97,"column":3}},"2":{"start":{"line":13,"column":0},"end":{"line":13,"column":26}},"3":{"start":{"line":20,"column":0},"end":{"line":22,"column":1}},"4":{"start":{"line":21,"column":1},"end":{"line":21,"column":71}},"5":{"start":{"line":24,"column":0},"end":{"line":24,"column":57}},"6":{"start":{"line":25,"column":0},"end":{"line":25,"column":45}},"7":{"start":{"line":27,"column":0},"end":{"line":82,"column":3}},"8":{"start":{"line":29,"column":2},"end":{"line":29,"column":78}},"9":{"start":{"line":31,"column":2},"end":{"line":31,"column":55}},"10":{"start":{"line":32,"column":2},"end":{"line":32,"column":56}},"11":{"start":{"line":33,"column":2},"end":{"line":33,"column":59}},"12":{"start":{"line":34,"column":2},"end":{"line":34,"column":60}},"13":{"start":{"line":35,"column":2},"end":{"line":35,"column":60}},"14":{"start":{"line":37,"column":2},"end":{"line":37,"column":25}},"15":{"start":{"line":41,"column":2},"end":{"line":47,"column":14}},"16":{"start":{"line":49,"column":2},"end":{"line":51,"column":3}},"17":{"start":{"line":50,"column":3},"end":{"line":50,"column":10}},"18":{"start":{"line":54,"column":2},"end":{"line":58,"column":5}},"19":{"start":{"line":55,"column":3},"end":{"line":57,"column":4}},"20":{"start":{"line":56,"column":4},"end":{"line":56,"column":11}},"21":{"start":{"line":60,"column":2},"end":{"line":79,"column":3}},"22":{"start":{"line":61,"column":3},"end":{"line":61,"column":52}},"23":{"start":{"line":65,"column":3},"end":{"line":66,"column":57}},"24":{"start":{"line":67,"column":3},"end":{"line":67,"column":60}},"25":{"start":{"line":69,"column":3},"end":{"line":75,"column":4}},"26":{"start":{"line":70,"column":4},"end":{"line":70,"column":54}},"27":{"start":{"line":73,"column":4},"end":{"line":73,"column":40}},"28":{"start":{"line":74,"column":4},"end":{"line":74,"column":59}},"29":{"start":{"line":77,"column":3},"end":{"line":77,"column":55}},"30":{"start":{"line":78,"column":3},"end":{"line":78,"column":43}},"31":{"start":{"line":84,"column":0},"end":{"line":84,"column":69}},"32":{"start":{"line":85,"column":0},"end":{"line":85,"column":65}}},"branchMap":{"1":{"line":49,"type":"if","locations":[{"start":{"line":49,"column":2},"end":{"line":49,"column":2}},{"start":{"line":49,"column":2},"end":{"line":49,"column":2}}]},"2":{"line":55,"type":"if","locations":[{"start":{"line":55,"column":3},"end":{"line":55,"column":3}},{"start":{"line":55,"column":3},"end":{"line":55,"column":3}}]},"3":{"line":60,"type":"if","locations":[{"start":{"line":60,"column":2},"end":{"line":60,"column":2}},{"start":{"line":60,"column":2},"end":{"line":60,"column":2}}]},"4":{"line":69,"type":"if","locations":[{"start":{"line":69,"column":3},"end":{"line":69,"column":3}},{"start":{"line":69,"column":3},"end":{"line":69,"column":3}}]}},"code":["(function () { /*!(C) ORCHESTRAL*/","YUI.add('ohp-mandatory-item-plugin', function (Y, NAME) {","","\"use strict\";","/**","RepeatingList plugin that enforces that at least one active item is in the list.","// TODO: update description as plugin can be applied to TagGroups (and other widgets?) too.","// TODO: should translation variables be changed to be more generic too?","","@module ohp-mandatory-item-plugin","**/","","var Locale = Y.OHP.Locale;","","/**"," * @class MandatoryListItemPlugin"," * @namespace OHP"," * @extends Plugin.Base"," */","function MandatoryListItemPlugin(/*config*/) {","\tMandatoryListItemPlugin.superclass.constructor.apply(this, arguments);","}","","MandatoryListItemPlugin.NAME = 'mandatoryListItemPlugin';","MandatoryListItemPlugin.NS = 'mandatoryItem';","","Y.extend(MandatoryListItemPlugin, Y.Plugin.Base, {","\tinitializer: function (/*config*/) {","\t\tthis._missingRequiredErrorNode = Y.Node.create('<div class=\"error\"></div>');","","\t\tthis.afterHostMethod('render', this._checkMandatory);","\t\tthis.afterHostEvent('addChild', this._checkMandatory);","\t\tthis.afterHostEvent('removeChild', this._checkMandatory);","\t\tthis.afterHostEvent('itemIncluded', this._checkMandatory);","\t\tthis.afterHostEvent('itemExcluded', this._checkMandatory);","","\t\tthis._checkMandatory();","\t},","","\t_checkMandatory: function () {","\t\tvar host = this.get('host'),","\t\t\tboundingBox = host.get('boundingBox'),","\t\t\tfield = boundingBox.ancestor('.field'),","\t\t\tn = host.size(),","\t\t\titemExcludedClass = host.getClassName('item-excluded'),","\t\t\terrorMessage,","\t\t\tcontentBox;","","\t\tif (!boundingBox.inDoc()) {","\t\t\treturn;","\t\t}","","\t\t// for every child that is excluded, remove it from the count","\t\thost.each(function(repeatingListItem) {","\t\t\tif (repeatingListItem.get('srcNode').hasClass(itemExcludedClass)) {","\t\t\t\tn -= 1;","\t\t\t}","\t\t});","","\t\tif (n === 0) {","\t\t\tboundingBox.addClass(host.getClassName('error'));","","\t\t\t// TODO: there should be a single translation for this message,","\t\t\t// not two concatenated as the order might not work in some languages","\t\t\terrorMessage = Locale.get('widget.repeatingList.error.atLeastOneItem') + ' ' +","\t\t\t\t\tLocale.get('widget.repeatingList.error.isRequired');","\t\t\tthis._missingRequiredErrorNode.set('text', errorMessage);","","\t\t\tif (field){","\t\t\t\tfield.appendChild(this._missingRequiredErrorNode);","\t\t\t} else {","\t\t\t\t// For situations where there is no field.","\t\t\t\tcontentBox = host.get('contentBox');","\t\t\t\tcontentBox.appendChild(this._missingRequiredErrorNode);","\t\t\t}","\t\t} else {","\t\t\tboundingBox.removeClass(host.getClassName('error'));","\t\t\tthis._missingRequiredErrorNode.remove();","\t\t}","","\t}","});","","Y.namespace('OHP').MandatoryListItemPlugin = MandatoryListItemPlugin;","Y.namespace('OHP').MandatoryItemPlugin = MandatoryListItemPlugin;","","","}, '7.9.0', {","    \"requires\": [","        \"ohp-locale-translations\",","        \"ohp-locale-base\",","        \"arraylist\",","        \"substitute\",","        \"plugin\",","        \"node-base\"","    ]","});","","}());"]};
}
__cov_rF9HcKgVLIrv6H27d4Cj7w = __cov_rF9HcKgVLIrv6H27d4Cj7w['/build/work/UIE-COW-JOB1/Common-Web/com.orchestral.commonweb/web/ohp-mandatory-item-plugin/ohp-mandatory-item-plugin.js'];
__cov_rF9HcKgVLIrv6H27d4Cj7w.s['1']++;YUI.add('ohp-mandatory-item-plugin',function(Y,NAME){'use strict';__cov_rF9HcKgVLIrv6H27d4Cj7w.f['1']++;__cov_rF9HcKgVLIrv6H27d4Cj7w.s['2']++;var Locale=Y.OHP.Locale;function MandatoryListItemPlugin(){__cov_rF9HcKgVLIrv6H27d4Cj7w.f['2']++;__cov_rF9HcKgVLIrv6H27d4Cj7w.s['4']++;MandatoryListItemPlugin.superclass.constructor.apply(this,arguments);}__cov_rF9HcKgVLIrv6H27d4Cj7w.s['5']++;MandatoryListItemPlugin.NAME='mandatoryListItemPlugin';__cov_rF9HcKgVLIrv6H27d4Cj7w.s['6']++;MandatoryListItemPlugin.NS='mandatoryItem';__cov_rF9HcKgVLIrv6H27d4Cj7w.s['7']++;Y.extend(MandatoryListItemPlugin,Y.Plugin.Base,{initializer:function(){__cov_rF9HcKgVLIrv6H27d4Cj7w.f['3']++;__cov_rF9HcKgVLIrv6H27d4Cj7w.s['8']++;this._missingRequiredErrorNode=Y.Node.create('<div class="error"></div>');__cov_rF9HcKgVLIrv6H27d4Cj7w.s['9']++;this.afterHostMethod('render',this._checkMandatory);__cov_rF9HcKgVLIrv6H27d4Cj7w.s['10']++;this.afterHostEvent('addChild',this._checkMandatory);__cov_rF9HcKgVLIrv6H27d4Cj7w.s['11']++;this.afterHostEvent('removeChild',this._checkMandatory);__cov_rF9HcKgVLIrv6H27d4Cj7w.s['12']++;this.afterHostEvent('itemIncluded',this._checkMandatory);__cov_rF9HcKgVLIrv6H27d4Cj7w.s['13']++;this.afterHostEvent('itemExcluded',this._checkMandatory);__cov_rF9HcKgVLIrv6H27d4Cj7w.s['14']++;this._checkMandatory();},_checkMandatory:function(){__cov_rF9HcKgVLIrv6H27d4Cj7w.f['4']++;__cov_rF9HcKgVLIrv6H27d4Cj7w.s['15']++;var host=this.get('host'),boundingBox=host.get('boundingBox'),field=boundingBox.ancestor('.field'),n=host.size(),itemExcludedClass=host.getClassName('item-excluded'),errorMessage,contentBox;__cov_rF9HcKgVLIrv6H27d4Cj7w.s['16']++;if(!boundingBox.inDoc()){__cov_rF9HcKgVLIrv6H27d4Cj7w.b['1'][0]++;__cov_rF9HcKgVLIrv6H27d4Cj7w.s['17']++;return;}else{__cov_rF9HcKgVLIrv6H27d4Cj7w.b['1'][1]++;}__cov_rF9HcKgVLIrv6H27d4Cj7w.s['18']++;host.each(function(repeatingListItem){__cov_rF9HcKgVLIrv6H27d4Cj7w.f['5']++;__cov_rF9HcKgVLIrv6H27d4Cj7w.s['19']++;if(repeatingListItem.get('srcNode').hasClass(itemExcludedClass)){__cov_rF9HcKgVLIrv6H27d4Cj7w.b['2'][0]++;__cov_rF9HcKgVLIrv6H27d4Cj7w.s['20']++;n-=1;}else{__cov_rF9HcKgVLIrv6H27d4Cj7w.b['2'][1]++;}});__cov_rF9HcKgVLIrv6H27d4Cj7w.s['21']++;if(n===0){__cov_rF9HcKgVLIrv6H27d4Cj7w.b['3'][0]++;__cov_rF9HcKgVLIrv6H27d4Cj7w.s['22']++;boundingBox.addClass(host.getClassName('error'));__cov_rF9HcKgVLIrv6H27d4Cj7w.s['23']++;errorMessage=Locale.get('widget.repeatingList.error.atLeastOneItem')+' '+Locale.get('widget.repeatingList.error.isRequired');__cov_rF9HcKgVLIrv6H27d4Cj7w.s['24']++;this._missingRequiredErrorNode.set('text',errorMessage);__cov_rF9HcKgVLIrv6H27d4Cj7w.s['25']++;if(field){__cov_rF9HcKgVLIrv6H27d4Cj7w.b['4'][0]++;__cov_rF9HcKgVLIrv6H27d4Cj7w.s['26']++;field.appendChild(this._missingRequiredErrorNode);}else{__cov_rF9HcKgVLIrv6H27d4Cj7w.b['4'][1]++;__cov_rF9HcKgVLIrv6H27d4Cj7w.s['27']++;contentBox=host.get('contentBox');__cov_rF9HcKgVLIrv6H27d4Cj7w.s['28']++;contentBox.appendChild(this._missingRequiredErrorNode);}}else{__cov_rF9HcKgVLIrv6H27d4Cj7w.b['3'][1]++;__cov_rF9HcKgVLIrv6H27d4Cj7w.s['29']++;boundingBox.removeClass(host.getClassName('error'));__cov_rF9HcKgVLIrv6H27d4Cj7w.s['30']++;this._missingRequiredErrorNode.remove();}}});__cov_rF9HcKgVLIrv6H27d4Cj7w.s['31']++;Y.namespace('OHP').MandatoryListItemPlugin=MandatoryListItemPlugin;__cov_rF9HcKgVLIrv6H27d4Cj7w.s['32']++;Y.namespace('OHP').MandatoryItemPlugin=MandatoryListItemPlugin;},'7.9.0',{'requires':['ohp-locale-translations','ohp-locale-base','arraylist','substitute','plugin','node-base']});
