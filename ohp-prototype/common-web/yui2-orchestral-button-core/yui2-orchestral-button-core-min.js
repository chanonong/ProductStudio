/*
 * Copyright (c) Orchestral Developments Ltd (2001 - 2014).
 *
 * This document is copyright. Except for the purpose of fair reviewing, no part
 * of this publication may be reproduced or transmitted in any form or by any
 * means, electronic or mechanical, including photocopying, recording, or any
 * information storage and retrieval system, without permission in writing from
 * the publisher. Infringers of copyright render themselves liable for
 * prosecution.
 */
YUI.add("yui2-orchestral-button-core",function(e,t){
/*!(C) ORCHESTRAL*/
var n=e.YUI2,r=n.ORCHESTRAL;n.namespace("ORCHESTRAL.widget"),function(){"use strict";function b(r){var i,s;return!(r instanceof n.widget.Button)&&(e.isString(r)||r.nodeName)&&(s=t.get(r),s.parentNode.tagName==="LABEL"&&(i=s.parentNode)),i}function w(e){var t,n=/^(&nbsp;|\s)*|(&nbsp;|\s)*$/g;return t=e.innerHTML,t&&(t=t.replace(n,"")),t}function E(e,t){e.set("label",w(t)),r.util.Dom.remove(t,!0)}var e=n.lang,t=n.util.Dom,i=n.util.Event,s,o,u,a,f,l,c,h,p,d,v,m,g,y={};s=function(e,r){if(!t.get(e)){n.log("No element passed to PrimaryButton constructor","warn");return}s.superclass.constructor.apply(this,arguments),this._removeButtonSubmitType(),v(this)},e.extend(s,n.widget.Button,{CSS_CLASS_NAME:"primary-button",_removeButtonSubmitType:function(){n.env.ua.ie&&n.env.ua.ie<8&&this._button.type==="submit"&&this._button.removeAttribute("type")}}),o=function(i,s){var u=Array.prototype.slice.call(arguments),a=e.isString(i)||r.util.Dom.isElement(i)?1:0,f=u[a]||{};if(!t.get(i)){n.log("No element passed to SubmitButton constructor","warn");return}u[a]=e.merge({type:"submit"},f),o.superclass.constructor.apply(this,u),this._button.setAttribute("type","submit")},e.extend(o,s,{createButtonElement:function(){var e=this.NODE_NAME,t=document.createElement(e);return t.innerHTML="<"+e+' class="first-child"><button type="submit"></button></'+e+">",t},_onClick:function(e){if(this.get("type")!=="submit")return o.superclass._onClick.apply(e)},_removeButtonSubmitType:function(){}}),u=function(e,r){var i=t.get(e);if(!i){n.log("No element passed to SecondaryButton constructor","warn");return}n.env.ua.ie===8&&i.type==="submit"&&i.setAttribute("type","button"),u.superclass.constructor.apply(this,arguments),v(this)},e.extend(u,n.widget.Button,{CSS_CLASS_NAME:"secondary-button"}),a=function(e,r){var i;if(!t.get(e)){n.log("No element passed to IconButton constructor","warn");return}for(i=0;i<arguments.length;++i)arguments[i].icon&&(arguments[i].label='<span class="'+arguments[i].icon+'"></span>');a.superclass.constructor.apply(this,arguments),v(this)},e.extend(a,n.widget.Button,{CSS_CLASS_NAME:"icon-button"}),f=function(s,o){var u=Array.prototype.slice.call(arguments),a=e.isString(s)||r.util.Dom.isElement(s)?1:0,l=u[a]||{};if(!t.get(s)){n.log("No element passed to LinkButton constructor","warn");return}u[a]=e.merge({type:"link",href:"#"},l),f.superclass.constructor.apply(this,u),v(this),i.on(this.get("element"),"click",function(e){i.preventDefault(e)})},e.extend(f,n.widget.Button,{CSS_CLASS_NAME:"link-button",_setDisabled:function(e){e?(this.hasFocus()&&this.blur(),this._button.setAttribute("disabled","disabled"),this.addStateCSSClasses("disabled"),this.removeStateCSSClasses("hover"),this.removeStateCSSClasses("active"),this.removeStateCSSClasses("focus"),this._button.setAttribute("tabindex","-1")):(this._button.removeAttribute("disabled"),this.removeStateCSSClasses("disabled"),this._button.setAttribute("tabindex",this._configs.tabindex.value))}}),v=function(n){var r=n.get("element"),i,s,o,u;if(!r)return;i=t.getPreviousSibling(r);if(!i||t.hasClass(i,"yui-push-button")||t.hasClass(i,"yui-icon-button"))s=r.previousSibling,s&&s.nodeType===3&&e.trim(s.data)===""&&s.parentNode.removeChild(s);o=t.getNextSibling(r);if(!o||t.hasClass(o,"yui-push-button")||t.hasClass(o,"yui-icon-button"))u=r.nextSibling,u&&u.nodeType===3&&e.trim(u.data)===""&&u.parentNode.removeChild(u)},m=function(e,t){var n=e.currentStyle[t],r=t.charAt(0).toUpperCase()+t.substr(1),i="offset"+r,s="pixel"+r,o="",u,a=/^width|height$/;return n==="auto"?(u=e[i],u===undefined&&(o=0),o=u,a.test(t)&&(e.style[t]=u,e[i]>u&&(o=u-(e[i]-u)),e.style[t]="auto")):(!e.style[s]&&!e.style[t]&&(e.style[t]=n),o=e.style[s]),o+"px"},d=function(r,i){if(!t.get(r)){n.log("No element passed to Button constructor","warn");return}if(arguments.length===1&&!e.isString(r)&&!r.nodeName)d.superclass.constructor.apply(this,arguments);else{var s={element:r,attributes:i||{}};s.attributes.srcelement=t.get(r),this._setCustomAttributesFromDOMAttributes(s),d.superclass.constructor.call(this,s.element,s.attributes)}},e.extend(d,n.widget.Button,{_setCustomAttributesFromDOMAttributes:function(e){var t=e.attributes,n=t.srcelement.attributes,r={},i,s,o,u,a,f,l;if(!t.dataset){for(f=0;f<n.length;f+=1){i=n[f];if(i.name.indexOf("data-")===0){s=i.name.substring(i.name.indexOf("-")+1),o=s.split("-").length-1;for(l=0;l<o;l++)u=s.indexOf("-")+1,a=s.charAt(u).toUpperCase(),s=s.substr(0,u-1)+a+s.substr(u+1);r[s]=i.value}}t.dataset=r}},initAttributes:function(t){var n=t||{};d.superclass.initAttributes.call(this,n),this.setAttributeConfig("dataset",{value:n.dataset,validator:e.isObject})}}),l=function(e,r){var i;if(!t.get(e)){n.log("No element passed to ButtonGroupBase constructor","warn");return}l.superclass.constructor.apply(this,arguments),i=this.get("ariaLabelledBy"),i&&this.get("element").setAttribute("aria-labelledby",i)},e.extend(l,n.widget.ButtonGroup,{_currentButtonWidth:"0px",_largestWidthButton:null,_initButtonWidths:function(){var e,n=r.env.ua.ie===6?"width":"min-width",i=r.env.ua.ie===6?"auto":"0px",s;this._currentButtonWidth="0px";for(s=0;s<this._buttons.length;s++)this._buttons[s].setStyle(n,i),t.setStyle(this._buttons[s].getElementsByClassName("first-child")[0],n,i),t.setStyle(this._buttons[s].getElementsByTagName("button")[0],n,i),e=this._buttons[s].getStyle("width"),e==="auto"&&document.all&&(e=m(this._buttons[s].get("element"),"width")),parseInt(e,10)>parseInt(this._currentButtonWidth,10)&&(this._currentButtonWidth=e,this._largestWidthButton=this._buttons[s]);for(s=0;s<this._buttons.length;s++)this._buttons[s].setStyle(n,this._currentButtonWidth),t.setStyle(this._buttons[s].getElementsByClassName("first-child")[0],n,this._currentButtonWidth),t.setStyle(this._buttons[s].getElementsByTagName("button")[0],n,this._currentButtonWidth)},_adjustButtonWidths:function(
e,n){if(n===this._largestWidthButton){this._initButtonWidths();return}var i,s=r.env.ua.ie===6?"width":"min-width",o;if(e.type==="addCheckboxButton"||r.env.ua.ie===6){var u=r.env.ua.ie===6?"auto":"0px";n.setStyle(s,u),t.setStyle(n.getElementsByClassName("first-child")[0],s,u),t.setStyle(n.getElementsByTagName("button")[0],s,u)}i=n.getStyle("width"),i==="auto"&&document.all&&(i=m(n.get("element"),"width"));if(parseInt(i,10)>parseInt(this._currentButtonWidth,10)){this._currentButtonWidth=i,this._largestWidthButton=n;for(o=0;o<this._buttons.length;o++)this._buttons[o].setStyle(s,this._currentButtonWidth),t.setStyle(this._buttons[o].getElementsByClassName("first-child")[0],s,this._currentButtonWidth),t.setStyle(this._buttons[o].getElementsByTagName("button")[0],s,this._currentButtonWidth)}else n.setStyle(s,this._currentButtonWidth),t.setStyle(n.getElementsByClassName("first-child")[0],s,this._currentButtonWidth),t.setStyle(n.getElementsByTagName("button")[0],s,this._currentButtonWidth)},initAttributes:function(t){var n=t||{};l.superclass.initAttributes.call(this,n),this.setAttributeConfig("ariaLabelledBy",{value:n.ariaLabelledBy,validator:e.isString})}}),c=function(r,s){var o;if(!t.get(r)){n.log("No element passed to CheckboxButtonGroup constructor","warn");return}c.superclass.constructor.apply(this,arguments),o=this.get("container"),e.isString(o)?i.onContentReady(o,function(){this._initButtonWidths()},null,this):this._initButtonWidths(),this.subscribe("addCheckboxButtonEvent",function(e){this._adjustButtonWidths(e,e.button)}),this.subscribe("removeCheckboxButtonEvent",function(e){this._adjustButtonWidths(e,e.button)})},e.extend(c,l,{CLASS_NAME_PREFIX:"",CSS_CLASS_NAME:"checkbox-group",init:function(r,s){var o;this._buttons=[],n.widget.ButtonGroup.superclass.init.call(this,r,s),this.addClass(this.CSS_CLASS_NAME),this.addButtons(this.getElementsByClassName("yui-checkbox-button")),this.addButtons(t.getElementsBy(function(e){return e.type==="checkbox"},"input",this.get("element"))),this.on("keydown",this._onKeyDown),this.on("appendTo",this._onAppendTo),o=this.get("container"),o&&(e.isString(o)?i.onContentReady(o,function(){this.appendTo(o)},null,this):this.appendTo(o))},addButton:function(t){var r=b(t),i,s,o,u,a,f;return t instanceof n.widget.Button&&t.get("type")==="checkbox"?i=t:!e.isString(t)&&!t.nodeName?(t.type="checkbox",i=new d(t)):i=new d(t,{type:"checkbox"}),i&&(u=this._buttons.length,a=i.get("name"),f=this.get("name"),i.index=u,this._buttons[u]=i,y[i.get("id")]=i,a!==f&&i.set("name",f),this.get("disabled")&&i.set("disabled",!0),s=i.get("element"),o=this.get("element"),s.parentNode!==o&&o.appendChild(s),i.on("labelChange",this._adjustButtonWidths,i,this)),r&&E(i,r),this.fireEvent("addCheckboxButtonEvent",{type:"addCheckboxButton",button:i}),i},removeButton:function(e){var t=this.getButton(e),n,r;if(t){this._buttons.splice(e,1),delete y[t.get("id")],t.destroy(),n=this._buttons.length;if(n>0){r=this._buttons.length-1;do this._buttons[r].index=r;while(r--)}this.fireEvent("removeCheckboxButtonEvent",{type:"removeCheckboxButton",button:t})}},_onKeyDown:function(e){},_onButtonCheckedChange:function(e,t){}}),h=function(r,s){var o,u;if(!t.get(r)){n.log("No element passed to RadioButtonGroup constructor","warn");return}h.superclass.constructor.apply(this,arguments),o=this.get("checkedButton"),this.on("checkedButtonChange",function(t){e.later(0,{},function(){o=t.newValue})}),u=this.get("container"),e.isString(u)?i.onContentReady(u,function(){this._initButtonWidths()},null,this):this._initButtonWidths(),this.subscribe("addButtonEvent",function(e){this._adjustButtonWidths(e,e.button)}),this.subscribe("removeButtonEvent",function(e){this._adjustButtonWidths(e,e.button)})},e.extend(h,l,{addButton:function(t){var r=b(t),i;return t instanceof n.widget.Button&&t.get("type")==="radio"?i=t:!e.isString(t)&&!t.nodeName?(t.type="radio",i=new d(t)):i=new d(t,{type:"radio"}),i=n.widget.ButtonGroup.prototype.addButton.call(this,i),i&&i.on("labelChange",this._adjustButtonWidths,i,this),r&&E(i,r),i},_onButtonCheckedChange:function(e,t){var n=e.newValue,r=this.get("checkedButton");!n&&t===r?(this.set("checkedButton",null),this.set("value",null)):h.superclass._onButtonCheckedChange.apply(this,arguments)}}),p=h,r.widget.Button=d,r.widget.PrimaryButton=s,r.widget.SubmitButton=o,r.widget.SecondaryButton=u,r.widget.IconButton=a,r.widget.LinkButton=f,r.widget.ButtonGroupBase=l,r.widget.CheckboxButtonGroup=c,r.widget.RadioButtonGroup=h,r.widget.ButtonGroup=r.widget.RadioButtonGroup}(),n.register("orchestral-button-core",r.widget.Button,{version:"7.9",build:"0"})},"7.9.0",{requires:["yui2-yahoo","yui2-button","yui2-orchestral","yui2-dom","yui2-orchestral-dom","yui2-logger"]});
