/*
 * Copyright (c) Orchestral Developments Ltd (2001 - 2014).
 *
 * This document is copyright. Except for the purpose of fair reviewing, no part
 * of this publication may be reproduced or transmitted in any form or by any
 * means, electronic or mechanical, including photocopying, recording, or any
 * information storage and retrieval system, without permission in writing from
 * the publisher. Infringers of copyright render themselves liable for
 * prosecution.
 */
YAHOO.namespace("ORCHESTRAL","ORCHESTRAL.util","ORCHESTRAL.lang");var ORCHESTRAL=YAHOO.ORCHESTRAL;(function(){"use strict";var e=YAHOO.util.Dom,t=YAHOO.util.Event,n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;","`":"&#x60;"};YAHOO.util.Event.throwErrors=!0,ORCHESTRAL.YUI_2_CONTEXT="/yui-2.8",ORCHESTRAL.COMMON_WEB_CONTEXT="/common-web",function(){var t=e.getElementsBy(function(){return!0},"script");e.batch(t,function(e,t){var n=e.getAttribute("src");n&&t.exec(n)&&(ORCHESTRAL.YUI_2_CONTEXT=n.slice(0,-1*"/event/event.js".length))},new RegExp("(/yui-2.\\d+)/event/event.js$")),e.batch(t,function(e,t){var n=e.getAttribute("src");n&&t.exec(n)&&(ORCHESTRAL.COMMON_WEB_CONTEXT=n.slice(0,-1*"/orchestral/orchestral.js".length))},new RegExp("(/common-web)/orchestral/orchestral.js$"))}(),ORCHESTRAL.use=function(e,t){var n=new YAHOO.util.YUILoader({allowRollup:!0,base:ORCHESTRAL.YUI_2_CONTEXT+"/"});n.addModule({name:"orchestral-loader",fullpath:ORCHESTRAL.COMMON_WEB_CONTEXT+"/loader/loader.js",type:"js"}),n.require("orchestral-loader"),n.insert({onSuccess:function(){ORCHESTRAL.util.Loader.load(e,t)}})},ORCHESTRAL.env={ua:YAHOO.lang.merge(YAHOO.env.ua,{ie:document.documentMode?document.documentMode:YAHOO.env.ua.ie})},ORCHESTRAL.env.ua.ie&&ORCHESTRAL.env.ua.ie<9&&(e.addClass(document.documentElement,"ie"+ORCHESTRAL.env.ua.ie),ORCHESTRAL.env.ua.ie===6&&function(){var e,t,n;e=function(){var e="orchestral/orchestral.js",t=new RegExp("(^.*/common-web/)"+e+"$"),n=document.getElementsByTagName("script"),r,i,s;for(r=n.length-1;r>=0;r-=1){i=n.item(r).src;if(i){s=t.exec(i);if(s)return s[1]}}},t=function(){var e="This content is not displayed because the browser you are using (Internet Explorer 6) is nolonger supported. Please update to a later version of Internet Explorer or use a different browser.\n\nDetails:\nThe current version of OHP Web (the Orion Health common web library) no longer supports Internet Explorer 6.\nIf you were not expecting this page, it is possible that anewly installed component has upgraded OHP Web.";alert(e)},n=e();if(n){window.onbeforeunload=null,setTimeout(t,2e3);try{window.location.replace(n+"unsupported-browser.jsp?url="+encodeURIComponent(window.location.href))}catch(r){}}else t()}()),ORCHESTRAL.lang={contains:function(e,t){var n;for(n=0;n<t.length;n+=1)if(t[n]===e)return!0;return!1},escapeHtml:function(e){return e.replace(/[&<>"'\/`]/g,function(e){return n[e]})},escapeRegex:function(e){return e.replace(/([.*+?\^${}()|\[\]\/\\])/g,"\\$1")},filter:function(e,t){var n=[],r;for(r=0;r<e.length;r+=1)t(e[r])&&n.push(e[r]);return n}},ORCHESTRAL.util.Locale=function(){var e={};return{put:function(t,n){e[t]=n},putAll:function(t){e=YAHOO.lang.merge(e,t)},get:function(t){var n=e[t],r=window.ORCHESTRAL_LOCALISATIONS;return YAHOO.lang.isUndefined(n)&&!YAHOO.lang.isUndefined(r)&&(n=r[t]),YAHOO.lang.isUndefined(n)?"???"+t+"???":arguments.length===1?n:YAHOO.lang.substitute(n,Array.prototype.slice.call(arguments).slice(1))}}}(),ORCHESTRAL.util.Registry=window.ORCHESTRAL_REGISTRY||function(){var t={};return{putEvent:new YAHOO.util.CustomEvent("putEvent",this),put:function(n,r,i){r&&r.tagName&&(r=r.id?r.id:e.generateId(r)),t[n]===undefined&&(t[n]={}),t[n][r]=i,this.putEvent.fire({type:n,key:r,value:i})},get:function(e,n){return n&&n.tagName&&n.id&&(n=n.id),t[e]===undefined?null:n===undefined?t[e]:t[e][n]===undefined?null:t[e][n]},clear:function(e,n){var r;if(e===undefined)t={};else if(n===undefined)delete t[e];else{delete t[e][n];for(r in t[e])if(t[e].hasOwnProperty(r))return;delete t[e]}},batch:function(e,t){var n=this.get(e),r=0,i;for(i in n)n.hasOwnProperty(i)&&(r+=1,t(n[i],r));return n}}}(),window.ORCHESTRAL_REGISTRY=ORCHESTRAL.util.Registry,t.on(window,"unload",ORCHESTRAL.util.Registry.clear),ORCHESTRAL.util.Event={debounce:function(e,n){var r;return function(i){var s;n?s=n:s=i&&i.type==="submit"?3e3:1e3,r?(i&&t.stopEvent(i),clearTimeout(r)):e&&e.apply(this,arguments),r=setTimeout(function(){r=null},s)}},debounceEvent:function(e,n,r){t.on(e,n,ORCHESTRAL.util.Event.debounce(null,r))}}})(),YAHOO.register("orchestral",ORCHESTRAL,{version:"7.9",build:"0"});
/*!(C) ORCHESTRAL*/
YAHOO.namespace("ORCHESTRAL.util"),ORCHESTRAL.util.Dom=function(){"use strict";var e=YAHOO.util.Dom,t=1,n={TABLE:["<table>","</table>",1],TBODY:["<table><tbody>","</tbody></table>",2],THEAD:["<table><thead>","</thead></table>",2],TFOOT:["<table><tfoot>","</tfoot></table>",2],TR:["<table><tbody><tr>","</tr></tbody></table>",3],SELECT:["<select>","</select>",1]},r=/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/img,i=[],s=function(t){var n=t;while(n&&n.tagName!=="BODY")e.getStyle(n,"display")==="none"&&(i.push({element:n,visibility:YAHOO.util.Dom.getStyle(n,"visibility"),display:YAHOO.util.Dom.getStyle(n,"display")}),e.setStyle(n,"visibility","hidden"),e.setStyle(n,"display","block")),n=n.parentNode},o=function(){var t=i.pop();while(t)e.setStyle(t.element,"visibility",t.visibility),e.setStyle(t.element,"display",t.display),t=i.pop()},u=function(t){t=e.get(t);var n=t.childNodes.length,r;for(r=0;r<n;r+=1)ORCHESTRAL.util.Dom.remove(t.childNodes[0],!0)},a=function(t,n){t=t.replace(r,"");var i=document.createElement("div"),s=[],o=i,a,f;i.innerHTML=n?n[0]+t+n[1]:t;if(n)for(a=0;a<n[2];a+=1)o=e.getFirstChild(o);f=o.childNodes.length;for(a=0;a<f;a+=1)s[a]=o.childNodes[a];return u(i),i=null,s},f=function(r,i,s){r=e.get(r);var o=null,u=a(i,n[r.parentNode.tagName]),f,l=u.length,c;for(c=0;c<l;c+=1)f=u[c],s(f,r),!o&&f.nodeType===t&&(o=f);return o};return{getDimensions:function(t){t=e.get(t),s(t);var n=t.offsetWidth,r=t.offsetHeight;return o(),{width:n,height:r}},getHeight:function(e){return ORCHESTRAL.util.Dom.getDimensions(e).height},getWidth:function(e){return ORCHESTRAL.util.Dom.getDimensions(e).width},resizeTo:function(t,n,r){n&&(e.setStyle(t,"width",n+"px"),e.setStyle(t,"width",n+(n-ORCHESTRAL.util.Dom.getWidth(t))+"px")),r&&(e.setStyle(t,"height",r+"px"),e.setStyle(t,"height",r+(r-ORCHESTRAL.util.Dom.getHeight(t))+"px"))},remove:function(t,n){t=e.get(t);if(t)return t.parentNode.removeChild(t),n&&YAHOO.util.Event.purgeElement(t,!1),t;return},insertHtmlBefore:function(t,n){return f(t,n,e.insertBefore)},insertHtmlAfter:function(t,n){return f(t,n,e.insertAfter)},insertHtmlAsFirstChild:function(t,n){return ORCHESTRAL.util.Dom.insertHtmlBefore(e.getFirstChild(t),n)},insertHtmlAsLastChild:function(t,n){return ORCHESTRAL.util.Dom.insertHtmlAfter(e.getLastChild(t),n)},isElement:function(e){return typeof HTMLElement=="object"?e instanceof HTMLElement:YAHOO.lang.isObject(e)&&e.nodeType===t&&YAHOO.lang.isString(e.nodeName)},setInnerHtml:function(t,i){t=e.get(t);if(n[t.tagName]){u(t);var s=a(i,n[t.tagName]),o=s.length,f;for(f=0;f<o;f+=1)t.appendChild(s[f])}else t.innerHTML=i.replace(r,"");return e.getFirstChild(t)},setText:document.documentElement.textContent!==undefined?function(t,n){e.get(t).textContent=n}:function(t,n){e.get(t).innerText=n}}}(),YAHOO.register("orchestral-dom",ORCHESTRAL.util.Dom,{version:"7.9",build:"0"});
/*!(C) ORCHESTRAL*/
YAHOO.namespace("ORCHESTRAL.util"),ORCHESTRAL.util.Form=function(){var e=YAHOO.lang,t=YAHOO.util.Dom,n=YAHOO.util.Selector,r=function(e){return e.replace(/\r\n/g,"\r").replace(/\n/g,"\r")},i=function(t,n){return t=t||"",n=n||"",e.isArray(t)?t=t.join(","):e.isObject(t)&&(t=e.dump(t)),e.isArray(n)?n=n.join(","):e.isObject(n)&&(n=e.dump(n)),t==n},s=function(){return!0},o=function(e){var n=t.get(e),r=[];return r=r.concat(t.getElementsBy(s,"input",e)),r=r.concat(t.getElementsBy(s,"textarea",e)),r=r.concat(t.getElementsBy(s,"select",e)),r},u={input:function(e){var t=e.length?e[0].type:e.type;switch(t){case"checkbox":case"radio":return this.checkbox(e);default:return this.textarea(e)}},checkbox:function(e){var n=[];return t.batch(e,function(e){e.checked&&n.push(e.value?e.value:"on")}),this.returnArrayValue(n)},textarea:function(e){var n=[];return t.batch(e,function(e){(e.value||e.value==="")&&n.push(r(e.value))}),this.returnArrayValue(n)},select:function(e){var n=[];return t.batch(e,function(e){var t=e.options.length,r,i,s;for(r=0;r<t;r++)i=e.options[r],s=u.optionValue(i),i.selected&&s!==""&&n.push(s)}),this.returnArrayValue(n)},optionValue:function(e){return e.value?e.value:e.value===""?"":e.text},returnArrayValue:function(e){return e.length?e.length==1?e[0]:e:null}},a={input:function(e,t){var n=t.length?t[0].type:t.type;switch(n.toLowerCase()){case"checkbox":case"radio":this.checkbox(e,t);break;default:this.textarea(e,t)}},textarea:function(n,i){var s=e.isString(n.value)?[n.value]:n.value;t.batch(i,function(e){e.value=r(s.shift())})},checkbox:function(n,r){var i=e.isString(n.value)||e.isBoolean(n.value)?[n.value]:n.value;t.batch(r,function(e){!e.value||e.value=="on"?e.checked=ORCHESTRAL.lang.contains(!0,i)||ORCHESTRAL.lang.contains("on",i):e.checked=ORCHESTRAL.lang.contains(e.value,i)})},select:function(n,r){var i=e.isString(n.value)?[n.value]:n.value;t.batch(r,function(e){var t=e.options.length,n,r;for(n=0;n<t;n++)r=e.options[n],r.selected=ORCHESTRAL.lang.contains(u.optionValue(r),i)})}},f=function(e){return YAHOO.env.ua.ie>0?typeof e.length=="number"&&typeof e.item=="function"&&typeof e.nextNode=="function"&&typeof e.reset=="function":e instanceof NodeList};return{toQueryString:function(t){var n=[],r,i,s,o;for(r in t)if(t.hasOwnProperty(r)){i=t[r],e.isArray(i)||(i=[i]),o=i.length;for(s=0;s<o;s++)n.push(encodeURIComponent(r)+"="+encodeURIComponent(i[s]))}return n.join("&")},toParameters:function(t){var n=e.trim(t).match(/([^?#]*)(#.*)?$/);if(!n)return{};var r={},i=n[1].split("&"),s=i.length,o,u,a,f;for(o=0;o<s;o++)u=i[o].split("="),u[0]&&(a=decodeURIComponent(u[0]),f=u[1]?decodeURIComponent(u[1]):"",r[a]!==undefined?(e.isArray(r[a])||(r[a]=[r[a]]),f&&r[a].push(decodeURIComponent(f))):r[a]=decodeURIComponent(f));return r},fireEvents:function(e,n){t.batch(n,function(t){if(document.createEventObject)t.fireEvent("on"+e,document.createEventObject());else{var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}})},activate:function(e){e=t.get(e),e.length&&(e=e[0]);try{e.focus(),e.select&&!n.test(e,"input[type=button], input[type=reset], input[type=submit]")&&e.select()}catch(r){}},disable:function(n){var r,i;n=t.get(n),e.isArray(n)||(n=[n]),i=n.length;for(r=0;r<i;r++)n[r].blur(),n[r].disabled=!0},enable:function(n){var r,i;n=t.get(n),e.isArray(n)||(n=[n]),i=n.length;for(r=0;r<i;r++)n[r].disabled=!1},getValue:function(e){var n;return e=t.get(e),n=e.tagName?e.tagName.toLowerCase():e[0].tagName.toLowerCase(),u[n](e)},setValue:function(e,n){e=t.get(e);var r={name:e.tagName?e.tagName.toLowerCase():e[0].tagName.toLowerCase(),value:n||""},s=ORCHESTRAL.util.Form.getValue(e);a[r.name](r,e);var o=ORCHESTRAL.util.Form.getValue(e);i(s,o)||this.fireEvents("change",e)},isEmpty:function(t){if(e.isArray(t)||f(t))throw new Error("isEmpty must be passed a single element");var n=e.trim(ORCHESTRAL.util.Form.getValue(t));return n===null||n===""},isEmptyScope:function(e){var t=o(e),n=t.length,r;for(r=0;r<n;r++)if(!this.isEmpty(t[r]))return!1;return!0},deserialize:function(e,t){var n=o(e),r,s,u,f,l,c;for(r in t)s={name:r,value:t[r]||""},u=ORCHESTRAL.lang.filter(n,function(e){return e.name==s.name}),u.length>0&&(f=u[0].tagName.toLowerCase(),l=ORCHESTRAL.util.Form.getValue(u),a[f](s,u),c=ORCHESTRAL.util.Form.getValue(u),i(l,c)||this.fireEvents("change",u))},serialize:function(n){var r=o(n),i={};return t.batch(r,function(n){if(!n.disabled&&n.name){var r=n.name;n=t.get(n);var s=u[n.tagName.toLowerCase()](n);if(e.isValue(i[r])&&i[r]!==""&&e.isValue(s))e.isArray(i[r])||(i[r]=[i[r]]),i[r].push(s);else if(e.isUndefined(i[r])||!i[r])i[r]=s||""}}),i},clear:function(e){var n=o(e);t.batch(n,function(e){switch(e.type.toLowerCase()){case"checkbox":case"radio":e.checked=!1;break;default:e.tagName&&e.tagName.toLowerCase()==="select"?e.selectedIndex=0:e.value=""}})},isDirty:function(e){var t=o(e),n=t.length,i,s,a,f;for(i=0;i<n;i++){a=t[i];if(a.className.toLowerCase().indexOf("derived")!=-1)continue;switch(a.type.toLowerCase()){case"checkbox":case"radio":if(a.checked!=a.defaultChecked)return!0;break;case"select-one":case"select-multiple":for(s=0;s<a.options.length;s++){f=a.options[s];if(f.selected!=f.defaultSelected&&u.optionValue(f)!="")return!0}break;default:if(r(a.value)!=r(a.defaultValue))return!0}}return!1},clean:function(e){var t=o(e),n=t.length,r,i,s,u;for(r=0;r<n;r++){s=t[r];switch(s.type.toLowerCase()){case"checkbox":case"radio":s.defaultChecked=s.checked;break;case"select-one":case"select-multiple":for(i=0;i<s.options.length;i++)u=s.options[i],u.defaultSelected=u.selected;break;default:s.defaultValue=s.value}}}}}(),YAHOO.register("orchestral-form",ORCHESTRAL.util.Form,{version:"7.9",build:"0"});
