YUI.add('yui2-simpleeditor', function(Y) { Y.use('yui2-editor'); }, '3.8.0' ,{"requires": ["yui2-yahoo", "yui2-dom", "yui2-event", "yui2-element"], "optional": ["yui2-containercore", "yui2-dragdrop", "yui2-menu", "yui2-button", "yui2-animation"]});
YUI.add('yui2-editor', function(Y) {
    var YAHOO    = Y.YUI2;
    /*!
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 2.8.2r1
*/
(function(){var c=YAHOO.util.Dom,a=YAHOO.util.Event,d=YAHOO.lang;if(YAHOO.widget.Button){YAHOO.widget.ToolbarButtonAdvanced=YAHOO.widget.Button;YAHOO.widget.ToolbarButtonAdvanced.prototype.buttonType="rich";YAHOO.widget.ToolbarButtonAdvanced.prototype.checkValue=function(g){var f=this.getMenu().getItems();if(f.length===0){this.getMenu()._onBeforeShow();f=this.getMenu().getItems();}for(var e=0;e<f.length;e++){f[e].cfg.setProperty("checked",false);if(f[e].value==g){f[e].cfg.setProperty("checked",true);}}};}else{YAHOO.widget.ToolbarButtonAdvanced=function(){};}YAHOO.widget.ToolbarButton=function(f,e){if(d.isObject(arguments[0])&&!c.get(f).nodeType){e=f;}var h=(e||{});var g={element:null,attributes:h};if(!g.attributes.type){g.attributes.type="push";}g.element=document.createElement("span");g.element.setAttribute("unselectable","on");g.element.className="yui-button yui-"+g.attributes.type+"-button";g.element.innerHTML='<span class="first-child"><a href="#">LABEL</a></span>';g.element.firstChild.firstChild.tabIndex="-1";g.attributes.id=(g.attributes.id||c.generateId());g.element.id=g.attributes.id;YAHOO.widget.ToolbarButton.superclass.constructor.call(this,g.element,g.attributes);};YAHOO.extend(YAHOO.widget.ToolbarButton,YAHOO.util.Element,{buttonType:"normal",_handleMouseOver:function(){if(!this.get("disabled")){this.addClass("yui-button-hover");this.addClass("yui-"+this.get("type")+"-button-hover");}},_handleMouseOut:function(){this.removeClass("yui-button-hover");this.removeClass("yui-"+this.get("type")+"-button-hover");},checkValue:function(g){if(this.get("type")=="menu"){var f=this._button.options;for(var e=0;e<f.length;e++){if(f[e].value==g){f.selectedIndex=e;}}}},init:function(f,e){YAHOO.widget.ToolbarButton.superclass.init.call(this,f,e);this.on("mouseover",this._handleMouseOver,this,true);this.on("mouseout",this._handleMouseOut,this,true);this.on("click",function(g){a.stopEvent(g);return false;},this,true);},initAttributes:function(e){YAHOO.widget.ToolbarButton.superclass.initAttributes.call(this,e);this.setAttributeConfig("value",{value:e.value});this.setAttributeConfig("menu",{value:e.menu||false});this.setAttributeConfig("type",{value:e.type,writeOnce:true,method:function(j){var h,g;if(!this._button){this._button=this.get("element").getElementsByTagName("a")[0];}switch(j){case"select":case"menu":h=document.createElement("select");h.id=this.get("id");var k=this.get("menu");for(var f=0;f<k.length;f++){g=document.createElement("option");g.innerHTML=k[f].text;g.value=k[f].value;if(k[f].checked){g.selected=true;}h.appendChild(g);}this._button.parentNode.replaceChild(h,this._button);a.on(h,"change",this._handleSelect,this,true);this._button=h;break;}}});this.setAttributeConfig("disabled",{value:e.disabled||false,method:function(f){if(f){this.addClass("yui-button-disabled");this.addClass("yui-"+this.get("type")+"-button-disabled");}else{this.removeClass("yui-button-disabled");this.removeClass("yui-"+this.get("type")+"-button-disabled");}if((this.get("type")=="menu")||(this.get("type")=="select")){this._button.disabled=f;}}});this.setAttributeConfig("label",{value:e.label,method:function(f){if(!this._button){this._button=this.get("element").getElementsByTagName("a")[0];}if(this.get("type")=="push"){this._button.innerHTML=f;}}});this.setAttributeConfig("title",{value:e.title});this.setAttributeConfig("container",{value:null,writeOnce:true,method:function(f){this.appendTo(f);}});},_handleSelect:function(f){var e=a.getTarget(f);var g=e.options[e.selectedIndex].value;this.fireEvent("change",{type:"change",value:g});},getMenu:function(){return this.get("menu");},destroy:function(){a.purgeElement(this.get("element"),true);this.get("element").parentNode.removeChild(this.get("element"));for(var e in this){if(d.hasOwnProperty(this,e)){this[e]=null;}}},fireEvent:function(f,e){if(this.DOM_EVENTS[f]&&this.get("disabled")){a.stopEvent(e);return;}YAHOO.widget.ToolbarButton.superclass.fireEvent.call(this,f,e);},toString:function(){return"ToolbarButton ("+this.get("id")+")";}});})();(function(){var d=YAHOO.util.Dom,a=YAHOO.util.Event,e=YAHOO.lang;var c=function(g){var f=g;if(e.isString(g)){f=this.getButtonById(g);}if(e.isNumber(g)){f=this.getButtonByIndex(g);}if((!(f instanceof YAHOO.widget.ToolbarButton))&&(!(f instanceof YAHOO.widget.ToolbarButtonAdvanced))){f=this.getButtonByValue(g);}if((f instanceof YAHOO.widget.ToolbarButton)||(f instanceof YAHOO.widget.ToolbarButtonAdvanced)){return f;}return false;};YAHOO.widget.Toolbar=function(j,i){if(e.isObject(arguments[0])&&!d.get(j).nodeType){i=j;}var l={};if(i){e.augmentObject(l,i);}var k={element:null,attributes:l};if(e.isString(j)&&d.get(j)){k.element=d.get(j);}else{if(e.isObject(j)&&d.get(j)&&d.get(j).nodeType){k.element=d.get(j);}}if(!k.element){k.element=document.createElement("DIV");k.element.id=d.generateId();if(l.container&&d.get(l.container)){d.get(l.container).appendChild(k.element);}}if(!k.element.id){k.element.id=((e.isString(j))?j:d.generateId());}var g=document.createElement("fieldset");var h=document.createElement("legend");h.innerHTML="Toolbar";g.appendChild(h);var f=document.createElement("DIV");k.attributes.cont=f;d.addClass(f,"yui-toolbar-subcont");g.appendChild(f);k.element.appendChild(g);k.element.tabIndex=-1;k.attributes.element=k.element;k.attributes.id=k.element.id;this._configuredButtons=[];YAHOO.widget.Toolbar.superclass.constructor.call(this,k.element,k.attributes);};YAHOO.extend(YAHOO.widget.Toolbar,YAHOO.util.Element,{_configuredButtons:null,_addMenuClasses:function(j,f,k){d.addClass(this.element,"yui-toolbar-"+k.get("value")+"-menu");if(d.hasClass(k._button.parentNode.parentNode,"yui-toolbar-select")){d.addClass(this.element,"yui-toolbar-select-menu");}var g=this.getItems();for(var h=0;h<g.length;h++){d.addClass(g[h].element,"yui-toolbar-"+k.get("value")+"-"+((g[h].value)?g[h].value.replace(/ /g,"-").toLowerCase():g[h]._oText.nodeValue.replace(/ /g,"-").toLowerCase()));d.addClass(g[h].element,"yui-toolbar-"+k.get("value")+"-"+((g[h].value)?g[h].value.replace(/ /g,"-"):g[h]._oText.nodeValue.replace(/ /g,"-")));}},buttonType:YAHOO.widget.ToolbarButton,dd:null,_colorData:{"#111111":"Obsidian","#2D2D2D":"Dark Gray","#434343":"Shale","#5B5B5B":"Flint","#737373":"Gray","#8B8B8B":"Concrete","#A2A2A2":"Gray","#B9B9B9":"Titanium","#000000":"Black","#D0D0D0":"Light Gray","#E6E6E6":"Silver","#FFFFFF":"White","#BFBF00":"Pumpkin","#FFFF00":"Yellow","#FFFF40":"Banana","#FFFF80":"Pale Yellow","#FFFFBF":"Butter","#525330":"Raw Siena","#898A49":"Mildew","#AEA945":"Olive","#7F7F00":"Paprika","#C3BE71":"Earth","#E0DCAA":"Khaki","#FCFAE1":"Cream","#60BF00":"Cactus","#80FF00":"Chartreuse","#A0FF40":"Green","#C0FF80":"Pale Lime","#DFFFBF":"Light Mint","#3B5738":"Green","#668F5A":"Lime Gray","#7F9757":"Yellow","#407F00":"Clover","#8A9B55":"Pistachio","#B7C296":"Light Jade","#E6EBD5":"Breakwater","#00BF00":"Spring Frost","#00FF80":"Pastel Green","#40FFA0":"Light Emerald","#80FFC0":"Sea Foam","#BFFFDF":"Sea Mist","#033D21":"Dark Forrest","#438059":"Moss","#7FA37C":"Medium Green","#007F40":"Pine","#8DAE94":"Yellow Gray Green","#ACC6B5":"Aqua Lung","#DDEBE2":"Sea Vapor","#00BFBF":"Fog","#00FFFF":"Cyan","#40FFFF":"Turquoise Blue","#80FFFF":"Light Aqua","#BFFFFF":"Pale Cyan","#033D3D":"Dark Teal","#347D7E":"Gray Turquoise","#609A9F":"Green Blue","#007F7F":"Seaweed","#96BDC4":"Green Gray","#B5D1D7":"Soapstone","#E2F1F4":"Light Turquoise","#0060BF":"Summer Sky","#0080FF":"Sky Blue","#40A0FF":"Electric Blue","#80C0FF":"Light Azure","#BFDFFF":"Ice Blue","#1B2C48":"Navy","#385376":"Biscay","#57708F":"Dusty Blue","#00407F":"Sea Blue","#7792AC":"Sky Blue Gray","#A8BED1":"Morning Sky","#DEEBF6":"Vapor","#0000BF":"Deep Blue","#0000FF":"Blue","#4040FF":"Cerulean Blue","#8080FF":"Evening Blue","#BFBFFF":"Light Blue","#212143":"Deep Indigo","#373E68":"Sea Blue","#444F75":"Night Blue","#00007F":"Indigo Blue","#585E82":"Dockside","#8687A4":"Blue Gray","#D2D1E1":"Light Blue Gray","#6000BF":"Neon Violet","#8000FF":"Blue Violet","#A040FF":"Violet Purple","#C080FF":"Violet Dusk","#DFBFFF":"Pale Lavender","#302449":"Cool Shale","#54466F":"Dark Indigo","#655A7F":"Dark Violet","#40007F":"Violet","#726284":"Smoky Violet","#9E8FA9":"Slate Gray","#DCD1DF":"Violet White","#BF00BF":"Royal Violet","#FF00FF":"Fuchsia","#FF40FF":"Magenta","#FF80FF":"Orchid","#FFBFFF":"Pale Magenta","#4A234A":"Dark Purple","#794A72":"Medium Purple","#936386":"Cool Granite","#7F007F":"Purple","#9D7292":"Purple Moon","#C0A0B6":"Pale Purple","#ECDAE5":"Pink Cloud","#BF005F":"Hot Pink","#FF007F":"Deep Pink","#FF409F":"Grape","#FF80BF":"Electric Pink","#FFBFDF":"Pink","#451528":"Purple Red","#823857":"Purple Dino","#A94A76":"Purple Gray","#7F003F":"Rose","#BC6F95":"Antique Mauve","#D8A5BB":"Cool Marble","#F7DDE9":"Pink Granite","#C00000":"Apple","#FF0000":"Fire Truck","#FF4040":"Pale Red","#FF8080":"Salmon","#FFC0C0":"Warm Pink","#441415":"Sepia","#82393C":"Rust","#AA4D4E":"Brick","#800000":"Brick Red","#BC6E6E":"Mauve","#D8A3A4":"Shrimp Pink","#F8DDDD":"Shell Pink","#BF5F00":"Dark Orange","#FF7F00":"Orange","#FF9F40":"Grapefruit","#FFBF80":"Canteloupe","#FFDFBF":"Wax","#482C1B":"Dark Brick","#855A40":"Dirt","#B27C51":"Tan","#7F3F00":"Nutmeg","#C49B71":"Mustard","#E1C4A8":"Pale Tan","#FDEEE0":"Marble"},_colorPicker:null,STR_COLLAPSE:"Collapse Toolbar",STR_EXPAND:"Expand Toolbar",STR_SPIN_LABEL:"Spin Button with value {VALUE}. Use Control Shift Up Arrow and Control Shift Down arrow keys to increase or decrease the value.",STR_SPIN_UP:"Click to increase the value of this input",STR_SPIN_DOWN:"Click to decrease the value of this input",_titlebar:null,browser:YAHOO.env.ua,_buttonList:null,_buttonGroupList:null,_sep:null,_sepCount:null,_dragHandle:null,_toolbarConfigs:{renderer:true},CLASS_CONTAINER:"yui-toolbar-container",CLASS_DRAGHANDLE:"yui-toolbar-draghandle",CLASS_SEPARATOR:"yui-toolbar-separator",CLASS_DISABLED:"yui-toolbar-disabled",CLASS_PREFIX:"yui-toolbar",init:function(g,f){YAHOO.widget.Toolbar.superclass.init.call(this,g,f);},initAttributes:function(f){YAHOO.widget.Toolbar.superclass.initAttributes.call(this,f);this.addClass(this.CLASS_CONTAINER);this.setAttributeConfig("buttonType",{value:f.buttonType||"basic",writeOnce:true,validator:function(g){switch(g){case"advanced":case"basic":return true;}return false;},method:function(g){if(g=="advanced"){if(YAHOO.widget.Button){this.buttonType=YAHOO.widget.ToolbarButtonAdvanced;}else{this.buttonType=YAHOO.widget.ToolbarButton;}}else{this.buttonType=YAHOO.widget.ToolbarButton;}}});this.setAttributeConfig("buttons",{value:[],writeOnce:true,method:function(m){var k,j,l,h,g;for(k in m){if(e.hasOwnProperty(m,k)){if(m[k].type=="separator"){this.addSeparator();}else{if(m[k].group!==undefined){l=this.addButtonGroup(m[k]);if(l){h=l.length;for(g=0;g<h;g++){if(l[g]){this._configuredButtons[this._configuredButtons.length]=l[g].id;}}}}else{j=this.addButton(m[k]);if(j){this._configuredButtons[this._configuredButtons.length]=j.id;}}}}}}});this.setAttributeConfig("disabled",{value:false,method:function(g){if(this.get("disabled")===g){return false;}if(g){this.addClass(this.CLASS_DISABLED);this.set("draggable",false);this.disableAllButtons();}else{this.removeClass(this.CLASS_DISABLED);if(this._configs.draggable._initialConfig.value){this.set("draggable",true);}this.resetAllButtons();}}});this.setAttributeConfig("cont",{value:f.cont,readOnly:true});this.setAttributeConfig("grouplabels",{value:((f.grouplabels===false)?false:true),method:function(g){if(g){d.removeClass(this.get("cont"),(this.CLASS_PREFIX+"-nogrouplabels"));}else{d.addClass(this.get("cont"),(this.CLASS_PREFIX+"-nogrouplabels"));}}});this.setAttributeConfig("titlebar",{value:false,method:function(h){if(h){if(this._titlebar&&this._titlebar.parentNode){this._titlebar.parentNode.removeChild(this._titlebar);}this._titlebar=document.createElement("DIV");this._titlebar.tabIndex="-1";a.on(this._titlebar,"focus",function(){this._handleFocus();},this,true);d.addClass(this._titlebar,this.CLASS_PREFIX+"-titlebar");if(e.isString(h)){var g=document.createElement("h2");g.tabIndex="-1";g.innerHTML='<a href="#" tabIndex="0">'+h+"</a>";this._titlebar.appendChild(g);a.on(g.firstChild,"click",function(i){a.stopEvent(i);});a.on([g,g.firstChild],"focus",function(){this._handleFocus();},this,true);}if(this.get("firstChild")){this.insertBefore(this._titlebar,this.get("firstChild"));}else{this.appendChild(this._titlebar);}if(this.get("collapse")){this.set("collapse",true);}}else{if(this._titlebar){if(this._titlebar&&this._titlebar.parentNode){this._titlebar.parentNode.removeChild(this._titlebar);}}}}});this.setAttributeConfig("collapse",{value:false,method:function(i){if(this._titlebar){var h=null;var g=d.getElementsByClassName("collapse","span",this._titlebar);if(i){if(g.length>0){return true;}h=document.createElement("SPAN");h.innerHTML="X";h.title=this.STR_COLLAPSE;d.addClass(h,"collapse");this._titlebar.appendChild(h);a.addListener(h,"click",function(){if(d.hasClass(this.get("cont").parentNode,"yui-toolbar-container-collapsed")){this.collapse(false);}else{this.collapse();}},this,true);}else{h=d.getElementsByClassName("collapse","span",this._titlebar);if(h[0]){if(d.hasClass(this.get("cont").parentNode,"yui-toolbar-container-collapsed")){this.collapse(false);}h[0].parentNode.removeChild(h[0]);}}}}});this.setAttributeConfig("draggable",{value:(f.draggable||false),method:function(g){if(g&&!this.get("titlebar")){if(!this._dragHandle){this._dragHandle=document.createElement("SPAN");this._dragHandle.innerHTML="|";this._dragHandle.setAttribute("title","Click to drag the toolbar");this._dragHandle.id=this.get("id")+"_draghandle";d.addClass(this._dragHandle,this.CLASS_DRAGHANDLE);if(this.get("cont").hasChildNodes()){this.get("cont").insertBefore(this._dragHandle,this.get("cont").firstChild);}else{this.get("cont").appendChild(this._dragHandle);}this.dd=new YAHOO.util.DD(this.get("id"));this.dd.setHandleElId(this._dragHandle.id);}}else{if(this._dragHandle){this._dragHandle.parentNode.removeChild(this._dragHandle);this._dragHandle=null;this.dd=null;}}if(this._titlebar){if(g){this.dd=new YAHOO.util.DD(this.get("id"));this.dd.setHandleElId(this._titlebar);d.addClass(this._titlebar,"draggable");}else{d.removeClass(this._titlebar,"draggable");if(this.dd){this.dd.unreg();this.dd=null;}}}},validator:function(h){var g=true;if(!YAHOO.util.DD){g=false;}return g;}});},addButtonGroup:function(l){if(!this.get("element")){this._queue[this._queue.length]=["addButtonGroup",arguments];return false;}if(!this.hasClass(this.CLASS_PREFIX+"-grouped")){this.addClass(this.CLASS_PREFIX+"-grouped");}var n=document.createElement("DIV");d.addClass(n,this.CLASS_PREFIX+"-group");d.addClass(n,this.CLASS_PREFIX+"-group-"+l.group);if(l.label){var g=document.createElement("h3");g.innerHTML=l.label;n.appendChild(g);}if(!this.get("grouplabels")){d.addClass(this.get("cont"),this.CLASS_PREFIX,"-nogrouplabels");}this.get("cont").appendChild(n);var k=document.createElement("ul");n.appendChild(k);if(!this._buttonGroupList){this._buttonGroupList={};}this._buttonGroupList[l.group]=k;var m=[],j;for(var h=0;h<l.buttons.length;h++){var f=document.createElement("li");f.className=this.CLASS_PREFIX+"-groupitem";k.appendChild(f);if((l.buttons[h].type!==undefined)&&l.buttons[h].type=="separator"){this.addSeparator(f);}else{l.buttons[h].container=f;j=this.addButton(l.buttons[h]);if(j){m[m.length]=j.id;}}}return m;},addButtonToGroup:function(h,i,j){var g=this._buttonGroupList[i],f=document.createElement("li");f.className=this.CLASS_PREFIX+"-groupitem";h.container=f;this.addButton(h,j);g.appendChild(f);},addButton:function(l,k){if(!this.get("element")){this._queue[this._queue.length]=["addButton",arguments];return false;}if(!this._buttonList){this._buttonList=[];}if(!l.container){l.container=this.get("cont");}if((l.type=="menu")||(l.type=="split")||(l.type=="select")){if(e.isArray(l.menu)){for(var t in l.menu){if(e.hasOwnProperty(l.menu,t)){var z={fn:function(o,i,m){if(!l.menucmd){l.menucmd=l.value;}l.value=((m.value)?m.value:m._oText.nodeValue);},scope:this};l.menu[t].onclick=z;}}}}var u={},r=false;for(var p in l){if(e.hasOwnProperty(l,p)){if(!this._toolbarConfigs[p]){u[p]=l[p];}}}if(l.type=="select"){u.type="menu";}if(l.type=="spin"){u.type="push";}if(u.type=="color"){if(YAHOO.widget.Overlay){u=this._makeColorButton(u);}else{r=true;}}if(u.menu){if((YAHOO.widget.Overlay)&&(l.menu instanceof YAHOO.widget.Overlay)){l.menu.showEvent.subscribe(function(){this._button=u;});}else{for(var s=0;s<u.menu.length;s++){if(!u.menu[s].value){u.menu[s].value=u.menu[s].text;}}if(this.browser.webkit){u.focusmenu=false;}}}if(r){l=false;}else{this._configs.buttons.value[this._configs.buttons.value.length]=l;var x=new this.buttonType(u);x.get("element").tabIndex="-1";x.get("element").setAttribute("role","button");x._selected=true;if(this.get("disabled")){x.set("disabled",true);}if(!l.id){l.id=x.get("id");}if(k){var g=x.get("element");var q=null;if(k.get){q=k.get("element").nextSibling;}else{if(k.nextSibling){q=k.nextSibling;}}if(q){q.parentNode.insertBefore(g,q);}}x.addClass(this.CLASS_PREFIX+"-"+x.get("value"));var w=document.createElement("span");w.className=this.CLASS_PREFIX+"-icon";x.get("element").insertBefore(w,x.get("firstChild"));if(x._button.tagName.toLowerCase()=="button"){x.get("element").setAttribute("unselectable","on");var y=document.createElement("a");y.innerHTML=x._button.innerHTML;y.href="#";y.tabIndex="-1";a.on(y,"click",function(i){a.stopEvent(i);});x._button.parentNode.replaceChild(y,x._button);x._button=y;}if(l.type=="select"){if(x._button.tagName.toLowerCase()=="select"){w.parentNode.removeChild(w);var h=x._button,v=x.get("element");v.parentNode.replaceChild(h,v);x._configs.element.value=h;}else{x.addClass(this.CLASS_PREFIX+"-select");}}if(l.type=="spin"){if(!e.isArray(l.range)){l.range=[10,100];}this._makeSpinButton(x,l);}x.get("element").setAttribute("title",x.get("label"));if(l.type!="spin"){if((YAHOO.widget.Overlay)&&(u.menu instanceof YAHOO.widget.Overlay)){var j=function(o){var i=true;if(o.keyCode&&(o.keyCode==9)){i=false;}if(i){if(this._colorPicker){this._colorPicker._button=l.value;}var m=x.getMenu().element;if(d.getStyle(m,"visibility")=="hidden"){x.getMenu().show();}else{x.getMenu().hide();}}YAHOO.util.Event.stopEvent(o);};x.on("mousedown",j,l,this);x.on("keydown",j,l,this);}else{if((l.type!="menu")&&(l.type!="select")){x.on("keypress",this._buttonClick,l,this);x.on("mousedown",function(i){YAHOO.util.Event.stopEvent(i);this._buttonClick(i,l);},l,this);x.on("click",function(i){YAHOO.util.Event.stopEvent(i);});}else{x.on("mousedown",function(i){YAHOO.util.Event.stopEvent(i);});x.on("click",function(i){YAHOO.util.Event.stopEvent(i);});x.on("change",function(i){if(!i.target){if(!l.menucmd){l.menucmd=l.value;}l.value=i.value;this._buttonClick(i,l);}},this,true);var n=this;x.on("appendTo",function(){var i=this;if(i.getMenu()&&i.getMenu().mouseDownEvent){i.getMenu().mouseDownEvent.subscribe(function(A,o){var m=o[1];YAHOO.util.Event.stopEvent(o[0]);i._onMenuClick(o[0],i);if(!l.menucmd){l.menucmd=l.value;}l.value=((m.value)?m.value:m._oText.nodeValue);n._buttonClick.call(n,o[1],l);i._hideMenu();return false;});i.getMenu().clickEvent.subscribe(function(o,m){YAHOO.util.Event.stopEvent(m[0]);});i.getMenu().mouseUpEvent.subscribe(function(o,m){YAHOO.util.Event.stopEvent(m[0]);});}});}}}else{x.on("mousedown",function(i){YAHOO.util.Event.stopEvent(i);});x.on("click",function(i){YAHOO.util.Event.stopEvent(i);});}if(this.browser.ie){}if(this.browser.webkit){x.hasFocus=function(){return true;};}this._buttonList[this._buttonList.length]=x;if((l.type=="menu")||(l.type=="split")||(l.type=="select")){if(e.isArray(l.menu)){var f=x.getMenu();if(f&&f.renderEvent){f.renderEvent.subscribe(this._addMenuClasses,x);if(l.renderer){f.renderEvent.subscribe(l.renderer,x);}}}}}return l;},addSeparator:function(f,i){if(!this.get("element")){this._queue[this._queue.length]=["addSeparator",arguments];return false;}var g=((f)?f:this.get("cont"));if(!this.get("element")){this._queue[this._queue.length]=["addSeparator",arguments];return false;}if(this._sepCount===null){this._sepCount=0;}if(!this._sep){this._sep=document.createElement("SPAN");d.addClass(this._sep,this.CLASS_SEPARATOR);this._sep.innerHTML="|";}var h=this._sep.cloneNode(true);this._sepCount++;d.addClass(h,this.CLASS_SEPARATOR+"-"+this._sepCount);if(i){var j=null;if(i.get){j=i.get("element").nextSibling;}else{if(i.nextSibling){j=i.nextSibling;}else{j=i;}}if(j){if(j==i){j.parentNode.appendChild(h);}else{j.parentNode.insertBefore(h,j);}}}else{g.appendChild(h);}return h;},_createColorPicker:function(j){if(d.get(j+"_colors")){d.get(j+"_colors").parentNode.removeChild(d.get(j+"_colors"));}var f=document.createElement("div");f.className="yui-toolbar-colors";f.id=j+"_colors";f.style.display="none";a.on(window,"load",function(){document.body.appendChild(f);},this,true);this._colorPicker=f;var h="";for(var g in this._colorData){if(e.hasOwnProperty(this._colorData,g)){h+='<a style="background-color: '+g+'" href="#">'+g.replace("#","")+"</a>";}}h+="<span><em>X</em><strong></strong></span>";window.setTimeout(function(){f.innerHTML=h;},0);a.on(f,"mouseover",function(n){var l=this._colorPicker;var m=l.getElementsByTagName("em")[0];var k=l.getElementsByTagName("strong")[0];var i=a.getTarget(n);if(i.tagName.toLowerCase()=="a"){m.style.backgroundColor=i.style.backgroundColor;k.innerHTML=this._colorData["#"+i.innerHTML]+"<br>"+i.innerHTML;}},this,true);a.on(f,"focus",function(i){a.stopEvent(i);});a.on(f,"click",function(i){a.stopEvent(i);});a.on(f,"mousedown",function(k){a.stopEvent(k);var i=a.getTarget(k);if(i.tagName.toLowerCase()=="a"){var m=this.fireEvent("colorPickerClicked",{type:"colorPickerClicked",target:this,button:this._colorPicker._button,color:i.innerHTML,colorName:this._colorData["#"+i.innerHTML]});if(m!==false){var l={color:i.innerHTML,colorName:this._colorData["#"+i.innerHTML],value:this._colorPicker._button};this.fireEvent("buttonClick",{type:"buttonClick",target:this.get("element"),button:l});}this.getButtonByValue(this._colorPicker._button).getMenu().hide();}},this,true);},_resetColorPicker:function(){var g=this._colorPicker.getElementsByTagName("em")[0];var f=this._colorPicker.getElementsByTagName("strong")[0];g.style.backgroundColor="transparent";f.innerHTML="";},_makeColorButton:function(f){if(!this._colorPicker){this._createColorPicker(this.get("id"));}f.type="color";f.menu=new YAHOO.widget.Overlay(this.get("id")+"_"+f.value+"_menu",{visible:false,position:"absolute",iframe:true});f.menu.setBody("");f.menu.render(this.get("cont"));d.addClass(f.menu.element,"yui-button-menu");d.addClass(f.menu.element,"yui-color-button-menu");f.menu.beforeShowEvent.subscribe(function(){f.menu.cfg.setProperty("zindex",5);f.menu.cfg.setProperty("context",[this.getButtonById(f.id).get("element"),"tl","bl"]);this._resetColorPicker();var g=this._colorPicker;if(g.parentNode){g.parentNode.removeChild(g);}f.menu.setBody("");f.menu.appendToBody(g);this._colorPicker.style.display="block";},this,true);return f;},_makeSpinButton:function(s,m){s.addClass(this.CLASS_PREFIX+"-spinbutton");var t=this,o=s._button.parentNode.parentNode,j=m.range,i=document.createElement("a"),h=document.createElement("a");i.href="#";h.href="#";i.tabIndex="-1";h.tabIndex="-1";i.className="up";i.title=this.STR_SPIN_UP;i.innerHTML=this.STR_SPIN_UP;h.className="down";h.title=this.STR_SPIN_DOWN;h.innerHTML=this.STR_SPIN_DOWN;o.appendChild(i);o.appendChild(h);var n=YAHOO.lang.substitute(this.STR_SPIN_LABEL,{VALUE:s.get("label")});s.set("title",n);var r=function(u){u=((u<j[0])?j[0]:u);u=((u>j[1])?j[1]:u);return u;};var q=this.browser;var g=false;var l=this.STR_SPIN_LABEL;if(this._titlebar&&this._titlebar.firstChild){g=this._titlebar.firstChild;}var f=function(v){YAHOO.util.Event.stopEvent(v);if(!s.get("disabled")&&(v.keyCode!=9)){var w=parseInt(s.get("label"),10);w++;w=r(w);s.set("label",""+w);var u=YAHOO.lang.substitute(l,{VALUE:s.get("label")});s.set("title",u);if(!q.webkit&&g){}t._buttonClick(v,m);}};var p=function(v){YAHOO.util.Event.stopEvent(v);if(!s.get("disabled")&&(v.keyCode!=9)){var w=parseInt(s.get("label"),10);w--;w=r(w);s.set("label",""+w);var u=YAHOO.lang.substitute(l,{VALUE:s.get("label")});s.set("title",u);if(!q.webkit&&g){}t._buttonClick(v,m);}};var k=function(u){if(u.keyCode==38){f(u);}else{if(u.keyCode==40){p(u);}else{if(u.keyCode==107&&u.shiftKey){f(u);}else{if(u.keyCode==109&&u.shiftKey){p(u);}}}}};s.on("keydown",k,this,true);a.on(i,"mousedown",function(u){a.stopEvent(u);},this,true);a.on(h,"mousedown",function(u){a.stopEvent(u);},this,true);a.on(i,"click",f,this,true);a.on(h,"click",p,this,true);},_buttonClick:function(o,g){var f=true;if(o&&o.type=="keypress"){if(o.keyCode==9){f=false;}else{if((o.keyCode===13)||(o.keyCode===0)||(o.keyCode===32)){}else{f=false;}}}if(f){var q=true,j=false;g.isSelected=this.isSelected(g.id);if(g.value){j=this.fireEvent(g.value+"Click",{type:g.value+"Click",target:this.get("element"),button:g});if(j===false){q=false;}}if(g.menucmd&&q){j=this.fireEvent(g.menucmd+"Click",{type:g.menucmd+"Click",target:this.get("element"),button:g});if(j===false){q=false;}}if(q){this.fireEvent("buttonClick",{type:"buttonClick",target:this.get("element"),button:g});}if(g.type=="select"){var n=this.getButtonById(g.id);if(n.buttonType=="rich"){var l=g.value;for(var k=0;k<g.menu.length;k++){if(g.menu[k].value==g.value){l=g.menu[k].text;break;}}n.set("label",'<span class="yui-toolbar-'+g.menucmd+"-"+(g.value).replace(/ /g,"-").toLowerCase()+'">'+l+"</span>");var p=n.getMenu().getItems();for(var h=0;h<p.length;h++){if(p[h].value.toLowerCase()==g.value.toLowerCase()){p[h].cfg.setProperty("checked",true);}else{p[h].cfg.setProperty("checked",false);}}}}if(o){a.stopEvent(o);}}},_keyNav:null,_navCounter:null,_navigateButtons:function(g){switch(g.keyCode){case 37:case 39:if(g.keyCode==37){this._navCounter--;}else{this._navCounter++;}if(this._navCounter>(this._buttonList.length-1)){this._navCounter=0;}if(this._navCounter<0){this._navCounter=(this._buttonList.length-1);}if(this._buttonList[this._navCounter]){var f=this._buttonList[this._navCounter].get("element");if(this.browser.ie){f=this._buttonList[this._navCounter].get("element").getElementsByTagName("a")[0];}if(this._buttonList[this._navCounter].get("disabled")){this._navigateButtons(g);}else{f.focus();}}break;}},_handleFocus:function(){if(!this._keyNav){var f="keypress";if(this.browser.ie){f="keydown";}a.on(this.get("element"),f,this._navigateButtons,this,true);this._keyNav=true;this._navCounter=-1;}},getButtonById:function(h){var f=this._buttonList.length;for(var g=0;g<f;g++){if(this._buttonList[g]&&this._buttonList[g].get("id")==h){return this._buttonList[g];}}return false;},getButtonByValue:function(o){var k=this.get("buttons");if(!k){return false;}var g=k.length;for(var l=0;l<g;l++){if(k[l].group!==undefined){for(var f=0;f<k[l].buttons.length;f++){if((k[l].buttons[f].value==o)||(k[l].buttons[f].menucmd==o)){return this.getButtonById(k[l].buttons[f].id);}if(k[l].buttons[f].menu){for(var n=0;n<k[l].buttons[f].menu.length;n++){if(k[l].buttons[f].menu[n].value==o){return this.getButtonById(k[l].buttons[f].id);}}}}}else{if((k[l].value==o)||(k[l].menucmd==o)){return this.getButtonById(k[l].id);}if(k[l].menu){for(var h=0;h<k[l].menu.length;h++){if(k[l].menu[h].value==o){return this.getButtonById(k[l].id);}}}}}return false;},getButtonByIndex:function(f){if(this._buttonList[f]){return this._buttonList[f];}else{return false;}},getButtons:function(){return this._buttonList;},disableButton:function(g){var f=c.call(this,g);if(f){f.set("disabled",true);}else{return false;}},enableButton:function(g){if(this.get("disabled")){return false;}var f=c.call(this,g);if(f){if(f.get("disabled")){f.set("disabled",false);}}else{return false;}},isSelected:function(g){var f=c.call(this,g);if(f){return f._selected;}return false;},selectButton:function(j,h){var g=c.call(this,j);if(g){g.addClass("yui-button-selected");g.addClass("yui-button-"+g.get("value")+"-selected");g._selected=true;if(h){if(g.buttonType=="rich"){var i=g.getMenu().getItems();for(var f=0;f<i.length;f++){if(i[f].value==h){i[f].cfg.setProperty("checked",true);g.set("label",'<span class="yui-toolbar-'+g.get("value")+"-"+(h).replace(/ /g,"-").toLowerCase()+'">'+i[f]._oText.nodeValue+"</span>");}else{i[f].cfg.setProperty("checked",false);}}}}}else{return false;}},deselectButton:function(g){var f=c.call(this,g);if(f){f.removeClass("yui-button-selected");f.removeClass("yui-button-"+f.get("value")+"-selected");f.removeClass("yui-button-hover");f._selected=false;}else{return false;}},deselectAllButtons:function(){var f=this._buttonList.length;for(var g=0;g<f;g++){this.deselectButton(this._buttonList[g]);}},disableAllButtons:function(){if(this.get("disabled")){return false;}var f=this._buttonList.length;for(var g=0;g<f;g++){this.disableButton(this._buttonList[g]);}},enableAllButtons:function(){if(this.get("disabled")){return false;}var f=this._buttonList.length;for(var g=0;g<f;g++){this.enableButton(this._buttonList[g]);}},resetAllButtons:function(k){if(!e.isObject(k)){k={};}if(this.get("disabled")||!this._buttonList){return false;}var f=this._buttonList.length;for(var g=0;g<f;g++){var j=this._buttonList[g];if(j){var h=j._configs.disabled._initialConfig.value;if(k[j.get("id")]){this.enableButton(j);this.selectButton(j);}else{if(h){this.disableButton(j);}else{this.enableButton(j);}this.deselectButton(j);}}}},destroyButton:function(l){var j=c.call(this,l);if(j){var k=j.get("id"),g=[],h=0,f=this._buttonList.length;j.destroy();for(h=0;h<f;h++){if(this._buttonList[h].get("id")!=k){g[g.length]=this._buttonList[h];}}this._buttonList=g;}else{return false;}},destroy:function(){var f=this._configuredButtons.length,g,h;for(b=0;b<f;b++){this.destroyButton(this._configuredButtons[b]);}this._configuredButtons=null;this.get("element").innerHTML="";this.get("element").className="";for(h in this){if(e.hasOwnProperty(this,h)){this[h]=null;}}return true;},collapse:function(g){var f=d.getElementsByClassName("collapse","span",this._titlebar);if(g===false){d.removeClass(this.get("cont").parentNode,"yui-toolbar-container-collapsed");if(f[0]){d.removeClass(f[0],"collapsed");f[0].title=this.STR_COLLAPSE;}this.fireEvent("toolbarExpanded",{type:"toolbarExpanded",target:this});}else{if(f[0]){d.addClass(f[0],"collapsed");f[0].title=this.STR_EXPAND;}d.addClass(this.get("cont").parentNode,"yui-toolbar-container-collapsed");this.fireEvent("toolbarCollapsed",{type:"toolbarCollapsed",target:this});}},toString:function(){return"Toolbar (#"+this.get("element").id+") with "+this._buttonList.length+" buttons.";}});})();(function(){var f=YAHOO.util.Dom,a=YAHOO.util.Event,g=YAHOO.lang,e=YAHOO.widget.Toolbar;function d(){var j=navigator&&navigator.userAgent,k=0,i=0,h=j.match(/Trident\/.*rv:([^\s\)]*)/);if(h&&h[1]){i=parseFloat(h[1].replace(/\./g,function(){return(k++==1)?"":".";}));}return i;}var c=d();YAHOO.widget.SimpleEditor=function(k,q){var j={};if(g.isObject(k)&&(!k.tagName)&&!q){g.augmentObject(j,k);k=document.createElement("textarea");this.DOMReady=true;if(j.container){var n=f.get(j.container);n.appendChild(k);}else{document.body.appendChild(k);}}else{if(q){g.augmentObject(j,q);}}var l={element:null,attributes:j},i=null;if(g.isString(k)){i=k;}else{if(l.attributes.id){i=l.attributes.id;}else{this.DOMReady=true;i=f.generateId(k);}}l.element=k;var m=document.createElement("DIV");l.attributes.element_cont=new YAHOO.util.Element(m,{id:i+"_container"});var h=document.createElement("div");f.addClass(h,"first-child");l.attributes.element_cont.appendChild(h);if(!l.attributes.toolbar_cont){l.attributes.toolbar_cont=document.createElement("DIV");l.attributes.toolbar_cont.id=i+"_toolbar";h.appendChild(l.attributes.toolbar_cont);}var p=document.createElement("DIV");h.appendChild(p);l.attributes.editor_wrapper=p;YAHOO.widget.SimpleEditor.superclass.constructor.call(this,l.element,l.attributes);};YAHOO.extend(YAHOO.widget.SimpleEditor,YAHOO.util.Element,{_resizeConfig:{handles:["br"],autoRatio:true,status:true,proxy:true,useShim:true,setSize:false},_setupResize:function(){if(!YAHOO.util.DD||!YAHOO.util.Resize){return false;}if(this.get("resize")){var h={};g.augmentObject(h,this._resizeConfig);this.resize=new YAHOO.util.Resize(this.get("element_cont").get("element"),h);this.resize.on("resize",function(j){var n=this.get("animate");this.set("animate",false);this.set("width",j.width+"px");var k=j.height,l=(this.toolbar.get("element").clientHeight+2),m=0;if(this.dompath){m=(this.dompath.clientHeight+1);}var i=(k-l-m);this.set("height",i+"px");this.get("element_cont").setStyle("height","");this.set("animate",n);},this,true);}},resize:null,_setupDD:function(){if(!YAHOO.util.DD){return false;}if(this.get("drag")){var i=this.get("drag"),h=YAHOO.util.DD;if(i==="proxy"){h=YAHOO.util.DDProxy;}this.dd=new h(this.get("element_cont").get("element"));this.toolbar.addClass("draggable");this.dd.setHandleElId(this.toolbar._titlebar);}},dd:null,_lastCommand:null,_undoNodeChange:function(){},_storeUndo:function(){},_checkKey:function(h,m){var j=false;if((m.keyCode===h.key)){if(h.mods&&(h.mods.length>0)){var n=0;for(var l=0;l<h.mods.length;l++){if(this.browser.mac){if(h.mods[l]=="ctrl"){h.mods[l]="meta";}}if(m[h.mods[l]+"Key"]===true){n++;}}if(n===h.mods.length){j=true;}}else{j=true;}}return j;},_keyMap:{SELECT_ALL:{key:65,mods:["ctrl"]},CLOSE_WINDOW:{key:87,mods:["shift","ctrl"]},FOCUS_TOOLBAR:{key:27,mods:["shift"]},FOCUS_AFTER:{key:27},FONT_SIZE_UP:{key:38,mods:["shift","ctrl"]},FONT_SIZE_DOWN:{key:40,mods:["shift","ctrl"]},CREATE_LINK:{key:76,mods:["shift","ctrl"]},BOLD:{key:66,mods:["shift","ctrl"]},ITALIC:{key:73,mods:["shift","ctrl"]},UNDERLINE:{key:85,mods:["shift","ctrl"]},UNDO:{key:90,mods:["ctrl"]},REDO:{key:90,mods:["shift","ctrl"]},JUSTIFY_LEFT:{key:219,mods:["shift","ctrl"]},JUSTIFY_CENTER:{key:220,mods:["shift","ctrl"]},JUSTIFY_RIGHT:{key:221,mods:["shift","ctrl"]}},_cleanClassName:function(h){return h.replace(/ /g,"-").toLowerCase();},_textarea:null,_docType:'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">',editorDirty:null,_defaultCSS:"html { height: 95%; } body { padding: 7px; background-color: #fff; font: 13px/1.22 arial,helvetica,clean,sans-serif;*font-size:small;*font:x-small; } a, a:visited, a:hover { color: blue !important; text-decoration: underline !important; cursor: text !important; } .warning-localfile { border-bottom: 1px dashed red !important; } .yui-busy { cursor: wait !important; } img.selected { border: 2px dotted #808080; } img { cursor: pointer !important; border: none; } body.ptags.webkit div.yui-wk-p { margin: 11px 0; } body.ptags.webkit div.yui-wk-div { margin: 0; }",_defaultToolbar:null,_lastButton:null,_baseHREF:function(){var h=document.location.href;if(h.indexOf("?")!==-1){h=h.substring(0,h.indexOf("?"));}h=h.substring(0,h.lastIndexOf("/"))+"/";return h;}(),_lastImage:null,_blankImageLoaded:null,_fixNodesTimer:null,_nodeChangeTimer:null,_nodeChangeDelayTimer:null,_lastNodeChangeEvent:null,_lastNodeChange:0,_rendered:null,DOMReady:null,_selection:null,_mask:null,_showingHiddenElements:null,currentWindow:null,currentEvent:null,operaEvent:null,currentFont:null,currentElement:null,dompath:null,beforeElement:null,afterElement:null,invalidHTML:{form:true,input:true,button:true,select:true,link:true,html:true,body:true,iframe:true,script:true,style:true,textarea:true},toolbar:null,_contentTimer:null,_contentTimerMax:500,_contentTimerCounter:0,_disabled:["createlink","fontname","fontsize","forecolor","backcolor"],_alwaysDisabled:{undo:true,redo:true},_alwaysEnabled:{},_semantic:{bold:true,italic:true,underline:true},_tag2cmd:{b:"bold",strong:"bold",i:"italic",em:"italic",u:"underline",sup:"superscript",sub:"subscript",img:"insertimage",a:"createlink",ul:"insertunorderedlist",ol:"insertorderedlist"},_createIframe:function(){var m=document.createElement("iframe");m.id=this.get("id")+"_editor";var k={border:"0",frameBorder:"0",marginWidth:"0",marginHeight:"0",leftMargin:"0",topMargin:"0",allowTransparency:"true",width:"100%"};if(this.get("autoHeight")){k.scrolling="no";}for(var l in k){if(g.hasOwnProperty(k,l)){m.setAttribute(l,k[l]);}}var j="javascript:;";if(this.browser.ie||c){j="javascript:false;";}m.setAttribute("src",j);var h=new YAHOO.util.Element(m);h.setStyle("visibility","hidden");return h;},_isElement:function(i,h){if(i&&i.tagName&&(i.tagName.toLowerCase()==h)){return true;}if(i&&i.getAttribute&&(i.getAttribute("tag")==h)){return true;}return false;},_hasParent:function(i,h){if(!i||!i.parentNode){return false;}while(i.parentNode){if(this._isElement(i,h)){return i;}if(i.parentNode){i=i.parentNode;}else{return false;}}return false;},_getDoc:function(){var h=false;try{if(this.get("iframe").get("element").contentWindow.document){h=this.get("iframe").get("element").contentWindow.document;return h;}}catch(i){return false;}},_getWindow:function(){return this.get("iframe").get("element").contentWindow;},focus:function(){this._getWindow().focus();},_focusWindow:function(){this.focus();},_hasSelection:function(){var j=this._getSelection();var h=this._getRange();var i=false;if(!j||!h){return i;}if(this.browser.ie||this.browser.opera){if(h.text){i=true;}if(h.html){i=true;}}else{if(this.browser.webkit){if(j+""!==""){i=true;}}else{if(j&&(j.toString()!=="")&&(j!==undefined)){i=true;}}}return i;},_getSelection:function(){var h=null;if(this._getDoc()&&this._getWindow()){if(this._getDoc().selection){h=this._getDoc().selection;}else{h=this._getWindow().getSelection();}if(this.browser.webkit){if(h.baseNode){this._selection={};this._selection.baseNode=h.baseNode;this._selection.baseOffset=h.baseOffset;this._selection.extentNode=h.extentNode;this._selection.extentOffset=h.extentOffset;}else{if(this._selection!==null){h=this._getWindow().getSelection();h.setBaseAndExtent(this._selection.baseNode,this._selection.baseOffset,this._selection.extentNode,this._selection.extentOffset);this._selection=null;}}}}return h;},_selectNode:function(i,l){if(!i){return false;}var j=this._getSelection(),h=null;if(this.browser.ie){try{h=this._getDoc().body.createTextRange();h.moveToElementText(i);h.select();}catch(k){}}else{if(this.browser.webkit){if(l){j.setBaseAndExtent(i,1,i,i.innerText.length);}else{j.setBaseAndExtent(i,0,i,i.innerText.length);}}else{if(this.browser.opera){j=this._getWindow().getSelection();h=this._getDoc().createRange();h.selectNode(i);j.removeAllRanges();j.addRange(h);}else{h=this._getDoc().createRange();h.selectNodeContents(i);j.removeAllRanges();j.addRange(h);}}}this.nodeChange();},_getRange:function(){var h=this._getSelection();if(h===null){return null;}if(this.browser.webkit&&!h.getRangeAt){var k=this._getDoc().createRange();try{k.setStart(h.anchorNode,h.anchorOffset);k.setEnd(h.focusNode,h.focusOffset);}catch(j){k=this._getWindow().getSelection()+"";}return k;}if(this.browser.ie||this.browser.opera){try{return h.createRange();}catch(i){return null;}}if(h.rangeCount>0){return h.getRangeAt(0);}return null;},_setDesignMode:function(h){if(this.get("setDesignMode")){try{this._getDoc().designMode=((h.toLowerCase()=="off")?"off":"on");}catch(i){}}},_toggleDesignMode:function(){var i=this._getDoc().designMode,h=((i.toLowerCase()=="on")?"off":"on");this._setDesignMode(h);return h;},_focused:null,_handleFocus:function(h){if(!this._focused){this._focused=true;this.fireEvent("editorWindowFocus",{type:"editorWindowFocus",target:this});}},_handleBlur:function(h){if(this._focused){this._focused=false;this.fireEvent("editorWindowBlur",{type:"editorWindowBlur",target:this});}},_initEditorEvents:function(){var i=this._getDoc(),h=this._getWindow();a.on(i,"mouseup",this._handleMouseUp,this,true);a.on(i,"mousedown",this._handleMouseDown,this,true);a.on(i,"click",this._handleClick,this,true);a.on(i,"dblclick",this._handleDoubleClick,this,true);a.on(i,"keypress",this._handleKeyPress,this,true);a.on(i,"keyup",this._handleKeyUp,this,true);a.on(i,"keydown",this._handleKeyDown,this,true);a.on(h,"focus",this._handleFocus,this,true);a.on(h,"blur",this._handleBlur,this,true);},_removeEditorEvents:function(){var i=this._getDoc(),h=this._getWindow();a.removeListener(i,"mouseup",this._handleMouseUp,this,true);a.removeListener(i,"mousedown",this._handleMouseDown,this,true);a.removeListener(i,"click",this._handleClick,this,true);a.removeListener(i,"dblclick",this._handleDoubleClick,this,true);a.removeListener(i,"keypress",this._handleKeyPress,this,true);a.removeListener(i,"keyup",this._handleKeyUp,this,true);a.removeListener(i,"keydown",this._handleKeyDown,this,true);a.removeListener(h,"focus",this._handleFocus,this,true);a.removeListener(h,"blur",this._handleBlur,this,true);},_fixWebkitDivs:function(){if(this.browser.webkit){var h=this._getDoc().body.getElementsByTagName("div");f.addClass(h,"yui-wk-div");}},_initEditor:function(j){if(this._editorInit){return;}this._editorInit=true;if(this.browser.ie){this._getDoc().body.style.margin="0";}if(!this.get("disabled")){this._setDesignMode("on");this._contentTimerCounter=0;}if(!this._getDoc().body){this._contentTimerCounter=0;this._editorInit=false;this._checkLoaded();return false;}if(!j){this.toolbar.on("buttonClick",this._handleToolbarClick,this,true);}if(!this.get("disabled")){this._initEditorEvents();this.toolbar.set("disabled",false);}if(j){this.fireEvent("editorContentReloaded",{type:"editorreloaded",target:this});}else{this.fireEvent("editorContentLoaded",{type:"editorLoaded",target:this});}this._fixWebkitDivs();if(this.get("dompath")){var h=this;setTimeout(function(){h._writeDomPath.call(h);h._setupResize.call(h);},150);}var l=[];for(var k in this.browser){if(this.browser[k]){l.push(k);}}if(this.get("ptags")){l.push("ptags");}f.addClass(this._getDoc().body,l.join(" "));this.nodeChange(true);},_checkLoaded:function(i){this._editorInit=false;this._contentTimerCounter++;if(this._contentTimer){clearTimeout(this._contentTimer);}if(this._contentTimerCounter>this._contentTimerMax){return false;}var k=false;try{if(this._getDoc()&&this._getDoc().body){if(this.browser.ie){if(this._getDoc().body.readyState=="complete"){k=true;}}else{if(this._getDoc().body._rteLoaded===true){k=true;}}}}catch(j){k=false;}if(k===true){this._initEditor(i);}else{var h=this;this._contentTimer=setTimeout(function(){h._checkLoaded.call(h,i);},20);}},_setInitialContent:function(i){var l=((this._textarea)?this.get("element").value:this.get("element").innerHTML),n=null;if(l===""){l="<br>";}var j=g.substitute(this.get("html"),{TITLE:this.STR_TITLE,CONTENT:this._cleanIncomingHTML(l),CSS:this.get("css"),HIDDEN_CSS:((this.get("hiddencss"))?this.get("hiddencss"):"/* No Hidden CSS */"),EXTRA_CSS:((this.get("extracss"))?this.get("extracss"):"/* No Extra CSS */")}),h=true;j=j.replace(/RIGHT_BRACKET/gi,"{");j=j.replace(/LEFT_BRACKET/gi,"}");if(document.compatMode!="BackCompat"){j=this._docType+"\n"+j;}else{}if(this.browser.ie||c||this.browser.webkit||this.browser.opera||(navigator.userAgent.indexOf("Firefox/1.5")!=-1)){try{if(this.browser.air){n=this._getDoc().implementation.createHTMLDocument();var o=this._getDoc();o.open();o.close();n.open();n.write(j);n.close();var k=o.importNode(n.getElementsByTagName("html")[0],true);o.replaceChild(k,o.getElementsByTagName("html")[0]);o.body._rteLoaded=true;}else{n=this._getDoc();n.open();n.write(j);n.close();}}catch(m){h=false;}}else{this.get("iframe").get("element").src="data:text/html;charset=utf-8,"+encodeURIComponent(j);}this.get("iframe").setStyle("visibility","");if(h){this._checkLoaded(i);}},_setMarkupType:function(h){switch(this.get("markup")){case"css":this._setEditorStyle(true);break;case"default":this._setEditorStyle(false);break;case"semantic":case"xhtml":if(this._semantic[h]){this._setEditorStyle(false);}else{this._setEditorStyle(true);}break;}},_setEditorStyle:function(i){try{this._getDoc().execCommand("useCSS",false,!i);}catch(h){}},_getSelectedElement:function(){var m=this._getDoc(),j=null,k=null,n=null,i=true;if(this.browser.ie){this.currentEvent=this._getWindow().event;j=this._getRange();if(j){n=j.item?j.item(0):j.parentElement();if(this._hasSelection()){}if(n===m.body){n=null;}}if((this.currentEvent!==null)&&(this.currentEvent.keyCode===0)){n=a.getTarget(this.currentEvent);}}else{k=this._getSelection();j=this._getRange();if(!k||!j){return null;}if(!this._hasSelection()&&this.browser.webkit3){}if(this.browser.gecko){if(j.startContainer){if(j.startContainer.nodeType===3){n=j.startContainer.parentNode;}else{if(j.startContainer.nodeType===1){n=j.startContainer;}}if(this.currentEvent){var h=a.getTarget(this.currentEvent);if(!this._isElement(h,"html")){if(n!==h){n=h;}}}}}if(i){if(k.anchorNode&&(k.anchorNode.nodeType==3)){if(k.anchorNode.parentNode){n=k.anchorNode.parentNode;}if(k.anchorNode.nextSibling!=k.focusNode.nextSibling){n=k.anchorNode.nextSibling;}}if(this._isElement(n,"br")){n=null;}if(!n){n=j.commonAncestorContainer;if(!j.collapsed){if(j.startContainer==j.endContainer){if(j.startOffset-j.endOffset<2){if(j.startContainer.hasChildNodes()){n=j.startContainer.childNodes[j.startOffset];}}}}}}}if(this.currentEvent!==null){try{switch(this.currentEvent.type){case"click":case"mousedown":case"mouseup":if(this.browser.webkit){n=a.getTarget(this.currentEvent);}break;default:break;}}catch(l){}}else{if((this.currentElement&&this.currentElement[0])&&(!this.browser.ie)){}}if(this.browser.opera||this.browser.webkit){if(this.currentEvent&&!n){n=YAHOO.util.Event.getTarget(this.currentEvent);}}if(!n||!n.tagName){n=m.body;}if(this._isElement(n,"html")){n=m.body;}if(this._isElement(n,"body")){n=m.body;}if(n&&!n.parentNode){n=m.body;}if(n===undefined){n=null;}return n;},_getDomPath:function(h){if(!h){h=this._getSelectedElement();}var i=[];while(h!==null){if(h.ownerDocument!=this._getDoc()){h=null;break;}if(h.nodeName&&h.nodeType&&(h.nodeType==1)){i[i.length]=h;}if(this._isElement(h,"body")){break;}h=h.parentNode;}if(i.length===0){if(this._getDoc()&&this._getDoc().body){i[0]=this._getDoc().body;}}return i.reverse();},_writeDomPath:function(){var p=this._getDomPath(),n=[],l="",q="";for(var j=0;j<p.length;j++){var r=p[j].tagName.toLowerCase();if((r=="ol")&&(p[j].type)){r+=":"+p[j].type;}if(f.hasClass(p[j],"yui-tag")){r=p[j].getAttribute("tag");}if((this.get("markup")=="semantic")||(this.get("markup")=="xhtml")){switch(r){case"b":r="strong";break;case"i":r="em";break;}}if(!f.hasClass(p[j],"yui-non")){if(f.hasClass(p[j],"yui-tag")){q=r;}else{l=((p[j].className!=="")?"."+p[j].className.replace(/ /g,"."):"");if((l.indexOf("yui")!=-1)||(l.toLowerCase().indexOf("apple-style-span")!=-1)){l="";}q=r+((p[j].id)?"#"+p[j].id:"")+l;}switch(r){case"body":q="body";break;case"a":if(p[j].getAttribute("href",2)){q+=":"+p[j].getAttribute("href",2).replace("mailto:","").replace("http://","").replace("https://","");}break;case"img":var k=p[j].height;var o=p[j].width;if(p[j].style.height){k=parseInt(p[j].style.height,10);}if(p[j].style.width){o=parseInt(p[j].style.width,10);}q+="("+o+"x"+k+")";break;}if(q.length>10){q='<span title="'+q+'">'+q.substring(0,10)+"...</span>";}else{q='<span title="'+q+'">'+q+"</span>";}n[n.length]=q;}}var m=n.join(" "+this.SEP_DOMPATH+" ");if(this.dompath.innerHTML!=m){this.dompath.innerHTML=m;}},_fixNodes:function(){try{var p=this._getDoc(),m=[];for(var j in this.invalidHTML){if(YAHOO.lang.hasOwnProperty(this.invalidHTML,j)){if(j.toLowerCase()!="span"){var k=p.body.getElementsByTagName(j);if(k.length){for(var l=0;l<k.length;l++){m.push(k[l]);}}}}}for(var n=0;n<m.length;n++){if(m[n].parentNode){if(g.isObject(this.invalidHTML[m[n].tagName.toLowerCase()])&&this.invalidHTML[m[n].tagName.toLowerCase()].keepContents){this._swapEl(m[n],"span",function(h){h.className="yui-non";});}else{m[n].parentNode.removeChild(m[n]);}}}var q=this._getDoc().getElementsByTagName("img");f.addClass(q,"yui-img");}catch(o){}},_isNonEditable:function(k){if(this.get("allowNoEdit")){var j=a.getTarget(k);if(this._isElement(j,"html")){j=null;}var n=this._getDomPath(j);for(var h=(n.length-1);h>-1;h--){if(f.hasClass(n[h],this.CLASS_NOEDIT)){try{this._getDoc().execCommand("enableObjectResizing",false,"false");}catch(m){}this.nodeChange();a.stopEvent(k);return true;}}try{this._getDoc().execCommand("enableObjectResizing",false,"true");}catch(l){}}return false;},_setCurrentEvent:function(h){this.currentEvent=h;},_handleClick:function(j){var i=this.fireEvent("beforeEditorClick",{type:"beforeEditorClick",target:this,ev:j});if(i===false){return false;}if(this._isNonEditable(j)){return false;}this._setCurrentEvent(j);if(this.currentWindow){this.closeWindow();}if(this.currentWindow){this.closeWindow();}if(this.browser.webkit){var h=a.getTarget(j);if(this._isElement(h,"a")||this._isElement(h.parentNode,"a")){a.stopEvent(j);this.nodeChange();}}else{this.nodeChange();}this.fireEvent("editorClick",{type:"editorClick",target:this,ev:j});},_handleMouseUp:function(j){var i=this.fireEvent("beforeEditorMouseUp",{type:"beforeEditorMouseUp",target:this,ev:j});if(i===false){return false;}if(this._isNonEditable(j)){return false;}var h=this;if(this.browser.opera){var k=a.getTarget(j);if(this._isElement(k,"img")){this.nodeChange();if(this.operaEvent){clearTimeout(this.operaEvent);this.operaEvent=null;this._handleDoubleClick(j);}else{this.operaEvent=window.setTimeout(function(){h.operaEvent=false;},700);}}}if(this.browser.webkit||this.browser.opera){if(this.browser.webkit){a.stopEvent(j);}}this.nodeChange();this.fireEvent("editorMouseUp",{type:"editorMouseUp",target:this,ev:j});},_handleMouseDown:function(i){var h=this.fireEvent("beforeEditorMouseDown",{type:"beforeEditorMouseDown",target:this,ev:i});if(h===false){return false;}if(this._isNonEditable(i)){return false;}this._setCurrentEvent(i);var j=a.getTarget(i);if(this.browser.webkit&&this._hasSelection()){var k=this._getSelection();if(!this.browser.webkit3){k.collapse(true);}else{k.collapseToStart();}}if(this.browser.webkit&&this._lastImage){f.removeClass(this._lastImage,"selected");this._lastImage=null;}if(this._isElement(j,"img")||this._isElement(j,"a")){if(this.browser.webkit){a.stopEvent(i);if(this._isElement(j,"img")){f.addClass(j,"selected");this._lastImage=j;}}if(this.currentWindow){this.closeWindow();}this.nodeChange();}this.fireEvent("editorMouseDown",{type:"editorMouseDown",target:this,ev:i});},_handleDoubleClick:function(i){var h=this.fireEvent("beforeEditorDoubleClick",{type:"beforeEditorDoubleClick",target:this,ev:i});if(h===false){return false;}if(this._isNonEditable(i)){return false;}this._setCurrentEvent(i);var j=a.getTarget(i);if(this._isElement(j,"img")){this.currentElement[0]=j;this.toolbar.fireEvent("insertimageClick",{type:"insertimageClick",target:this.toolbar});this.fireEvent("afterExecCommand",{type:"afterExecCommand",target:this});}else{if(this._hasParent(j,"a")){this.currentElement[0]=this._hasParent(j,"a");this.toolbar.fireEvent("createlinkClick",{type:"createlinkClick",target:this.toolbar});this.fireEvent("afterExecCommand",{type:"afterExecCommand",target:this});}}this.nodeChange();this.fireEvent("editorDoubleClick",{type:"editorDoubleClick",target:this,ev:i});},_handleKeyUp:function(j){var i=this.fireEvent("beforeEditorKeyUp",{type:"beforeEditorKeyUp",target:this,ev:j});if(i===false){return false;}if(this._isNonEditable(j)){return false;}this._storeUndo();this._setCurrentEvent(j);switch(j.keyCode){case this._keyMap.SELECT_ALL.key:if(this._checkKey(this._keyMap.SELECT_ALL,j)){this.nodeChange();}break;case 32:case 35:case 36:case 37:case 38:case 39:case 40:case 46:case 8:case this._keyMap.CLOSE_WINDOW.key:if((j.keyCode==this._keyMap.CLOSE_WINDOW.key)&&this.currentWindow){if(this._checkKey(this._keyMap.CLOSE_WINDOW,j)){this.closeWindow();}}else{if(!this.browser.ie){if(this._nodeChangeTimer){clearTimeout(this._nodeChangeTimer);}var h=this;this._nodeChangeTimer=setTimeout(function(){h._nodeChangeTimer=null;h.nodeChange.call(h);},100);}else{this.nodeChange();}this.editorDirty=true;}break;}this.fireEvent("editorKeyUp",{type:"editorKeyUp",target:this,ev:j});},_handleKeyPress:function(j){var i=this.fireEvent("beforeEditorKeyPress",{type:"beforeEditorKeyPress",target:this,ev:j});if(i===false){return false;}if(this.get("allowNoEdit")){if(j&&j.keyCode&&(j.keyCode==63272)){a.stopEvent(j);}}if(this._isNonEditable(j)){return false;}this._setCurrentEvent(j);this._storeUndo();if(this.browser.opera){if(j.keyCode===13){var h=this._getSelectedElement();if(!this._isElement(h,"li")){this.execCommand("inserthtml","<br>");a.stopEvent(j);}}}if(this.browser.webkit){if(!this.browser.webkit3){if(j.keyCode&&(j.keyCode==122)&&(j.metaKey)){if(this._hasParent(this._getSelectedElement(),"li")){a.stopEvent(j);}}}this._listFix(j);}this._fixListDupIds();this.fireEvent("editorKeyPress",{type:"editorKeyPress",target:this,ev:j});},_handleKeyDown:function(D){var F=this.fireEvent("beforeEditorKeyDown",{type:"beforeEditorKeyDown",target:this,ev:D});if(F===false){return false;}var A=null,j=null;if(this._isNonEditable(D)){return false;}this._setCurrentEvent(D);if(this.currentWindow){this.closeWindow();}if(this.currentWindow){this.closeWindow();}var t=false,y=null,v=null,x=false;switch(D.keyCode){case this._keyMap.FOCUS_TOOLBAR.key:if(this._checkKey(this._keyMap.FOCUS_TOOLBAR,D)){var C=this.toolbar.getElementsByTagName("h2")[0];if(C&&C.firstChild){C.firstChild.focus();}}else{if(this._checkKey(this._keyMap.FOCUS_AFTER,D)){this.afterElement.focus();}}a.stopEvent(D);t=false;break;case this._keyMap.CREATE_LINK.key:if(this._hasSelection()){if(this._checkKey(this._keyMap.CREATE_LINK,D)){var k=true;if(this.get("limitCommands")){if(!this.toolbar.getButtonByValue("createlink")){k=false;}}if(k){this.execCommand("createlink","");this.toolbar.fireEvent("createlinkClick",{type:"createlinkClick",target:this.toolbar});this.fireEvent("afterExecCommand",{type:"afterExecCommand",target:this});t=false;}}}break;case this._keyMap.UNDO.key:case this._keyMap.REDO.key:if(this._checkKey(this._keyMap.REDO,D)){y="redo";t=true;}else{if(this._checkKey(this._keyMap.UNDO,D)){y="undo";t=true;}}break;case this._keyMap.BOLD.key:if(this._checkKey(this._keyMap.BOLD,D)){y="bold";t=true;}break;case this._keyMap.FONT_SIZE_UP.key:case this._keyMap.FONT_SIZE_DOWN.key:var q=false,z=false;if(this._checkKey(this._keyMap.FONT_SIZE_UP,D)){q=true;}if(this._checkKey(this._keyMap.FONT_SIZE_DOWN,D)){z=true;}if(q||z){var m=this.toolbar.getButtonByValue("fontsize"),l=parseInt(m.get("label"),10),n=(l+1);if(z){n=(l-1);}y="fontsize";v=n+"px";t=true;}break;case this._keyMap.ITALIC.key:if(this._checkKey(this._keyMap.ITALIC,D)){y="italic";t=true;}break;case this._keyMap.UNDERLINE.key:if(this._checkKey(this._keyMap.UNDERLINE,D)){y="underline";t=true;}break;case 9:if(this.browser.ie){j=this._getRange();A=this._getSelectedElement();if(!this._isElement(A,"li")){if(j){j.pasteHTML("&nbsp;&nbsp;&nbsp;&nbsp;");j.collapse(false);j.select();}a.stopEvent(D);}}if(this.browser.gecko>1.8||c){A=this._getSelectedElement();if(this._isElement(A,"li")){if(D.shiftKey){this._getDoc().execCommand("outdent",null,"");}else{this._getDoc().execCommand("indent",null,"");}}else{if(!this._hasSelection()){this.execCommand("inserthtml","&nbsp;&nbsp;&nbsp;&nbsp;");}}a.stopEvent(D);}break;case 13:var s=null,B=0;if(this.get("ptags")&&!D.shiftKey){if(this.browser.gecko){A=this._getSelectedElement();if(!this._hasParent(A,"li")){if(this._hasParent(A,"p")){s=this._getDoc().createElement("p");s.innerHTML="&nbsp;";f.insertAfter(s,A);this._selectNode(s.firstChild);}else{if(this._isElement(A,"body")){this.execCommand("insertparagraph",null);var u=this._getDoc().body.getElementsByTagName("p");for(B=0;B<u.length;B++){if(u[B].getAttribute("_moz_dirty")!==null){s=this._getDoc().createElement("p");s.innerHTML="&nbsp;";f.insertAfter(s,u[B]);this._selectNode(s.firstChild);u[B].removeAttribute("_moz_dirty");}}}else{t=true;y="insertparagraph";}}a.stopEvent(D);}}if(this.browser.webkit){A=this._getSelectedElement();if(!this._hasParent(A,"li")){this.execCommand("insertparagraph",null);var w=this._getDoc().body.getElementsByTagName("div");for(B=0;B<w.length;B++){if(!f.hasClass(w[B],"yui-wk-div")){f.addClass(w[B],"yui-wk-p");}}a.stopEvent(D);}}}else{if(this.browser.webkit){A=this._getSelectedElement();if(!this._hasParent(A,"li")){if(this.browser.webkit4){this.execCommand("insertlinebreak");}else{this.execCommand("inserthtml",'<var id="yui-br"></var>');var r=this._getDoc().getElementById("yui-br"),E=this._getDoc().createElement("br"),o=this._getDoc().createElement("span");r.parentNode.replaceChild(E,r);o.className="yui-non";o.innerHTML="&nbsp;";f.insertAfter(o,E);this._selectNode(o);}a.stopEvent(D);}}if(this.browser.ie){j=this._getRange();A=this._getSelectedElement();if(!this._isElement(A,"li")){if(j){j.pasteHTML("<br>");j.collapse(false);j.select();}a.stopEvent(D);}}}break;}if(this.browser.ie){this._listFix(D);}if(t&&y){this.execCommand(y,v);a.stopEvent(D);this.nodeChange();}this._storeUndo();this.fireEvent("editorKeyDown",{type:"editorKeyDown",target:this,ev:D});},_fixListRunning:null,_fixListDupIds:function(){if(this._fixListRunning){return false;}if(this._getDoc()){this._fixListRunning=true;var h=this._getDoc().body.getElementsByTagName("li"),j=0,k={};for(j=0;j<h.length;j++){if(h[j].id){if(k[h[j].id]){h[j].id="";}k[h[j].id]=true;}}this._fixListRunning=false;}},_listFix:function(n){var p=null,l=null,h=false,j=null;if(this.browser.webkit){if(n.keyCode&&(n.keyCode==13)){if(this._hasParent(this._getSelectedElement(),"li")){var k=this._hasParent(this._getSelectedElement(),"li");if(k.previousSibling){if(k.firstChild&&(k.firstChild.length==1)){this._selectNode(k);}}}}}if(n.keyCode&&((!this.browser.webkit3&&(n.keyCode==25))||((this.browser.webkit3||!this.browser.webkit)&&((n.keyCode==9)&&n.shiftKey)))){p=this._getSelectedElement();if(this._hasParent(p,"li")){p=this._hasParent(p,"li");if(this._hasParent(p,"ul")||this._hasParent(p,"ol")){l=this._hasParent(p,"ul");if(!l){l=this._hasParent(p,"ol");}if(this._isElement(l.previousSibling,"li")){l.removeChild(p);l.parentNode.insertBefore(p,l.nextSibling);if(this.browser.ie){j=this._getDoc().body.createTextRange();j.moveToElementText(p);j.collapse(false);j.select();}if(this.browser.webkit){this._selectNode(p.firstChild);}a.stopEvent(n);}}}}if(n.keyCode&&((n.keyCode==9)&&(!n.shiftKey))){var i=this._getSelectedElement();if(this._hasParent(i,"li")){h=this._hasParent(i,"li").innerHTML;}if(this.browser.webkit){this._getDoc().execCommand("inserttext",false,"\t");}p=this._getSelectedElement();if(this._hasParent(p,"li")){l=this._hasParent(p,"li");var m=this._getDoc().createElement(l.parentNode.tagName.toLowerCase());if(this.browser.webkit){var o=f.getElementsByClassName("Apple-tab-span","span",l);if(o[0]){l.removeChild(o[0]);l.innerHTML=g.trim(l.innerHTML);if(h){l.innerHTML='<span class="yui-non">'+h+"</span>&nbsp;";}else{l.innerHTML='<span class="yui-non">&nbsp;</span>&nbsp;';}}}else{if(h){l.innerHTML=h+"&nbsp;";}else{l.innerHTML="&nbsp;";}}l.parentNode.replaceChild(m,l);m.appendChild(l);if(this.browser.webkit){this._getSelection().setBaseAndExtent(l.firstChild,1,l.firstChild,l.firstChild.innerText.length);if(!this.browser.webkit3){l.parentNode.parentNode.style.display="list-item";setTimeout(function(){l.parentNode.parentNode.style.display="block";},1);}}else{if(this.browser.ie){j=this._getDoc().body.createTextRange();j.moveToElementText(l);j.collapse(false);j.select();}else{this._selectNode(l);}}a.stopEvent(n);}if(this.browser.webkit){a.stopEvent(n);}this.nodeChange();}},nodeChange:function(h){var i=this;this._storeUndo();if(this.get("nodeChangeDelay")){this._nodeChangeDelayTimer=window.setTimeout(function(){i._nodeChangeDelayTimer=null;i._nodeChange.apply(i,arguments);},0);}else{this._nodeChange();}},_nodeChange:function(k){var m=parseInt(this.get("nodeChangeThreshold"),10),t=Math.round(new Date().getTime()/1000),w=this;if(k===true){this._lastNodeChange=0;}if((this._lastNodeChange+m)<t){if(this._fixNodesTimer===null){this._fixNodesTimer=window.setTimeout(function(){w._fixNodes.call(w);w._fixNodesTimer=null;},0);}}this._lastNodeChange=t;if(this.currentEvent){try{this._lastNodeChangeEvent=this.currentEvent.type;}catch(F){}}var E=this.fireEvent("beforeNodeChange",{type:"beforeNodeChange",target:this});if(E===false){return false;}if(this.get("dompath")){window.setTimeout(function(){w._writeDomPath.call(w);},0);}if(!this.get("disabled")){if(this.STOP_NODE_CHANGE){this.STOP_NODE_CHANGE=false;return false;}else{var y=this._getSelection(),v=this._getRange(),h=this._getSelectedElement(),r=this.toolbar.getButtonByValue("fontname"),q=this.toolbar.getButtonByValue("fontsize"),o=this.toolbar.getButtonByValue("undo"),l=this.toolbar.getButtonByValue("redo");var s={};if(this._lastButton){s[this._lastButton.id]=true;}if(!this._isElement(h,"body")){if(r){s[r.get("id")]=true;}if(q){s[q.get("id")]=true;}}if(l){delete s[l.get("id")];}this.toolbar.resetAllButtons(s);for(var G=0;G<this._disabled.length;G++){var u=this.toolbar.getButtonByValue(this._disabled[G]);if(u&&u.get){if(this._lastButton&&(u.get("id")===this._lastButton.id)){}else{if(!this._hasSelection()&&!this.get("insert")){switch(this._disabled[G]){case"fontname":case"fontsize":break;default:this.toolbar.disableButton(u);}}else{if(!this._alwaysDisabled[this._disabled[G]]){this.toolbar.enableButton(u);}}if(!this._alwaysEnabled[this._disabled[G]]){this.toolbar.deselectButton(u);}}}}var x=this._getDomPath();var H=null,B=null;for(var C=0;C<x.length;C++){H=x[C].tagName.toLowerCase();if(x[C].getAttribute("tag")){H=x[C].getAttribute("tag").toLowerCase();}B=this._tag2cmd[H];if(B===undefined){B=[];}if(!g.isArray(B)){B=[B];}if(x[C].style.fontWeight.toLowerCase()=="bold"){B[B.length]="bold";}if(x[C].style.fontStyle.toLowerCase()=="italic"){B[B.length]="italic";}if(x[C].style.textDecoration.toLowerCase()=="underline"){B[B.length]="underline";}if(x[C].style.textDecoration.toLowerCase()=="line-through"){B[B.length]="strikethrough";}if(B.length>0){for(var A=0;A<B.length;A++){this.toolbar.selectButton(B[A]);this.toolbar.enableButton(B[A]);}}switch(x[C].style.textAlign.toLowerCase()){case"left":case"right":case"center":case"justify":var z=x[C].style.textAlign.toLowerCase();if(x[C].style.textAlign.toLowerCase()=="justify"){z="full";}this.toolbar.selectButton("justify"+z);this.toolbar.enableButton("justify"+z);break;}}if(r){var D=r._configs.label._initialConfig.value;r.set("label",'<span class="yui-toolbar-fontname-'+this._cleanClassName(D)+'">'+D+"</span>");this._updateMenuChecked("fontname",D);}if(q){q.set("label",q._configs.label._initialConfig.value);}var p=this.toolbar.getButtonByValue("heading");if(p){p.set("label",p._configs.label._initialConfig.value);this._updateMenuChecked("heading","none");}var n=this.toolbar.getButtonByValue("insertimage");if(n&&this.currentWindow&&(this.currentWindow.name=="insertimage")){this.toolbar.disableButton(n);}if(this._lastButton&&this._lastButton.isSelected){this.toolbar.deselectButton(this._lastButton.id);}this._undoNodeChange();}}this.fireEvent("afterNodeChange",{type:"afterNodeChange",target:this});},_updateMenuChecked:function(h,i,k){if(!k){k=this.toolbar;}var j=k.getButtonByValue(h);j.checkValue(i);},_handleToolbarClick:function(i){var k="";var l="";var j=i.button.value;if(i.button.menucmd){k=j;j=i.button.menucmd;}this._lastButton=i.button;if(this.STOP_EXEC_COMMAND){this.STOP_EXEC_COMMAND=false;return false;}else{this.execCommand(j,k);if(!this.browser.webkit){var h=this;setTimeout(function(){h.focus.call(h);},5);}}a.stopEvent(i);},_setupAfterElement:function(){if(!this.beforeElement){this.beforeElement=document.createElement("h2");this.beforeElement.className="yui-editor-skipheader";this.beforeElement.tabIndex="-1";this.beforeElement.innerHTML=this.STR_BEFORE_EDITOR;this.get("element_cont").get("firstChild").insertBefore(this.beforeElement,this.toolbar.get("nextSibling"));}if(!this.afterElement){this.afterElement=document.createElement("h2");this.afterElement.className="yui-editor-skipheader";this.afterElement.tabIndex="-1";this.afterElement.innerHTML=this.STR_LEAVE_EDITOR;this.get("element_cont").get("firstChild").appendChild(this.afterElement);}},_disableEditor:function(m){var l,k,j,h;if(!this.get("disabled_iframe")){l=this._createIframe();l.set("id","disabled_"+this.get("iframe").get("id"));l.setStyle("height","100%");l.setStyle("display","none");l.setStyle("visibility","visible");this.set("disabled_iframe",l);k=this.get("iframe").get("parentNode");k.appendChild(l.get("element"));}if(!l){l=this.get("disabled_iframe");}if(m){this._orgIframe=this.get("iframe");if(this.toolbar){this.toolbar.set("disabled",true);}j=this.getEditorHTML();h=this.get("iframe").get("offsetHeight");l.setStyle("visibility","");l.setStyle("position","");l.setStyle("top","");l.setStyle("left","");this._orgIframe.setStyle("visibility","hidden");this._orgIframe.setStyle("position","absolute");this._orgIframe.setStyle("top","-99999px");this._orgIframe.setStyle("left","-99999px");this.set("iframe",l);this._setInitialContent(true);if(!this._mask){this._mask=document.createElement("DIV");f.addClass(this._mask,"yui-editor-masked");if(this.browser.ie){this._mask.style.height=h+"px";}this.get("iframe").get("parentNode").appendChild(this._mask);}this.on("editorContentReloaded",function(){this._getDoc().body._rteLoaded=false;this.setEditorHTML(j);l.setStyle("display","block");this.unsubscribeAll("editorContentReloaded");});}else{if(this._mask){this._mask.parentNode.removeChild(this._mask);this._mask=null;if(this.toolbar){this.toolbar.set("disabled",false);}l.setStyle("visibility","hidden");l.setStyle("position","absolute");l.setStyle("top","-99999px");l.setStyle("left","-99999px");this._orgIframe.setStyle("visibility","");this._orgIframe.setStyle("position","");this._orgIframe.setStyle("top","");this._orgIframe.setStyle("left","");this.set("iframe",this._orgIframe);this.focus();var i=this;window.setTimeout(function(){i.nodeChange.call(i);},100);}}},SEP_DOMPATH:"<",STR_LEAVE_EDITOR:"You have left the Rich Text Editor.",STR_BEFORE_EDITOR:"This text field can contain stylized text and graphics. To cycle through all formatting options, use the keyboard shortcut Shift + Escape to place focus on the toolbar and navigate between options with your arrow keys. To exit this text editor use the Escape key and continue tabbing. <h4>Common formatting keyboard shortcuts:</h4><ul><li>Control Shift B sets text to bold</li> <li>Control Shift I sets text to italic</li> <li>Control Shift U underlines text</li> <li>Control Shift L adds an HTML link</li></ul>",STR_TITLE:"Rich Text Area.",STR_IMAGE_HERE:"Image URL Here",STR_IMAGE_URL:"Image URL",STR_LINK_URL:"Link URL",STOP_EXEC_COMMAND:false,STOP_NODE_CHANGE:false,CLASS_NOEDIT:"yui-noedit",CLASS_CONTAINER:"yui-editor-container",CLASS_EDITABLE:"yui-editor-editable",CLASS_EDITABLE_CONT:"yui-editor-editable-container",CLASS_PREFIX:"yui-editor",browser:function(){var h=YAHOO.env.ua;if(h.webkit>=420){h.webkit3=h.webkit;}else{h.webkit3=0;}if(h.webkit>=530){h.webkit4=h.webkit;}else{h.webkit4=0;}h.mac=false;if(navigator.userAgent.indexOf("Macintosh")!==-1){h.mac=true;}return h;}(),init:function(i,h){if(!this._defaultToolbar){this._defaultToolbar={collapse:true,titlebar:"Text Editing Tools",draggable:false,buttons:[{group:"fontstyle",label:"Font Name and Size",buttons:[{type:"select",label:"Arial",value:"fontname",disabled:true,menu:[{text:"Arial",checked:true},{text:"Arial Black"},{text:"Comic Sans MS"},{text:"Courier New"},{text:"Lucida Console"},{text:"Tahoma"},{text:"Times New Roman"},{text:"Trebuchet MS"},{text:"Verdana"}]},{type:"spin",label:"13",value:"fontsize",range:[9,75],disabled:true}]},{type:"separator"},{group:"textstyle",label:"Font Style",buttons:[{type:"push",label:"Bold CTRL + SHIFT + B",value:"bold"},{type:"push",label:"Italic CTRL + SHIFT + I",value:"italic"},{type:"push",label:"Underline CTRL + SHIFT + U",value:"underline"},{type:"push",label:"Strike Through",value:"strikethrough"},{type:"separator"},{type:"color",label:"Font Color",value:"forecolor",disabled:true},{type:"color",label:"Background Color",value:"backcolor",disabled:true}]},{type:"separator"},{group:"indentlist",label:"Lists",buttons:[{type:"push",label:"Create an Unordered List",value:"insertunorderedlist"},{type:"push",label:"Create an Ordered List",value:"insertorderedlist"}]},{type:"separator"},{group:"insertitem",label:"Insert Item",buttons:[{type:"push",label:"HTML Link CTRL + SHIFT + L",value:"createlink",disabled:true},{type:"push",label:"Insert Image",value:"insertimage"}]}]};}YAHOO.widget.SimpleEditor.superclass.init.call(this,i,h);YAHOO.widget.EditorInfo._instances[this.get("id")]=this;this.currentElement=[];this.on("contentReady",function(){this.DOMReady=true;this.fireQueue();},this,true);},initAttributes:function(h){YAHOO.widget.SimpleEditor.superclass.initAttributes.call(this,h);var i=this;this.setAttributeConfig("setDesignMode",{value:((h.setDesignMode===false)?false:true)});this.setAttributeConfig("nodeChangeDelay",{value:((h.nodeChangeDelay===false)?false:true)});this.setAttributeConfig("maxUndo",{writeOnce:true,value:h.maxUndo||30});this.setAttributeConfig("ptags",{writeOnce:true,value:h.ptags||false});this.setAttributeConfig("insert",{writeOnce:true,value:h.insert||false,method:function(n){if(n){var m={fontname:true,fontsize:true,forecolor:true,backcolor:true};var l=this._defaultToolbar.buttons;for(var k=0;k<l.length;k++){if(l[k].buttons){for(var j=0;j<l[k].buttons.length;j++){if(l[k].buttons[j].value){if(m[l[k].buttons[j].value]){delete l[k].buttons[j].disabled;}}}}}}}});this.setAttributeConfig("container",{writeOnce:true,value:h.container||false});this.setAttributeConfig("plainText",{writeOnce:true,value:h.plainText||false});this.setAttributeConfig("iframe",{value:null});this.setAttributeConfig("disabled_iframe",{value:null});this.setAttributeConfig("textarea",{value:null,writeOnce:true});this.setAttributeConfig("nodeChangeThreshold",{value:h.nodeChangeThreshold||3,validator:YAHOO.lang.isNumber});this.setAttributeConfig("allowNoEdit",{value:h.allowNoEdit||false,validator:YAHOO.lang.isBoolean});this.setAttributeConfig("limitCommands",{value:h.limitCommands||false,validator:YAHOO.lang.isBoolean});this.setAttributeConfig("element_cont",{value:h.element_cont});this.setAttributeConfig("editor_wrapper",{value:h.editor_wrapper||null,writeOnce:true});this.setAttributeConfig("height",{value:h.height||f.getStyle(i.get("element"),"height"),method:function(j){if(this._rendered){if(this.get("animate")){var k=new YAHOO.util.Anim(this.get("iframe").get("parentNode"),{height:{to:parseInt(j,10)}},0.5);k.animate();}else{f.setStyle(this.get("iframe").get("parentNode"),"height",j);}}}});this.setAttributeConfig("autoHeight",{value:h.autoHeight||false,method:function(j){if(j){if(this.get("iframe")){this.get("iframe").get("element").setAttribute("scrolling","no");}this.on("afterNodeChange",this._handleAutoHeight,this,true);this.on("editorKeyDown",this._handleAutoHeight,this,true);this.on("editorKeyPress",this._handleAutoHeight,this,true);}else{if(this.get("iframe")){this.get("iframe").get("element").setAttribute("scrolling","auto");}this.unsubscribe("afterNodeChange",this._handleAutoHeight);this.unsubscribe("editorKeyDown",this._handleAutoHeight);this.unsubscribe("editorKeyPress",this._handleAutoHeight);}}});this.setAttributeConfig("width",{value:h.width||f.getStyle(this.get("element"),"width"),method:function(j){if(this._rendered){if(this.get("animate")){var k=new YAHOO.util.Anim(this.get("element_cont").get("element"),{width:{to:parseInt(j,10)}},0.5);k.animate();}else{this.get("element_cont").setStyle("width",j);}}}});this.setAttributeConfig("blankimage",{value:h.blankimage||this._getBlankImage()});this.setAttributeConfig("css",{value:h.css||this._defaultCSS,writeOnce:true});this.setAttributeConfig("html",{value:h.html||'<html><head><title>{TITLE}</title><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><base href="'+this._baseHREF+'"><style>{CSS}</style><style>{HIDDEN_CSS}</style><style>{EXTRA_CSS}</style></head><body onload="document.body._rteLoaded = true;">{CONTENT}</body></html>',writeOnce:true});this.setAttributeConfig("extracss",{value:h.extracss||"",writeOnce:true});this.setAttributeConfig("handleSubmit",{value:h.handleSubmit||false,method:function(j){if(this.get("element").form){if(!this._formButtons){this._formButtons=[];}if(j){a.on(this.get("element").form,"submit",this._handleFormSubmit,this,true);var k=this.get("element").form.getElementsByTagName("input");for(var m=0;m<k.length;m++){var l=k[m].getAttribute("type");if(l&&(l.toLowerCase()=="submit")){a.on(k[m],"click",this._handleFormButtonClick,this,true);this._formButtons[this._formButtons.length]=k[m];}}}else{a.removeListener(this.get("element").form,"submit",this._handleFormSubmit);if(this._formButtons){a.removeListener(this._formButtons,"click",this._handleFormButtonClick);}}}}});this.setAttributeConfig("disabled",{value:false,method:function(j){if(this._rendered){this._disableEditor(j);}}});this.setAttributeConfig("saveEl",{value:this.get("element")});this.setAttributeConfig("toolbar_cont",{value:null,writeOnce:true});this.setAttributeConfig("toolbar",{value:h.toolbar||this._defaultToolbar,writeOnce:true,method:function(j){if(!j.buttonType){j.buttonType=this._defaultToolbar.buttonType;}this._defaultToolbar=j;}});this.setAttributeConfig("animate",{value:((h.animate)?((YAHOO.util.Anim)?true:false):false),validator:function(k){var j=true;if(!YAHOO.util.Anim){j=false;}return j;}});this.setAttributeConfig("panel",{value:null,writeOnce:true,validator:function(k){var j=true;if(!YAHOO.widget.Overlay){j=false;}return j;}});this.setAttributeConfig("focusAtStart",{value:h.focusAtStart||false,writeOnce:true,method:function(j){if(j){this.on("editorContentLoaded",function(){var k=this;setTimeout(function(){k.focus.call(k);k.editorDirty=false;},400);},this,true);}}});this.setAttributeConfig("dompath",{value:h.dompath||false,method:function(j){if(j&&!this.dompath){this.dompath=document.createElement("DIV");this.dompath.id=this.get("id")+"_dompath";f.addClass(this.dompath,"dompath");this.get("element_cont").get("firstChild").appendChild(this.dompath);if(this.get("iframe")){this._writeDomPath();}}else{if(!j&&this.dompath){this.dompath.parentNode.removeChild(this.dompath);this.dompath=null;}}}});this.setAttributeConfig("markup",{value:h.markup||"semantic",validator:function(j){switch(j.toLowerCase()){case"semantic":case"css":case"default":case"xhtml":return true;}return false;}});this.setAttributeConfig("removeLineBreaks",{value:h.removeLineBreaks||false,validator:YAHOO.lang.isBoolean});this.setAttributeConfig("drag",{writeOnce:true,value:h.drag||false});this.setAttributeConfig("resize",{writeOnce:true,value:h.resize||false});this.setAttributeConfig("filterWord",{value:h.filterWord||false,validator:YAHOO.lang.isBoolean});},_getBlankImage:function(){if(!this.DOMReady){this._queue[this._queue.length]=["_getBlankImage",arguments];return"";}var h="";if(!this._blankImageLoaded){if(YAHOO.widget.EditorInfo.blankImage){this.set("blankimage",YAHOO.widget.EditorInfo.blankImage);this._blankImageLoaded=true;}else{var i=document.createElement("div");i.style.position="absolute";i.style.top="-9999px";i.style.left="-9999px";i.className=this.CLASS_PREFIX+"-blankimage";document.body.appendChild(i);h=YAHOO.util.Dom.getStyle(i,"background-image");h=h.replace("url(","").replace(")","").replace(/"/g,"");h=h.replace("app:/","");this.set("blankimage",h);this._blankImageLoaded=true;i.parentNode.removeChild(i);YAHOO.widget.EditorInfo.blankImage=h;}}else{h=this.get("blankimage");}return h;},_handleAutoHeight:function(){var m=this._getDoc(),i=m.body,n=m.documentElement;var h=parseInt(f.getStyle(this.get("editor_wrapper"),"height"),10);var j=i.scrollHeight;if(this.browser.webkit){j=n.scrollHeight;}if(j<parseInt(this.get("height"),10)){j=parseInt(this.get("height"),10);}if((h!=j)&&(j>=parseInt(this.get("height"),10))){var l=this.get("animate");this.set("animate",false);this.set("height",j+"px");this.set("animate",l);if(this.browser.ie){this.get("iframe").setStyle("height","99%");this.get("iframe").setStyle("zoom","1");var k=this;window.setTimeout(function(){k.get("iframe").setStyle("height","100%");},1);}}},_formButtons:null,_formButtonClicked:null,_handleFormButtonClick:function(i){var h=a.getTarget(i);this._formButtonClicked=h;},_handleFormSubmit:function(k){this.saveHTML();var j=this.get("element").form,h=this._formButtonClicked||false;a.removeListener(j,"submit",this._handleFormSubmit);if(YAHOO.env.ua.ie){if(h&&!h.disabled){h.click();}}else{if(h&&!h.disabled){h.click();}var i=document.createEvent("HTMLEvents");i.initEvent("submit",true,true);j.dispatchEvent(i);if(YAHOO.env.ua.webkit){if(YAHOO.lang.isFunction(j.submit)){j.submit();}}}},_handleFontSize:function(j){var h=this.toolbar.getButtonById(j.button.id);var i=h.get("label")+"px";this.execCommand("fontsize",i);return false;},_handleColorPicker:function(j){var i=j.button;var h="#"+j.color;if((i=="forecolor")||(i=="backcolor")){this.execCommand(i,h);}},_handleAlign:function(l){var k=null;for(var h=0;h<l.button.menu.length;h++){if(l.button.menu[h].value==l.button.value){k=l.button.menu[h].value;}}var j=this._getSelection();this.execCommand(k,j);return false;},_handleAfterNodeChange:function(){var v=this._getDomPath(),q=null,m=null,r=null,k=false,o=this.toolbar.getButtonByValue("fontname"),p=this.toolbar.getButtonByValue("fontsize"),j=this.toolbar.getButtonByValue("heading");for(var l=0;l<v.length;l++){q=v[l];var u=q.tagName.toLowerCase();if(q.getAttribute("tag")){u=q.getAttribute("tag");}m=q.getAttribute("face");if(f.getStyle(q,"font-family")){m=f.getStyle(q,"font-family");m=m.replace(/'/g,"");}if(u.substring(0,1)=="h"){if(j){for(var n=0;n<j._configs.menu.value.length;n++){if(j._configs.menu.value[n].value.toLowerCase()==u){j.set("label",j._configs.menu.value[n].text);}}this._updateMenuChecked("heading",u);}}}if(o){for(var t=0;t<o._configs.menu.value.length;t++){if(m&&o._configs.menu.value[t].text.toLowerCase()==m.toLowerCase()){k=true;m=o._configs.menu.value[t].text;}}if(!k){m=o._configs.label._initialConfig.value;}var s='<span class="yui-toolbar-fontname-'+this._cleanClassName(m)+'">'+m+"</span>";if(o.get("label")!=s){o.set("label",s);this._updateMenuChecked("fontname",m);}}if(p){r=parseInt(f.getStyle(q,"fontSize"),10);if((r===null)||isNaN(r)){r=p._configs.label._initialConfig.value;}p.set("label",""+r);}if(!this._isElement(q,"body")&&!this._isElement(q,"img")){this.toolbar.enableButton(o);this.toolbar.enableButton(p);this.toolbar.enableButton("forecolor");this.toolbar.enableButton("backcolor");}if(this._isElement(q,"img")){if(YAHOO.widget.Overlay){this.toolbar.enableButton("createlink");}}if(this._hasParent(q,"blockquote")){this.toolbar.selectButton("indent");this.toolbar.disableButton("indent");this.toolbar.enableButton("outdent");}if(this._hasParent(q,"ol")||this._hasParent(q,"ul")){this.toolbar.disableButton("indent");}this._lastButton=null;},_handleInsertImageClick:function(){if(this.get("limitCommands")){if(!this.toolbar.getButtonByValue("insertimage")){return false;}}this.toolbar.set("disabled",true);var h=function(){var i=this.currentElement[0],k="http://";if(!i){i=this._getSelectedElement();}if(i){if(i.getAttribute("src")){k=i.getAttribute("src",2);if(k.indexOf(this.get("blankimage"))!=-1){k=this.STR_IMAGE_HERE;}}}var j=prompt(this.STR_IMAGE_URL+": ",k);if((j!=="")&&(j!==null)){i.setAttribute("src",j);}else{if(j===""){i.parentNode.removeChild(i);this.currentElement=[];this.nodeChange();}else{if((j===null)){k=i.getAttribute("src",2);if(k.indexOf(this.get("blankimage"))!=-1){i.parentNode.removeChild(i);this.currentElement=[];this.nodeChange();}}}}this.closeWindow();this.toolbar.set("disabled",false);this.unsubscribe("afterExecCommand",h,this,true);};this.on("afterExecCommand",h,this,true);},_handleInsertImageWindowClose:function(){this.nodeChange();},_isLocalFile:function(h){if((h)&&(h!=="")&&((h.indexOf("file:/")!=-1)||(h.indexOf(":\\")!=-1))){return true;}return false;},_handleCreateLinkClick:function(){if(this.get("limitCommands")){if(!this.toolbar.getButtonByValue("createlink")){return false;}}this.toolbar.set("disabled",true);var h=function(){var k=this.currentElement[0],j="";if(k){if(k.getAttribute("href",2)!==null){j=k.getAttribute("href",2);}}var m=prompt(this.STR_LINK_URL+": ",j);if((m!=="")&&(m!==null)){var l=m;if((l.indexOf("://")==-1)&&(l.substring(0,1)!="/")&&(l.substring(0,6).toLowerCase()!="mailto")){if((l.indexOf("@")!=-1)&&(l.substring(0,6).toLowerCase()!="mailto")){l="mailto:"+l;}else{if(l.substring(0,1)!="#"){}}}k.setAttribute("href",l);}else{if(m!==null){var i=this._getDoc().createElement("span");i.innerHTML=k.innerHTML;f.addClass(i,"yui-non");k.parentNode.replaceChild(i,k);}}this.closeWindow();this.toolbar.set("disabled",false);this.unsubscribe("afterExecCommand",h,this,true);};this.on("afterExecCommand",h,this);},_handleCreateLinkWindowClose:function(){this.nodeChange();this.currentElement=[];},render:function(){if(this._rendered){return false;}if(!this.DOMReady){this._queue[this._queue.length]=["render",arguments];return false;}if(this.get("element")){if(this.get("element").tagName){this._textarea=true;if(this.get("element").tagName.toLowerCase()!=="textarea"){this._textarea=false;}}else{return false;}}else{return false;}this._rendered=true;var h=this;window.setTimeout(function(){h._render.call(h);},4);},_render:function(){var h=this;this.set("textarea",this.get("element"));this.get("element_cont").setStyle("display","none");this.get("element_cont").addClass(this.CLASS_CONTAINER);this.set("iframe",this._createIframe());window.setTimeout(function(){h._setInitialContent.call(h);},10);this.get("editor_wrapper").appendChild(this.get("iframe").get("element"));if(this.get("disabled")){this._disableEditor(true);}var i=this.get("toolbar");if(i instanceof e){this.toolbar=i;this.toolbar.set("disabled",true);}else{i.disabled=true;this.toolbar=new e(this.get("toolbar_cont"),i);}this.fireEvent("toolbarLoaded",{type:"toolbarLoaded",target:this.toolbar});this.toolbar.on("toolbarCollapsed",function(){if(this.currentWindow){this.moveWindow();}},this,true);this.toolbar.on("toolbarExpanded",function(){if(this.currentWindow){this.moveWindow();}},this,true);this.toolbar.on("fontsizeClick",this._handleFontSize,this,true);this.toolbar.on("colorPickerClicked",function(j){this._handleColorPicker(j);return false;},this,true);this.toolbar.on("alignClick",this._handleAlign,this,true);this.on("afterNodeChange",this._handleAfterNodeChange,this,true);this.toolbar.on("insertimageClick",this._handleInsertImageClick,this,true);this.on("windowinsertimageClose",this._handleInsertImageWindowClose,this,true);this.toolbar.on("createlinkClick",this._handleCreateLinkClick,this,true);this.on("windowcreatelinkClose",this._handleCreateLinkWindowClose,this,true);this.get("parentNode").replaceChild(this.get("element_cont").get("element"),this.get("element"));this.setStyle("visibility","hidden");this.setStyle("position","absolute");this.setStyle("top","-9999px");this.setStyle("left","-9999px");this.get("element_cont").appendChild(this.get("element"));this.get("element_cont").setStyle("display","block");f.addClass(this.get("iframe").get("parentNode"),this.CLASS_EDITABLE_CONT);this.get("iframe").addClass(this.CLASS_EDITABLE);this.get("element_cont").setStyle("width",this.get("width"));f.setStyle(this.get("iframe").get("parentNode"),"height",this.get("height"));this.get("iframe").setStyle("width","100%");this.get("iframe").setStyle("height","100%");this._setupDD();window.setTimeout(function(){h._setupAfterElement.call(h);},0);this.fireEvent("afterRender",{type:"afterRender",target:this});},execCommand:function(j,i){var m=this.fireEvent("beforeExecCommand",{type:"beforeExecCommand",target:this,args:arguments});if((m===false)||(this.STOP_EXEC_COMMAND)){this.STOP_EXEC_COMMAND=false;return false;}this._lastCommand=j;this._setMarkupType(j);if(this.browser.ie){this._getWindow().focus();}var h=true;if(this.get("limitCommands")){if(!this.toolbar.getButtonByValue(j)){h=false;}}this.editorDirty=true;if((typeof this["cmd_"+j.toLowerCase()]=="function")&&h){var l=this["cmd_"+j.toLowerCase()](i);h=l[0];if(l[1]){j=l[1];}if(l[2]){i=l[2];}}if(h){try{this._getDoc().execCommand(j,false,i);}catch(k){}}else{}this.on("afterExecCommand",function(){this.unsubscribeAll("afterExecCommand");this.nodeChange();},this,true);this.fireEvent("afterExecCommand",{type:"afterExecCommand",target:this});},cmd_bold:function(k){if(!this.browser.webkit){var j=this._getSelectedElement();if(j&&this._isElement(j,"span")&&this._hasSelection()){if(j.style.fontWeight=="bold"){j.style.fontWeight="";var h=this._getDoc().createElement("b"),i=j.parentNode;i.replaceChild(h,j);h.appendChild(j);}}}return[true];},cmd_italic:function(l){if(!this.browser.webkit){var k=this._getSelectedElement();if(k&&this._isElement(k,"span")&&this._hasSelection()){if(k.style.fontStyle=="italic"){k.style.fontStyle="";var h=this._getDoc().createElement("i"),j=k.parentNode;j.replaceChild(h,k);h.appendChild(k);}}}return[true];},cmd_underline:function(i){if(!this.browser.webkit){var h=this._getSelectedElement();if(h&&this._isElement(h,"span")){if(h.style.textDecoration=="underline"){h.style.textDecoration="none";}else{h.style.textDecoration="underline";}return[false];}}return[true];},cmd_backcolor:function(k){var h=true,i=this._getSelectedElement(),j="backcolor";if(this.browser.gecko||this.browser.opera){this._setEditorStyle(true);j="hilitecolor";}if(!this._isElement(i,"body")&&!this._hasSelection()){i.style.backgroundColor=k;this._selectNode(i);h=false;}else{if(this.get("insert")){i=this._createInsertElement({backgroundColor:k});}else{this._createCurrentElement("span",{backgroundColor:k,color:i.style.color,fontSize:i.style.fontSize,fontFamily:i.style.fontFamily});this._selectNode(this.currentElement[0]);}h=false;}return[h,j];},cmd_forecolor:function(j){var h=true,i=this._getSelectedElement();if(!this._isElement(i,"body")&&!this._hasSelection()){f.setStyle(i,"color",j);this._selectNode(i);h=false;}else{if(this.get("insert")){i=this._createInsertElement({color:j});}else{this._createCurrentElement("span",{color:j,fontSize:i.style.fontSize,fontFamily:i.style.fontFamily,backgroundColor:i.style.backgroundColor});this._selectNode(this.currentElement[0]);}h=false;}return[h];},cmd_unlink:function(h){this._swapEl(this.currentElement[0],"span",function(i){i.className="yui-non";});return[false];},cmd_createlink:function(j){var i=this._getSelectedElement(),h=null;if(this._hasParent(i,"a")){this.currentElement[0]=this._hasParent(i,"a");}else{if(this._isElement(i,"li")){h=this._getDoc().createElement("a");h.innerHTML=i.innerHTML;i.innerHTML="";i.appendChild(h);this.currentElement[0]=h;}else{if(!this._isElement(i,"a")){this._createCurrentElement("a");h=this._swapEl(this.currentElement[0],"a");this.currentElement[0]=h;}else{this.currentElement[0]=i;}}}return[false];},cmd_insertimage:function(n){var h=true,j=null,m="insertimage",l=this._getSelectedElement();if(n===""){n=this.get("blankimage");}if(this._isElement(l,"img")){this.currentElement[0]=l;h=false;}else{if(this._getDoc().queryCommandEnabled(m)){this._getDoc().execCommand(m,false,n);var o=this._getDoc().getElementsByTagName("img");for(var k=0;k<o.length;k++){if(!YAHOO.util.Dom.hasClass(o[k],"yui-img")){YAHOO.util.Dom.addClass(o[k],"yui-img");this.currentElement[0]=o[k];}}h=false;}else{if(l==this._getDoc().body){j=this._getDoc().createElement("img");j.setAttribute("src",n);YAHOO.util.Dom.addClass(j,"yui-img");this._getDoc().body.appendChild(j);}else{this._createCurrentElement("img");j=this._getDoc().createElement("img");j.setAttribute("src",n);YAHOO.util.Dom.addClass(j,"yui-img");this.currentElement[0].parentNode.replaceChild(j,this.currentElement[0]);}this.currentElement[0]=j;h=false;}}return[h];},cmd_inserthtml:function(k){var h=true,j="inserthtml",i=null,l=null;if(this.browser.webkit&&!this._getDoc().queryCommandEnabled(j)||c){this._createCurrentElement("img");i=this._getDoc().createElement("span");i.innerHTML=k;this.currentElement[0].parentNode.replaceChild(i,this.currentElement[0]);h=false;}else{if(this.browser.ie){l=this._getRange();if(l.item){l.item(0).outerHTML=k;}else{l.pasteHTML(k);}h=false;}}return[h];},cmd_list:function(J){var B=true,F=null,s=0,l=null,A="",I=this._getSelectedElement(),C="insertorderedlist";if(J=="ul"){C="insertunorderedlist";}if((this.browser.webkit&&!this.browser.webkit4)||(this.browser.opera)){if(this._isElement(I,"li")&&this._isElement(I.parentNode,J)){l=I.parentNode;F=this._getDoc().createElement("span");YAHOO.util.Dom.addClass(F,"yui-non");A="";var k=l.getElementsByTagName("li"),n=((this.browser.opera&&this.get("ptags"))?"p":"div");for(s=0;s<k.length;s++){A+="<"+n+">"+k[s].innerHTML+"</"+n+">";}F.innerHTML=A;this.currentElement[0]=l;this.currentElement[0].parentNode.replaceChild(F,this.currentElement[0]);}else{this._createCurrentElement(J.toLowerCase());F=this._getDoc().createElement(J);for(s=0;s<this.currentElement.length;s++){var p=this._getDoc().createElement("li");p.innerHTML=this.currentElement[s].innerHTML+'<span class="yui-non">&nbsp;</span>&nbsp;';F.appendChild(p);if(s>0){this.currentElement[s].parentNode.removeChild(this.currentElement[s]);}}var z=((this.browser.opera)?"<BR>":"<br>"),y=F.firstChild.innerHTML.split(z),E,G;if(y.length>0){F.innerHTML="";for(E=0;E<y.length;E++){G=this._getDoc().createElement("li");G.innerHTML=y[E];F.appendChild(G);}}this.currentElement[0].parentNode.replaceChild(F,this.currentElement[0]);this.currentElement[0]=F;var m=this.currentElement[0].firstChild;m=f.getElementsByClassName("yui-non","span",m)[0];if(this.browser.webkit){this._getSelection().setBaseAndExtent(m,1,m,m.innerText.length);}}B=false;}else{l=this._getSelectedElement();if(this._isElement(l,"li")&&this._isElement(l.parentNode,J)||(this.browser.ie&&this._isElement(this._getRange().parentElement,"li"))||(this.browser.ie&&this._isElement(l,"ul"))||(this.browser.ie&&this._isElement(l,"ol"))){if(this.browser.ie){if((this.browser.ie&&this._isElement(l,"ul"))||(this.browser.ie&&this._isElement(l,"ol"))){l=l.getElementsByTagName("li")[0];}A="";var o=l.parentNode.getElementsByTagName("li");for(var D=0;D<o.length;D++){A+=o[D].innerHTML+"<br>";}var H=this._getDoc().createElement("span");H.innerHTML=A;l.parentNode.parentNode.replaceChild(H,l.parentNode);}else{this.nodeChange();this._getDoc().execCommand(C,"",l.parentNode);this.nodeChange();}B=false;}if(this.browser.opera){var x=this;window.setTimeout(function(){var j=x._getDoc().getElementsByTagName("li");for(var t=0;t<j.length;t++){if(j[t].innerHTML.toLowerCase()=="<br>"){j[t].parentNode.parentNode.removeChild(j[t].parentNode);}}},30);}if(this.browser.ie&&B){var q="";if(this._getRange().html){q="<li>"+this._getRange().html+"</li>";}else{var r=this._getRange().text.split("\n");if(r.length>1){q="";for(var w=0;w<r.length;w++){q+="<li>"+r[w]+"</li>";}}else{var v=this._getRange().text;if(v===""){q='<li id="new_list_item">'+v+"</li>";}else{q="<li>"+v+"</li>";}}}this._getRange().pasteHTML("<"+J+">"+q+"</"+J+">");var h=this._getDoc().getElementById("new_list_item");if(h){var u=this._getDoc().body.createTextRange();u.moveToElementText(h);u.collapse(false);u.select();h.id="";}B=false;}}return B;},cmd_insertorderedlist:function(h){return[this.cmd_list("ol")];},cmd_insertunorderedlist:function(h){return[this.cmd_list("ul")];},cmd_fontname:function(k){var h=true,j=this._getSelectedElement();this.currentFont=k;if(j&&j.tagName&&!this._hasSelection()&&!this._isElement(j,"body")&&!this.get("insert")){YAHOO.util.Dom.setStyle(j,"font-family",k);h=false;}else{if(this.get("insert")&&!this._hasSelection()){var i=this._createInsertElement({fontFamily:k});h=false;}}return[h];},cmd_fontsize:function(k){var h=null,j=true;h=this._getSelectedElement();if(this.browser.webkit){if(this.currentElement[0]){if(h==this.currentElement[0]){j=false;YAHOO.util.Dom.setStyle(h,"fontSize",k);this._selectNode(h);this.currentElement[0]=h;}}}if(j){if(!this._isElement(this._getSelectedElement(),"body")&&(!this._hasSelection())){h=this._getSelectedElement();YAHOO.util.Dom.setStyle(h,"fontSize",k);if(this.get("insert")&&this.browser.ie){var i=this._getRange();i.collapse(false);i.select();}else{this._selectNode(h);}}else{if(this.currentElement&&(this.currentElement.length>0)&&(!this._hasSelection())&&(!this.get("insert"))){YAHOO.util.Dom.setStyle(this.currentElement,"fontSize",k);}else{if(this.get("insert")&&!this._hasSelection()){h=this._createInsertElement({fontSize:k});this.currentElement[0]=h;this._selectNode(this.currentElement[0]);}else{this._createCurrentElement("span",{fontSize:k,fontFamily:h.style.fontFamily,color:h.style.color,backgroundColor:h.style.backgroundColor});this._selectNode(this.currentElement[0]);}}}}return[false];},_swapEl:function(i,h,k){var j=this._getDoc().createElement(h);if(i){j.innerHTML=i.innerHTML;}if(typeof k=="function"){k.call(this,j);}if(i){i.parentNode.replaceChild(j,i);}return j;},_createInsertElement:function(h){this._createCurrentElement("span",h);var i=this.currentElement[0];if(this.browser.webkit){i.innerHTML='<span class="yui-non">&nbsp;</span>';i=i.firstChild;this._getSelection().setBaseAndExtent(i,1,i,i.innerText.length);}else{if(this.browser.ie||this.browser.opera){i.innerHTML="&nbsp;";}}this.focus();this._selectNode(i,true);return i;},_createCurrentElement:function(l,p){l=((l)?l:"a");var x=null,k=[],m=this._getDoc();if(this.currentFont){if(!p){p={};}p.fontFamily=this.currentFont;this.currentFont=null;}this.currentElement=[];var s=function(j,C){var o=null;j=((j)?j:"span");j=j.toLowerCase();switch(j){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":o=m.createElement(j);break;default:o=m.createElement(j);if(j==="span"){YAHOO.util.Dom.addClass(o,"yui-tag-"+j);YAHOO.util.Dom.addClass(o,"yui-tag");o.setAttribute("tag",j);}for(var i in C){if(YAHOO.lang.hasOwnProperty(C,i)){o.style[i]=C[i];}}break;}return o;};if(!this._hasSelection()){if(this._getDoc().queryCommandEnabled("insertimage")){this._getDoc().execCommand("insertimage",false,"yui-tmp-img");var r=this._getDoc().getElementsByTagName("img");for(var w=0;w<r.length;w++){if(r[w].getAttribute("src",2)=="yui-tmp-img"){k=s(l,p);r[w].parentNode.replaceChild(k,r[w]);this.currentElement[this.currentElement.length]=k;}}}else{if(this.currentEvent){x=YAHOO.util.Event.getTarget(this.currentEvent);}else{x=this._getDoc().body;}}if(x){k=s(l,p);if(this._isElement(x,"body")||this._isElement(x,"html")){if(this._isElement(x,"html")){x=this._getDoc().body;}x.appendChild(k);}else{if(x.nextSibling){x.parentNode.insertBefore(k,x.nextSibling);}else{x.parentNode.appendChild(k);}}this.currentElement[this.currentElement.length]=k;this.currentEvent=null;if(this.browser.webkit){this._getSelection().setBaseAndExtent(k,0,k,0);if(this.browser.webkit3){this._getSelection().collapseToStart();}else{this._getSelection().collapse(true);}}}}else{this._setEditorStyle(true);this._getDoc().execCommand("fontname",false,"yui-tmp");var h=[],v,B=["font","span","i","b","u"];if(!this._isElement(this._getSelectedElement(),"body")){B[B.length]=this._getDoc().getElementsByTagName(this._getSelectedElement().tagName);B[B.length]=this._getDoc().getElementsByTagName(this._getSelectedElement().parentNode.tagName);}for(var q=0;q<B.length;q++){var n=this._getDoc().getElementsByTagName(B[q]);for(var A=0;A<n.length;A++){h[h.length]=n[A];}}for(var y=0;y<h.length;y++){if((YAHOO.util.Dom.getStyle(h[y],"font-family")=="yui-tmp")||(h[y].face&&(h[y].face=="yui-tmp"))){if(l!=="span"){k=s(l,p);}else{k=s(h[y].tagName,p);}k.innerHTML=h[y].innerHTML;if(this._isElement(h[y],"ol")||(this._isElement(h[y],"ul"))){var t=h[y].getElementsByTagName("li")[0];h[y].style.fontFamily="inherit";t.style.fontFamily="inherit";k.innerHTML=t.innerHTML;t.innerHTML="";t.appendChild(k);this.currentElement[this.currentElement.length]=k;}else{if(this._isElement(h[y],"li")){h[y].innerHTML="";h[y].appendChild(k);h[y].style.fontFamily="inherit";this.currentElement[this.currentElement.length]=k;}else{if(h[y].parentNode){h[y].parentNode.replaceChild(k,h[y]);this.currentElement[this.currentElement.length]=k;this.currentEvent=null;if(this.browser.webkit){this._getSelection().setBaseAndExtent(k,0,k,0);if(this.browser.webkit3){this._getSelection().collapseToStart();}else{this._getSelection().collapse(true);}}if(this.browser.ie&&p&&p.fontSize){this._getSelection().empty();}if(this.browser.gecko){this._getSelection().collapseToStart();}}}}}}var z=this.currentElement.length;for(var u=0;u<z;u++){if((u+1)!=z){if(this.currentElement[u]&&this.currentElement[u].nextSibling){if(this._isElement(this.currentElement[u],"br")){this.currentElement[this.currentElement.length]=this.currentElement[u].nextSibling;}}}}}},saveHTML:function(){var i=this.cleanHTML();if(this._textarea){this.get("element").value=i;}else{this.get("element").innerHTML=i;}if(this.get("saveEl")!==this.get("element")){var h=this.get("saveEl");if(g.isString(h)){h=f.get(h);}if(h){if(h.tagName.toLowerCase()==="textarea"){h.value=i;}else{h.innerHTML=i;}}}return i;},setEditorHTML:function(i){var h=this._cleanIncomingHTML(i);h=h.replace(/RIGHT_BRACKET/gi,"{");h=h.replace(/LEFT_BRACKET/gi,"}");this._getDoc().body.innerHTML=h;this.nodeChange();},getEditorHTML:function(){try{var h=this._getDoc().body;if(h===null){return null;}return this._getDoc().body.innerHTML;}catch(i){return"";}},show:function(){if(this.browser.gecko){this._setDesignMode("on");this.focus();}if(this.browser.webkit){var h=this;window.setTimeout(function(){h._setInitialContent.call(h);},10);}if(this.currentWindow){this.closeWindow();}this.get("iframe").setStyle("position","static");this.get("iframe").setStyle("left","");},hide:function(){if(this.currentWindow){this.closeWindow();}if(this._fixNodesTimer){clearTimeout(this._fixNodesTimer);this._fixNodesTimer=null;}if(this._nodeChangeTimer){clearTimeout(this._nodeChangeTimer);this._nodeChangeTimer=null;}this._lastNodeChange=0;this.get("iframe").setStyle("position","absolute");this.get("iframe").setStyle("left","-9999px");},_cleanIncomingHTML:function(h){h=h.replace(/{/gi,"RIGHT_BRACKET");h=h.replace(/}/gi,"LEFT_BRACKET");h=h.replace(/<strong([^>]*)>/gi,"<b$1>");h=h.replace(/<\/strong>/gi,"</b>");h=h.replace(/<embed([^>]*)>/gi,"<YUI_EMBED$1>");h=h.replace(/<\/embed>/gi,"</YUI_EMBED>");h=h.replace(/<em([^>]*)>/gi,"<i$1>");h=h.replace(/<\/em>/gi,"</i>");h=h.replace(/_moz_dirty=""/gi,"");h=h.replace(/<YUI_EMBED([^>]*)>/gi,"<embed$1>");h=h.replace(/<\/YUI_EMBED>/gi,"</embed>");if(this.get("plainText")){h=h.replace(/\n/g,"<br>").replace(/\r/g,"<br>");h=h.replace(/  /gi,"&nbsp;&nbsp;");h=h.replace(/\t/gi,"&nbsp;&nbsp;&nbsp;&nbsp;");}h=h.replace(/<script([^>]*)>/gi,"<bad>");h=h.replace(/<\/script([^>]*)>/gi,"</bad>");h=h.replace(/&lt;script([^>]*)&gt;/gi,"<bad>");h=h.replace(/&lt;\/script([^>]*)&gt;/gi,"</bad>");h=h.replace(/\r\n/g,"<YUI_LF>").replace(/\n/g,"<YUI_LF>").replace(/\r/g,"<YUI_LF>");h=h.replace(new RegExp("<bad([^>]*)>(.*?)</bad>","gi"),"");h=h.replace(/<YUI_LF>/g,"\n");return h;},cleanHTML:function(k){if(!k){k=this.getEditorHTML();}var i=this.get("markup");k=this.pre_filter_linebreaks(k,i);k=this.filter_msword(k);k=k.replace(/<img([^>]*)\/>/gi,"<YUI_IMG$1>");k=k.replace(/<img([^>]*)>/gi,"<YUI_IMG$1>");k=k.replace(/<input([^>]*)\/>/gi,"<YUI_INPUT$1>");k=k.replace(/<input([^>]*)>/gi,"<YUI_INPUT$1>");k=k.replace(/<ul([^>]*)>/gi,"<YUI_UL$1>");k=k.replace(/<\/ul>/gi,"</YUI_UL>");k=k.replace(/<blockquote([^>]*)>/gi,"<YUI_BQ$1>");k=k.replace(/<\/blockquote>/gi,"</YUI_BQ>");k=k.replace(/<embed([^>]*)>/gi,"<YUI_EMBED$1>");k=k.replace(/<\/embed>/gi,"</YUI_EMBED>");if((i=="semantic")||(i=="xhtml")){k=k.replace(/<i(\s+[^>]*)?>/gi,"<em$1>");k=k.replace(/<\/i>/gi,"</em>");k=k.replace(/<b(\s+[^>]*)?>/gi,"<strong$1>");k=k.replace(/<\/b>/gi,"</strong>");}k=k.replace(/_moz_dirty=""/gi,"");k=k.replace(/<strike/gi,'<span style="text-decoration: line-through;"');k=k.replace(/\/strike>/gi,"/span>");if(this.browser.ie){k=k.replace(/text-decoration/gi,"text-decoration");k=k.replace(/font-weight/gi,"font-weight");k=k.replace(/_width="([^>]*)"/gi,"");k=k.replace(/_height="([^>]*)"/gi,"");var j=this._baseHREF.replace(/\//gi,"\\/"),l=new RegExp('src="'+j,"gi");k=k.replace(l,'src="');}k=k.replace(/<font/gi,"<font");k=k.replace(/<\/font>/gi,"</font>");k=k.replace(/<span/gi,"<span");k=k.replace(/<\/span>/gi,"</span>");if((i=="semantic")||(i=="xhtml")||(i=="css")){k=k.replace(new RegExp('<font([^>]*)face="([^>]*)">(.*?)</font>',"gi"),'<span $1 style="font-family: $2;">$3</span>');k=k.replace(/<u/gi,'<span style="text-decoration: underline;"');if(this.browser.webkit){k=k.replace(new RegExp('<span class="Apple-style-span" style="font-weight: bold;">([^>]*)</span>',"gi"),"<strong>$1</strong>");k=k.replace(new RegExp('<span class="Apple-style-span" style="font-style: italic;">([^>]*)</span>',"gi"),"<em>$1</em>");}k=k.replace(/\/u>/gi,"/span>");if(i=="css"){k=k.replace(/<em([^>]*)>/gi,"<i$1>");k=k.replace(/<\/em>/gi,"</i>");k=k.replace(/<strong([^>]*)>/gi,"<b$1>");k=k.replace(/<\/strong>/gi,"</b>");k=k.replace(/<b/gi,'<span style="font-weight: bold;"');k=k.replace(/\/b>/gi,"/span>");k=k.replace(/<i/gi,'<span style="font-style: italic;"');k=k.replace(/\/i>/gi,"/span>");}k=k.replace(/  /gi," ");}else{k=k.replace(/<u/gi,"<u");k=k.replace(/\/u>/gi,"/u>");}k=k.replace(/<ol([^>]*)>/gi,"<ol$1>");k=k.replace(/\/ol>/gi,"/ol>");k=k.replace(/<li/gi,"<li");k=k.replace(/\/li>/gi,"/li>");k=this.filter_safari(k);k=this.filter_internals(k);k=this.filter_all_rgb(k);k=this.post_filter_linebreaks(k,i);if(i=="xhtml"){k=k.replace(/<YUI_IMG([^>]*)>/g,"<img $1 />");k=k.replace(/<YUI_INPUT([^>]*)>/g,"<input $1 />");}else{k=k.replace(/<YUI_IMG([^>]*)>/g,"<img $1>");k=k.replace(/<YUI_INPUT([^>]*)>/g,"<input $1>");}k=k.replace(/<YUI_UL([^>]*)>/g,"<ul$1>");k=k.replace(/<\/YUI_UL>/g,"</ul>");k=this.filter_invalid_lists(k);k=k.replace(/<YUI_BQ([^>]*)>/g,"<blockquote$1>");k=k.replace(/<\/YUI_BQ>/g,"</blockquote>");k=k.replace(/<YUI_EMBED([^>]*)>/g,"<embed$1>");k=k.replace(/<\/YUI_EMBED>/g,"</embed>");k=k.replace(/ &amp; /gi," YUI_AMP ");k=k.replace(/ &amp;/gi," YUI_AMP_F ");k=k.replace(/&amp; /gi," YUI_AMP_R ");k=k.replace(/&amp;/gi,"&");k=k.replace(/ YUI_AMP /gi," &amp; ");k=k.replace(/ YUI_AMP_F /gi," &amp;");k=k.replace(/ YUI_AMP_R /gi,"&amp; ");k=YAHOO.lang.trim(k);if(this.get("removeLineBreaks")){k=k.replace(/\n/g,"").replace(/\r/g,"");k=k.replace(/  /gi," ");}for(var h in this.invalidHTML){if(YAHOO.lang.hasOwnProperty(this.invalidHTML,h)){if(g.isObject(h)&&h.keepContents){k=k.replace(new RegExp("<"+h+"([^>]*)>(.*?)</"+h+">","gi"),"$1");}else{k=k.replace(new RegExp("<"+h+"([^>]*)>(.*?)</"+h+">","gi"),"");}}}this.fireEvent("cleanHTML",{type:"cleanHTML",target:this,html:k});return k;},filter_msword:function(h){if(!this.get("filterWord")){return h;}h=h.replace(/<o:p>\s*<\/o:p>/g,"");h=h.replace(/<o:p>[\s\S]*?<\/o:p>/g,"&nbsp;");h=h.replace(/<w:[^>]*>[\s\S]*?<\/w:[^>]*>/gi,"");h=h.replace(/\s*mso-[^:]+:[^;"]+;?/gi,"");h=h.replace(/\s*MARGIN: 0cm 0cm 0pt\s*;/gi,"");h=h.replace(/\s*MARGIN: 0cm 0cm 0pt\s*"/gi,'"');h=h.replace(/\s*TEXT-INDENT: 0cm\s*;/gi,"");h=h.replace(/\s*TEXT-INDENT: 0cm\s*"/gi,'"');h=h.replace(/\s*PAGE-BREAK-BEFORE: [^\s;]+;?"/gi,'"');h=h.replace(/\s*FONT-VARIANT: [^\s;]+;?"/gi,'"');h=h.replace(/\s*tab-stops:[^;"]*;?/gi,"");h=h.replace(/\s*tab-stops:[^"]*/gi,"");h=h.replace(/<\\?\?xml[^>]*>/gi,"");h=h.replace(/<(\w[^>]*) lang=([^ |>]*)([^>]*)/gi,"<$1$3");h=h.replace(/<(\w[^>]*) language=([^ |>]*)([^>]*)/gi,"<$1$3");h=h.replace(/<(\w[^>]*) onmouseover="([^\"]*)"([^>]*)/gi,"<$1$3");h=h.replace(/<(\w[^>]*) onmouseout="([^\"]*)"([^>]*)/gi,"<$1$3");return h;},filter_invalid_lists:function(h){h=h.replace(/<\/li>\n/gi,"</li>");h=h.replace(/<\/li><ol>/gi,"</li><li><ol>");h=h.replace(/<\/ol>/gi,"</ol></li>");h=h.replace(/<\/ol><\/li>\n/gi,"</ol>");h=h.replace(/<\/li><ul>/gi,"</li><li><ul>");h=h.replace(/<\/ul>/gi,"</ul></li>");h=h.replace(/<\/ul><\/li>\n?/gi,"</ul>");h=h.replace(/<\/li>/gi,"</li>");h=h.replace(/<\/ol>/gi,"</ol>");h=h.replace(/<ol>/gi,"<ol>");h=h.replace(/<ul>/gi,"<ul>");return h;},filter_safari:function(h){if(this.browser.webkit){h=h.replace(/<span class="Apple-tab-span" style="white-space:pre">([^>])<\/span>/gi,"&nbsp;&nbsp;&nbsp;&nbsp;");h=h.replace(/Apple-style-span/gi,"");h=h.replace(/style="line-height: normal;"/gi,"");h=h.replace(/yui-wk-div/gi,"");h=h.replace(/yui-wk-p/gi,"");h=h.replace(/<li><\/li>/gi,"");h=h.replace(/<li> <\/li>/gi,"");h=h.replace(/<li>  <\/li>/gi,"");if(this.get("ptags")){h=h.replace(/<div([^>]*)>/g,"<p$1>");h=h.replace(/<\/div>/gi,"</p>");}else{h=h.replace(/<div([^>]*)>([ tnr]*)<\/div>/gi,"<br>");h=h.replace(/<\/div>/gi,"");}}return h;},filter_internals:function(h){h=h.replace(/\r/g,"");h=h.replace(/<\/?(body|head|html)[^>]*>/gi,"");h=h.replace(/<YUI_BR><\/li>/gi,"</li>");h=h.replace(/yui-tag-span/gi,"");h=h.replace(/yui-tag/gi,"");h=h.replace(/yui-non/gi,"");h=h.replace(/yui-img/gi,"");h=h.replace(/ tag="span"/gi,"");h=h.replace(/ class=""/gi,"");h=h.replace(/ style=""/gi,"");h=h.replace(/ class=" "/gi,"");h=h.replace(/ class="  "/gi,"");h=h.replace(/ target=""/gi,"");h=h.replace(/ title=""/gi,"");if(this.browser.ie){h=h.replace(/ class= /gi,"");h=h.replace(/ class= >/gi,"");}return h;},filter_all_rgb:function(m){var l=new RegExp("rgb\\s*?\\(\\s*?([0-9]+).*?,\\s*?([0-9]+).*?,\\s*?([0-9]+).*?\\)","gi");var h=m.match(l);if(g.isArray(h)){for(var k=0;k<h.length;k++){var j=this.filter_rgb(h[k]);m=m.replace(h[k].toString(),j);}}return m;},filter_rgb:function(j){if(j.toLowerCase().indexOf("rgb")!=-1){var m=new RegExp("(.*?)rgb\\s*?\\(\\s*?([0-9]+).*?,\\s*?([0-9]+).*?,\\s*?([0-9]+).*?\\)(.*?)","gi");var i=j.replace(m,"$1,$2,$3,$4,$5").split(",");if(i.length==5){var l=parseInt(i[1],10).toString(16);var k=parseInt(i[2],10).toString(16);var h=parseInt(i[3],10).toString(16);l=l.length==1?"0"+l:l;k=k.length==1?"0"+k:k;h=h.length==1?"0"+h:h;j="#"+l+k+h;}}return j;},pre_filter_linebreaks:function(i,h){if(this.browser.webkit){i=i.replace(/<br class="khtml-block-placeholder">/gi,"<YUI_BR>");i=i.replace(/<br class="webkit-block-placeholder">/gi,"<YUI_BR>");}i=i.replace(/<br>/gi,"<YUI_BR>");i=i.replace(/<br (.*?)>/gi,"<YUI_BR>");i=i.replace(/<br\/>/gi,"<YUI_BR>");i=i.replace(/<br \/>/gi,"<YUI_BR>");i=i.replace(/<div><YUI_BR><\/div>/gi,"<YUI_BR>");i=i.replace(/<p>(&nbsp;|&#160;)<\/p>/g,"<YUI_BR>");i=i.replace(/<p><br>&nbsp;<\/p>/gi,"<YUI_BR>");i=i.replace(/<p>&nbsp;<\/p>/gi,"<YUI_BR>");i=i.replace(/<YUI_BR>$/,"");i=i.replace(/<YUI_BR><\/p>/g,"</p>");if(this.browser.ie){i=i.replace(/&nbsp;&nbsp;&nbsp;&nbsp;/g,"\t");}return i;},post_filter_linebreaks:function(i,h){if(h=="xhtml"){i=i.replace(/<YUI_BR>/g,"<br />");}else{i=i.replace(/<YUI_BR>/g,"<br>");}return i;},clearEditorDoc:function(){this._getDoc().body.innerHTML="&nbsp;";},openWindow:function(h){},moveWindow:function(){},_closeWindow:function(){},closeWindow:function(){this.toolbar.resetAllButtons();this.focus();},destroy:function(){if(this._nodeChangeDelayTimer){clearTimeout(this._nodeChangeDelayTimer);}this.hide();if(this.resize){this.resize.destroy();}if(this.dd){this.dd.unreg();}if(this.get("panel")){this.get("panel").destroy();}this.saveHTML();this.toolbar.destroy();this.setStyle("visibility","visible");this.setStyle("position","static");this.setStyle("top","");this.setStyle("left","");var h=this.get("element");this.get("element_cont").get("parentNode").replaceChild(h,this.get("element_cont").get("element"));this.get("element_cont").get("element").innerHTML="";this.set("handleSubmit",false);return true;},toString:function(){var h="SimpleEditor";if(this.get&&this.get("element_cont")){h="SimpleEditor (#"+this.get("element_cont").get("id")+")"+((this.get("disabled")?" Disabled":""));}return h;}});YAHOO.widget.EditorInfo={_instances:{},blankImage:"",window:{},panel:null,getEditorById:function(h){if(!YAHOO.lang.isString(h)){h=h.id;}if(this._instances[h]){return this._instances[h];}return false;},saveAll:function(k){var j,l,h=YAHOO.widget.EditorInfo._instances;if(k){for(j in h){if(g.hasOwnProperty(h,j)){l=h[j];if(l.get("element").form&&(l.get("element").form==k)){l.saveHTML();}}}}else{for(j in h){if(g.hasOwnProperty(h,j)){h[j].saveHTML();}}}},toString:function(){var h=0;for(var j in this._instances){if(g.hasOwnProperty(this._instances,j)){h++;}}return"Editor Info ("+h+" registered intance"+((h>1)?"s":"")+")";}};})();(function(){var d=YAHOO.util.Dom,a=YAHOO.util.Event,e=YAHOO.lang,c=YAHOO.widget.Toolbar;YAHOO.widget.Editor=function(g,f){YAHOO.widget.Editor.superclass.constructor.call(this,g,f);};YAHOO.extend(YAHOO.widget.Editor,YAHOO.widget.SimpleEditor,{_undoCache:null,_undoLevel:null,_hasUndoLevel:function(){return((this._undoCache.length>1)&&this._undoLevel);},_undoNodeChange:function(){var f=this.toolbar.getButtonByValue("undo"),g=this.toolbar.getButtonByValue("redo");if(f&&g){if(this._hasUndoLevel()){this.toolbar.enableButton(f);}if(this._undoLevel<this._undoCache.length){this.toolbar.enableButton(g);}}this._lastCommand=null;},_checkUndo:function(){var f=this._undoCache.length,h=[];if(f>=this.get("maxUndo")){for(var g=(f-this.get("maxUndo"));g<f;g++){h.push(this._undoCache[g]);}this._undoCache=h;}},_putUndo:function(g){if(this._undoLevel===this._undoCache.length){this._undoCache.push(g);this._undoLevel=this._undoCache.length;}else{var g=this.getEditorHTML();var f=this._undoCache[this._undoLevel];if(f){if(g!==f){this._undoCache=[];this._undoLevel=0;}}}},_getUndo:function(f){this._undoLevel=f;return this._undoCache[f];},_storeUndo:function(){if(this._lastCommand==="undo"||this._lastCommand==="redo"){return false;}if(!this._undoCache){this._undoCache=[];this._undoLevel=0;}this._checkUndo();var g=this.getEditorHTML();var f=this._undoCache[this._undoLevel-1];if(f){if(g!==f){this._putUndo(g);}}else{this._putUndo(g);}this._undoNodeChange();},STR_BEFORE_EDITOR:"This text field can contain stylized text and graphics. To cycle through all formatting options, use the keyboard shortcut Control + Shift + T to place focus on the toolbar and navigate between option heading names. <h4>Common formatting keyboard shortcuts:</h4><ul><li>Control Shift B sets text to bold</li> <li>Control Shift I sets text to italic</li> <li>Control Shift U underlines text</li> <li>Control Shift [ aligns text left</li> <li>Control Shift | centers text</li> <li>Control Shift ] aligns text right</li> <li>Control Shift L adds an HTML link</li> <li>To exit this text editor use the keyboard shortcut Control + Shift + ESC.</li></ul>",STR_CLOSE_WINDOW:"Close Window",STR_CLOSE_WINDOW_NOTE:"To close this window use the Control + Shift + W key",STR_IMAGE_PROP_TITLE:"Image Options",STR_IMAGE_TITLE:"Description",STR_IMAGE_SIZE:"Size",STR_IMAGE_ORIG_SIZE:"Original Size",STR_IMAGE_COPY:'<span class="tip"><span class="icon icon-info"></span><strong>Note:</strong>To move this image just highlight it, cut, and paste where ever you\'d like.</span>',STR_IMAGE_PADDING:"Padding",STR_IMAGE_BORDER:"Border",STR_IMAGE_BORDER_SIZE:"Border Size",STR_IMAGE_BORDER_TYPE:"Border Type",STR_IMAGE_TEXTFLOW:"Text Flow",STR_LOCAL_FILE_WARNING:'<span class="tip"><span class="icon icon-warn"></span><strong>Note:</strong>This image/link points to a file on your computer and will not be accessible to others on the internet.</span>',STR_LINK_PROP_TITLE:"Link Options",STR_LINK_PROP_REMOVE:"Remove link from text",STR_LINK_NEW_WINDOW:"Open in a new window.",STR_LINK_TITLE:"Description",STR_NONE:"none",CLASS_LOCAL_FILE:"warning-localfile",CLASS_HIDDEN:"yui-hidden",init:function(g,f){this._windows={};if(!this._defaultToolbar){this._defaultToolbar={collapse:true,titlebar:"Text Editing Tools",draggable:false,buttonType:"advanced",buttons:[{group:"fontstyle",label:"Font Name and Size",buttons:[{type:"select",label:"Arial",value:"fontname",disabled:true,menu:[{text:"Arial",checked:true},{text:"Arial Black"},{text:"Comic Sans MS"},{text:"Courier New"},{text:"Lucida Console"},{text:"Tahoma"},{text:"Times New Roman"},{text:"Trebuchet MS"},{text:"Verdana"}]},{type:"spin",label:"13",value:"fontsize",range:[9,75],disabled:true}]},{type:"separator"},{group:"textstyle",label:"Font Style",buttons:[{type:"push",label:"Bold CTRL + SHIFT + B",value:"bold"},{type:"push",label:"Italic CTRL + SHIFT + I",value:"italic"},{type:"push",label:"Underline CTRL + SHIFT + U",value:"underline"},{type:"separator"},{type:"push",label:"Subscript",value:"subscript",disabled:true},{type:"push",label:"Superscript",value:"superscript",disabled:true}]},{type:"separator"},{group:"textstyle2",label:"&nbsp;",buttons:[{type:"color",label:"Font Color",value:"forecolor",disabled:true},{type:"color",label:"Background Color",value:"backcolor",disabled:true},{type:"separator"},{type:"push",label:"Remove Formatting",value:"removeformat",disabled:true},{type:"push",label:"Show/Hide Hidden Elements",value:"hiddenelements"}]},{type:"separator"},{group:"undoredo",label:"Undo/Redo",buttons:[{type:"push",label:"Undo",value:"undo",disabled:true},{type:"push",label:"Redo",value:"redo",disabled:true}]},{type:"separator"},{group:"alignment",label:"Alignment",buttons:[{type:"push",label:"Align Left CTRL + SHIFT + [",value:"justifyleft"},{type:"push",label:"Align Center CTRL + SHIFT + |",value:"justifycenter"},{type:"push",label:"Align Right CTRL + SHIFT + ]",value:"justifyright"},{type:"push",label:"Justify",value:"justifyfull"}]},{type:"separator"},{group:"parastyle",label:"Paragraph Style",buttons:[{type:"select",label:"Normal",value:"heading",disabled:true,menu:[{text:"Normal",value:"none",checked:true},{text:"Header 1",value:"h1"},{text:"Header 2",value:"h2"},{text:"Header 3",value:"h3"},{text:"Header 4",value:"h4"},{text:"Header 5",value:"h5"},{text:"Header 6",value:"h6"}]}]},{type:"separator"},{group:"indentlist2",label:"Indenting and Lists",buttons:[{type:"push",label:"Indent",value:"indent",disabled:true},{type:"push",label:"Outdent",value:"outdent",disabled:true},{type:"push",label:"Create an Unordered List",value:"insertunorderedlist"},{type:"push",label:"Create an Ordered List",value:"insertorderedlist"}]},{type:"separator"},{group:"insertitem",label:"Insert Item",buttons:[{type:"push",label:"HTML Link CTRL + SHIFT + L",value:"createlink",disabled:true},{type:"push",label:"Insert Image",value:"insertimage"}]}]};}if(!this._defaultImageToolbarConfig){this._defaultImageToolbarConfig={buttonType:this._defaultToolbar.buttonType,buttons:[{group:"textflow",label:this.STR_IMAGE_TEXTFLOW+":",buttons:[{type:"push",label:"Left",value:"left"},{type:"push",label:"Inline",value:"inline"},{type:"push",label:"Block",value:"block"},{type:"push",label:"Right",value:"right"}]},{type:"separator"},{group:"padding",label:this.STR_IMAGE_PADDING+":",buttons:[{type:"spin",label:"0",value:"padding",range:[0,50]}]},{type:"separator"},{group:"border",label:this.STR_IMAGE_BORDER+":",buttons:[{type:"select",label:this.STR_IMAGE_BORDER_SIZE,value:"bordersize",menu:[{text:"none",value:"0",checked:true},{text:"1px",value:"1"},{text:"2px",value:"2"},{text:"3px",value:"3"},{text:"4px",value:"4"},{text:"5px",value:"5"}]},{type:"select",label:this.STR_IMAGE_BORDER_TYPE,value:"bordertype",disabled:true,menu:[{text:"Solid",value:"solid",checked:true},{text:"Dashed",value:"dashed"},{text:"Dotted",value:"dotted"}]},{type:"color",label:"Border Color",value:"bordercolor",disabled:true}]}]};}YAHOO.widget.Editor.superclass.init.call(this,g,f);},_render:function(){YAHOO.widget.Editor.superclass._render.apply(this,arguments);var f=this;window.setTimeout(function(){f._renderPanel.call(f);},800);},initAttributes:function(f){YAHOO.widget.Editor.superclass.initAttributes.call(this,f);this.setAttributeConfig("localFileWarning",{value:f.locaFileWarning||true});this.setAttributeConfig("hiddencss",{value:f.hiddencss||".yui-hidden font, .yui-hidden strong, .yui-hidden b, .yui-hidden em, .yui-hidden i, .yui-hidden u, .yui-hidden div,.yui-hidden p,.yui-hidden span,.yui-hidden img, .yui-hidden ul, .yui-hidden ol, .yui-hidden li, .yui-hidden table { border: 1px dotted #ccc; } .yui-hidden .yui-non { border: none; } .yui-hidden img { padding: 2px; }",writeOnce:true});},_windows:null,_defaultImageToolbar:null,_defaultImageToolbarConfig:null,_fixNodes:function(){YAHOO.widget.Editor.superclass._fixNodes.call(this);try{var i="";var k=this._getDoc().getElementsByTagName("img");for(var g=0;g<k.length;g++){if(k[g].getAttribute("href",2)){i=k[g].getAttribute("src",2);if(this._isLocalFile(i)){d.addClass(k[g],this.CLASS_LOCAL_FILE);}else{d.removeClass(k[g],this.CLASS_LOCAL_FILE);}}}var h=this._getDoc().body.getElementsByTagName("a");for(var f=0;f<h.length;f++){if(h[f].getAttribute("href",2)){i=h[f].getAttribute("href",2);if(this._isLocalFile(i)){d.addClass(h[f],this.CLASS_LOCAL_FILE);}else{d.removeClass(h[f],this.CLASS_LOCAL_FILE);}}}}catch(j){}},_disabled:["createlink","forecolor","backcolor","fontname","fontsize","superscript","subscript","removeformat","heading","indent"],_alwaysDisabled:{outdent:true},_alwaysEnabled:{hiddenelements:true},_handleKeyDown:function(h){YAHOO.widget.Editor.superclass._handleKeyDown.call(this,h);var g=false,i=null,f=false;switch(h.keyCode){case this._keyMap.JUSTIFY_LEFT.key:if(this._checkKey(this._keyMap.JUSTIFY_LEFT,h)){i="justifyleft";g=true;}break;case this._keyMap.JUSTIFY_CENTER.key:if(this._checkKey(this._keyMap.JUSTIFY_CENTER,h)){i="justifycenter";g=true;}break;case 221:case this._keyMap.JUSTIFY_RIGHT.key:if(this._checkKey(this._keyMap.JUSTIFY_RIGHT,h)){i="justifyright";g=true;}break;}if(g&&i){this.execCommand(i,null);a.stopEvent(h);this.nodeChange();}},_renderCreateLinkWindow:function(){var i='<label for="'+this.get("id")+'_createlink_url"><strong>'+this.STR_LINK_URL+':</strong> <input type="text" name="'+this.get("id")+'_createlink_url" id="'+this.get("id")+'_createlink_url" value=""></label>';i+='<label for="'+this.get("id")+'_createlink_target"><strong>&nbsp;</strong><input type="checkbox" name="'+this.get("id")+'_createlink_target" id="'+this.get("id")+'_createlink_target" value="_blank" class="createlink_target"> '+this.STR_LINK_NEW_WINDOW+"</label>";i+='<label for="'+this.get("id")+'_createlink_title"><strong>'+this.STR_LINK_TITLE+':</strong> <input type="text" name="'+this.get("id")+'_createlink_title" id="'+this.get("id")+'_createlink_title" value=""></label>';var f=document.createElement("div");f.innerHTML=i;var h=document.createElement("div");h.className="removeLink";var g=document.createElement("a");g.href="#";g.innerHTML=this.STR_LINK_PROP_REMOVE;g.title=this.STR_LINK_PROP_REMOVE;a.on(g,"click",function(j){a.stopEvent(j);this.unsubscribeAll("afterExecCommand");this.execCommand("unlink");this.closeWindow();},this,true);h.appendChild(g);f.appendChild(h);this._windows.createlink={};this._windows.createlink.body=f;a.on(f,"keyup",function(j){a.stopPropagation(j);});this.get("panel").editor_form.appendChild(f);this.fireEvent("windowCreateLinkRender",{type:"windowCreateLinkRender",panel:this.get("panel"),body:f});return f;},_handleCreateLinkClick:function(){var f=this._getSelectedElement();if(this._isElement(f,"img")){this.STOP_EXEC_COMMAND=true;this.currentElement[0]=f;this.toolbar.fireEvent("insertimageClick",{type:"insertimageClick",target:this.toolbar});this.fireEvent("afterExecCommand",{type:"afterExecCommand",target:this});return false;}if(this.get("limitCommands")){if(!this.toolbar.getButtonByValue("createlink")){return false;}}this.on("afterExecCommand",function(){var l=new YAHOO.widget.EditorWindow("createlink",{width:"350px"});var j=this.currentElement[0],i="",m="",k="",h=false;if(j){l.el=j;if(j.getAttribute("href",2)!==null){i=j.getAttribute("href",2);if(this._isLocalFile(i)){l.setFooter(this.STR_LOCAL_FILE_WARNING);h=true;}else{l.setFooter(" ");}}if(j.getAttribute("title")!==null){m=j.getAttribute("title");}if(j.getAttribute("target")!==null){k=j.getAttribute("target");}}var g=null;if(this._windows.createlink&&this._windows.createlink.body){g=this._windows.createlink.body;}else{g=this._renderCreateLinkWindow();}l.setHeader(this.STR_LINK_PROP_TITLE);l.setBody(g);a.purgeElement(this.get("id")+"_createlink_url");d.get(this.get("id")+"_createlink_url").value=i;d.get(this.get("id")+"_createlink_title").value=m;d.get(this.get("id")+"_createlink_target").checked=((k)?true:false);a.onAvailable(this.get("id")+"_createlink_url",function(){var n=this.get("id");window.setTimeout(function(){try{YAHOO.util.Dom.get(n+"_createlink_url").focus();}catch(o){}},50);if(this._isLocalFile(i)){d.addClass(this.get("id")+"_createlink_url","warning");this.get("panel").setFooter(this.STR_LOCAL_FILE_WARNING);}else{d.removeClass(this.get("id")+"_createlink_url","warning");this.get("panel").setFooter(" ");}a.on(this.get("id")+"_createlink_url","blur",function(){var o=d.get(this.get("id")+"_createlink_url");if(this._isLocalFile(o.value)){d.addClass(o,"warning");this.get("panel").setFooter(this.STR_LOCAL_FILE_WARNING);}else{d.removeClass(o,"warning");this.get("panel").setFooter(" ");}},this,true);},this,true);this.openWindow(l);});},_handleCreateLinkWindowClose:function(){var h=d.get(this.get("id")+"_createlink_url"),j=d.get(this.get("id")+"_createlink_target"),l=d.get(this.get("id")+"_createlink_title"),i=arguments[0].win.el,f=i;if(h&&h.value){var k=h.value;if((k.indexOf("://")==-1)&&(k.substring(0,1)!="/")&&(k.substring(0,6).toLowerCase()!="mailto")){if((k.indexOf("@")!=-1)&&(k.substring(0,6).toLowerCase()!="mailto")){k="mailto:"+k;}else{if(k.substring(0,1)!="#"){k="http://"+k;}}}i.setAttribute("href",k);if(j.checked){i.setAttribute("target",j.value);}else{i.setAttribute("target","");}i.setAttribute("title",((l.value)?l.value:""));}else{var g=this._getDoc().createElement("span");g.innerHTML=i.innerHTML;d.addClass(g,"yui-non");i.parentNode.replaceChild(g,i);}d.removeClass(h,"warning");d.get(this.get("id")+"_createlink_url").value="";d.get(this.get("id")+"_createlink_title").value="";d.get(this.get("id")+"_createlink_target").checked=false;this.nodeChange();this.currentElement=[];},_renderInsertImageWindow:function(){var h=this.currentElement[0];var n='<label for="'+this.get("id")+'_insertimage_url"><strong>'+this.STR_IMAGE_URL+':</strong> <input type="text" id="'+this.get("id")+'_insertimage_url" value="" size="40"></label>';var l=document.createElement("div");l.innerHTML=n;var k=document.createElement("div");k.id=this.get("id")+"_img_toolbar";l.appendChild(k);var j='<label for="'+this.get("id")+'_insertimage_title"><strong>'+this.STR_IMAGE_TITLE+':</strong> <input type="text" id="'+this.get("id")+'_insertimage_title" value="" size="40"></label>';j+='<label for="'+this.get("id")+'_insertimage_link"><strong>'+this.STR_LINK_URL+':</strong> <input type="text" name="'+this.get("id")+'_insertimage_link" id="'+this.get("id")+'_insertimage_link" value=""></label>';j+='<label for="'+this.get("id")+'_insertimage_target"><strong>&nbsp;</strong><input type="checkbox" name="'+this.get("id")+'_insertimage_target_" id="'+this.get("id")+'_insertimage_target" value="_blank" class="insertimage_target"> '+this.STR_LINK_NEW_WINDOW+"</label>";var f=document.createElement("div");f.innerHTML=j;l.appendChild(f);var g={};e.augmentObject(g,this._defaultImageToolbarConfig);var i=new YAHOO.widget.Toolbar(k,g);i.editor_el=h;this._defaultImageToolbar=i;var p=i.get("cont");var m=document.createElement("div");m.className="yui-toolbar-group yui-toolbar-group-height-width height-width";m.innerHTML="<h3>"+this.STR_IMAGE_SIZE+":</h3>";m.innerHTML+='<span tabIndex="-1"><input type="text" size="3" value="" id="'+this.get("id")+'_insertimage_width"> x <input type="text" size="3" value="" id="'+this.get("id")+'_insertimage_height"></span>';p.insertBefore(m,p.firstChild);a.onAvailable(this.get("id")+"_insertimage_width",function(){a.on(this.get("id")+"_insertimage_width","blur",function(){var o=parseInt(d.get(this.get("id")+"_insertimage_width").value,10);if(o>5){this._defaultImageToolbar.editor_el.style.width=o+"px";}},this,true);},this,true);a.onAvailable(this.get("id")+"_insertimage_height",function(){a.on(this.get("id")+"_insertimage_height","blur",function(){var o=parseInt(d.get(this.get("id")+"_insertimage_height").value,10);if(o>5){this._defaultImageToolbar.editor_el.style.height=o+"px";}},this,true);},this,true);i.on("colorPickerClicked",function(v){var r="1",u="solid",q="black",t=this._defaultImageToolbar.editor_el;if(t.style.borderLeftWidth){r=parseInt(t.style.borderLeftWidth,10);}if(t.style.borderLeftStyle){u=t.style.borderLeftStyle;}if(t.style.borderLeftColor){q=t.style.borderLeftColor;}var s=r+"px "+u+" #"+v.color;t.style.border=s;},this,true);i.on("buttonClick",function(x){var v=x.button.value,u=this._defaultImageToolbar.editor_el,t="";if(x.button.menucmd){v=x.button.menucmd;}var r="1",s="solid",q="black";if(u.style.borderLeftWidth){r=parseInt(u.style.borderLeftWidth,10);}if(u.style.borderLeftStyle){s=u.style.borderLeftStyle;}if(u.style.borderLeftColor){q=u.style.borderLeftColor;}switch(v){case"bordersize":if(this.browser.webkit&&this._lastImage){d.removeClass(this._lastImage,"selected");this._lastImage=null;}t=parseInt(x.button.value,10)+"px "+s+" "+q;u.style.border=t;if(parseInt(x.button.value,10)>0){i.enableButton("bordertype");i.enableButton("bordercolor");}else{i.disableButton("bordertype");i.disableButton("bordercolor");}break;case"bordertype":if(this.browser.webkit&&this._lastImage){d.removeClass(this._lastImage,"selected");this._lastImage=null;}t=r+"px "+x.button.value+" "+q;u.style.border=t;break;case"right":case"left":i.deselectAllButtons();u.style.display="";u.align=x.button.value;break;case"inline":i.deselectAllButtons();u.style.display="";u.align="";break;case"block":i.deselectAllButtons();u.style.display="block";u.align="center";break;case"padding":var w=i.getButtonById(x.button.id);u.style.margin=w.get("label")+"px";break;}i.selectButton(x.button.value);if(v!=="padding"){this.moveWindow();}},this,true);if(this.get("localFileWarning")){a.on(this.get("id")+"_insertimage_link","blur",function(){var o=d.get(this.get("id")+"_insertimage_link");if(this._isLocalFile(o.value)){d.addClass(o,"warning");this.get("panel").setFooter(this.STR_LOCAL_FILE_WARNING);}else{d.removeClass(o,"warning");this.get("panel").setFooter(" ");if((this.browser.webkit&&!this.browser.webkit3||this.browser.air)||this.browser.opera){this.get("panel").setFooter(this.STR_IMAGE_COPY);}}},this,true);}a.on(this.get("id")+"_insertimage_url","blur",function(){var r=d.get(this.get("id")+"_insertimage_url"),s=this.currentElement[0];if(r.value&&s){if(r.value==s.getAttribute("src",2)){return false;}}if(this._isLocalFile(r.value)){d.addClass(r,"warning");this.get("panel").setFooter(this.STR_LOCAL_FILE_WARNING);}else{if(this.currentElement[0]){d.removeClass(r,"warning");this.get("panel").setFooter(" ");if((this.browser.webkit&&!this.browser.webkit3||this.browser.air)||this.browser.opera){this.get("panel").setFooter(this.STR_IMAGE_COPY);}if(r&&r.value&&(r.value!=this.STR_IMAGE_HERE)){this.currentElement[0].setAttribute("src",r.value);var q=this,o=new Image();o.onerror=function(){r.value=q.STR_IMAGE_HERE;o.setAttribute("src",q.get("blankimage"));q.currentElement[0].setAttribute("src",q.get("blankimage"));YAHOO.util.Dom.get(q.get("id")+"_insertimage_height").value=o.height;YAHOO.util.Dom.get(q.get("id")+"_insertimage_width").value=o.width;};var t=this.get("id");window.setTimeout(function(){YAHOO.util.Dom.get(t+"_insertimage_height").value=o.height;YAHOO.util.Dom.get(t+"_insertimage_width").value=o.width;if(q.currentElement&&q.currentElement[0]){if(!q.currentElement[0]._height){q.currentElement[0]._height=o.height;}if(!q.currentElement[0]._width){q.currentElement[0]._width=o.width;}}},800);if(r.value!=this.STR_IMAGE_HERE){o.src=r.value;}}}}},this,true);this._windows.insertimage={};this._windows.insertimage.body=l;this.get("panel").editor_form.appendChild(l);this.fireEvent("windowInsertImageRender",{type:"windowInsertImageRender",panel:this.get("panel"),body:l,toolbar:i});return l;},_handleInsertImageClick:function(){if(this.get("limitCommands")){if(!this.toolbar.getButtonByValue("insertimage")){return false;}}this.on("afterExecCommand",function(){var i=this.currentElement[0],p=null,m="",B="",h=null,C="",l="",z="",t=75,x=75,r=0,n=0,k=0,u=false,j=new YAHOO.widget.EditorWindow("insertimage",{width:"415px"});if(!i){i=this._getSelectedElement();}if(i){j.el=i;if(i.getAttribute("src")){l=i.getAttribute("src",2);if(l.indexOf(this.get("blankimage"))!=-1){l=this.STR_IMAGE_HERE;u=true;}}if(i.getAttribute("alt",2)){C=i.getAttribute("alt",2);}if(i.getAttribute("title",2)){C=i.getAttribute("title",2);}if(i.parentNode&&this._isElement(i.parentNode,"a")){m=i.parentNode.getAttribute("href",2);if(i.parentNode.getAttribute("target")!==null){B=i.parentNode.getAttribute("target");}}t=parseInt(i.height,10);x=parseInt(i.width,10);if(i.style.height){t=parseInt(i.style.height,10);}if(i.style.width){x=parseInt(i.style.width,10);}if(i.style.margin){r=parseInt(i.style.margin,10);}if(!u){if(!i._height){i._height=t;}if(!i._width){i._width=x;}n=i._height;k=i._width;}}if(this._windows.insertimage&&this._windows.insertimage.body){p=this._windows.insertimage.body;this._defaultImageToolbar.resetAllButtons();}else{p=this._renderInsertImageWindow();}h=this._defaultImageToolbar;h.editor_el=i;var g="0",w="solid";if(i.style.borderLeftWidth){g=parseInt(i.style.borderLeftWidth,10);}if(i.style.borderLeftStyle){w=i.style.borderLeftStyle;}var A=h.getButtonByValue("bordersize"),y=((parseInt(g,10)>0)?"":this.STR_NONE);A.set("label",'<span class="yui-toolbar-bordersize-'+g+'">'+y+"</span>");this._updateMenuChecked("bordersize",g,h);var o=h.getButtonByValue("bordertype");o.set("label",'<span class="yui-toolbar-bordertype-'+w+'">asdfa</span>');this._updateMenuChecked("bordertype",w,h);if(parseInt(g,10)>0){h.enableButton(o);h.enableButton(A);h.enableButton("bordercolor");}if((i.align=="right")||(i.align=="left")){h.selectButton(i.align);}else{if(i.style.display=="block"){h.selectButton("block");}else{h.selectButton("inline");}}if(parseInt(i.style.marginLeft,10)>0){h.getButtonByValue("padding").set("label",""+parseInt(i.style.marginLeft,10));}if(i.style.borderSize){h.selectButton("bordersize");h.selectButton(parseInt(i.style.borderSize,10));}h.getButtonByValue("padding").set("label",""+r);j.setHeader(this.STR_IMAGE_PROP_TITLE);j.setBody(p);if((this.browser.webkit&&!this.browser.webkit3||this.browser.air)||this.browser.opera){j.setFooter(this.STR_IMAGE_COPY);}this.openWindow(j);d.get(this.get("id")+"_insertimage_url").value=l;d.get(this.get("id")+"_insertimage_title").value=C;d.get(this.get("id")+"_insertimage_link").value=m;d.get(this.get("id")+"_insertimage_target").checked=((B)?true:false);d.get(this.get("id")+"_insertimage_width").value=x;d.get(this.get("id")+"_insertimage_height").value=t;if(((t!=n)||(x!=k))&&(!u)){var q=document.createElement("span");q.className="info";q.innerHTML=this.STR_IMAGE_ORIG_SIZE+": ("+k+" x "+n+")";if(d.get(this.get("id")+"_insertimage_height").nextSibling){var f=d.get(this.get("id")+"_insertimage_height").nextSibling;f.parentNode.removeChild(f);}d.get(this.get("id")+"_insertimage_height").parentNode.appendChild(q);}this.toolbar.selectButton("insertimage");var v=this.get("id");window.setTimeout(function(){try{YAHOO.util.Dom.get(v+"_insertimage_url").focus();if(u){YAHOO.util.Dom.get(v+"_insertimage_url").select();}}catch(s){}},50);});},_handleInsertImageWindowClose:function(){var f=d.get(this.get("id")+"_insertimage_url"),m=d.get(this.get("id")+"_insertimage_title"),j=d.get(this.get("id")+"_insertimage_link"),k=d.get(this.get("id")+"_insertimage_target"),i=arguments[0].win.el;if(f&&f.value&&(f.value!=this.STR_IMAGE_HERE)){i.setAttribute("src",f.value);i.setAttribute("title",m.value);i.setAttribute("alt",m.value);var h=i.parentNode;if(j.value){var l=j.value;if((l.indexOf("://")==-1)&&(l.substring(0,1)!="/")&&(l.substring(0,6).toLowerCase()!="mailto")){if((l.indexOf("@")!=-1)&&(l.substring(0,6).toLowerCase()!="mailto")){l="mailto:"+l;}else{l="http://"+l;}}if(h&&this._isElement(h,"a")){h.setAttribute("href",l);if(k.checked){h.setAttribute("target",k.value);}else{h.setAttribute("target","");}}else{var g=this._getDoc().createElement("a");g.setAttribute("href",l);if(k.checked){g.setAttribute("target",k.value);}else{g.setAttribute("target","");}i.parentNode.replaceChild(g,i);g.appendChild(i);}}else{if(h&&this._isElement(h,"a")){h.parentNode.replaceChild(i,h);}}}else{i.parentNode.removeChild(i);}d.get(this.get("id")+"_insertimage_url").value="";d.get(this.get("id")+"_insertimage_title").value="";d.get(this.get("id")+"_insertimage_link").value="";d.get(this.get("id")+"_insertimage_target").checked=false;d.get(this.get("id")+"_insertimage_width").value=0;d.get(this.get("id")+"_insertimage_height").value=0;this._defaultImageToolbar.resetAllButtons();this.currentElement=[];this.nodeChange();},EDITOR_PANEL_ID:"-panel",_renderPanel:function(){var i=document.createElement("div");d.addClass(i,"yui-editor-panel");i.id=this.get("id")+this.EDITOR_PANEL_ID;i.style.position="absolute";i.style.top="-9999px";i.style.left="-9999px";document.body.appendChild(i);this.get("element_cont").insertBefore(i,this.get("element_cont").get("firstChild"));var f=new YAHOO.widget.Overlay(this.get("id")+this.EDITOR_PANEL_ID,{width:"300px",iframe:true,visible:false,underlay:"none",draggable:false,close:false});this.set("panel",f);f.setBody("---");f.setHeader(" ");f.setFooter(" ");var l=document.createElement("div");l.className=this.CLASS_PREFIX+"-body-cont";for(var m in this.browser){if(this.browser[m]){d.addClass(l,m);break;}}d.addClass(l,((YAHOO.widget.Button&&(this._defaultToolbar.buttonType=="advanced"))?"good-button":"no-button"));var j=document.createElement("h3");j.className="yui-editor-skipheader";j.innerHTML=this.STR_CLOSE_WINDOW_NOTE;l.appendChild(j);var g=document.createElement("fieldset");f.editor_form=g;l.appendChild(g);var h=document.createElement("span");h.innerHTML="X";h.title=this.STR_CLOSE_WINDOW;h.className="close";a.on(h,"click",this.closeWindow,this,true);var n=document.createElement("span");n.innerHTML="^";n.className="knob";f.editor_knob=n;var o=document.createElement("h3");f.editor_header=o;o.innerHTML="<span></span>";f.setHeader(" ");f.appendToHeader(o);o.appendChild(h);o.appendChild(n);f.setBody(" ");f.setFooter(" ");f.appendToBody(l);a.on(f.element,"click",function(p){a.stopPropagation(p);});var k=function(){f.bringToTop();YAHOO.util.Dom.setStyle(this.element,"display","block");this._handleWindowInputs(false);};f.showEvent.subscribe(k,this,true);f.hideEvent.subscribe(function(){this._handleWindowInputs(true);},this,true);f.renderEvent.subscribe(function(){this._renderInsertImageWindow();this._renderCreateLinkWindow();this.fireEvent("windowRender",{type:"windowRender",panel:f});this._handleWindowInputs(true);},this,true);if(this.DOMReady){this.get("panel").render();}else{a.onDOMReady(function(){this.get("panel").render();},this,true);}return this.get("panel");},_handleWindowInputs:function(g){if(!e.isBoolean(g)){g=false;}var f=this.get("panel").element.getElementsByTagName("input");for(var h=0;h<f.length;h++){try{f[h].disabled=g;}catch(j){}}},openWindow:function(l){var q=this;window.setTimeout(function(){q.toolbar.set("disabled",true);},10);a.on(document,"keydown",this._closeWindow,this,true);if(this.currentWindow){this.closeWindow();}var r=d.getXY(this.currentElement[0]),o=d.getXY(this.get("iframe").get("element")),f=this.get("panel"),i=[(r[0]+o[0]-20),(r[1]+o[1]+10)],h=(parseInt(l.attrs.width,10)/2),m="center",k=null;this.fireEvent("beforeOpenWindow",{type:"beforeOpenWindow",win:l,panel:f});var g=f.editor_form;var j=this._windows;for(var p in j){if(e.hasOwnProperty(j,p)){if(j[p]&&j[p].body){if(p==l.name){d.setStyle(j[p].body,"display","block");}else{d.setStyle(j[p].body,"display","none");}}}}if(this._windows[l.name].body){d.setStyle(this._windows[l.name].body,"display","block");g.appendChild(this._windows[l.name].body);}else{if(e.isObject(l.body)){g.appendChild(l.body);}else{var n=document.createElement("div");n.innerHTML=l.body;g.appendChild(n);}}f.editor_header.firstChild.innerHTML=l.header;if(l.footer!==null){f.setFooter(l.footer);}f.cfg.setProperty("width",l.attrs.width);this.currentWindow=l;this.moveWindow(true);f.show();this.fireEvent("afterOpenWindow",{type:"afterOpenWindow",win:l,panel:f});},moveWindow:function(g){if(!this.currentWindow){return false;}var k=this.currentWindow,l=d.getXY(this.currentElement[0]),D=d.getXY(this.get("iframe").get("element")),q=this.get("panel"),B=[(l[0]+D[0]),(l[1]+D[1])],t=(parseInt(k.attrs.width,10)/2),x="center",s=q.cfg.getProperty("xy")||[0,0],i=q.editor_knob,A=0,n=0,v=false;B[0]=((B[0]-t)+20);B[0]=B[0]-d.getDocumentScrollLeft(this._getDoc());B[1]=B[1]-d.getDocumentScrollTop(this._getDoc());if(this._isElement(this.currentElement[0],"img")){if(this.currentElement[0].src.indexOf(this.get("blankimage"))!=-1){B[0]=(B[0]+(75/2));B[1]=(B[1]+75);}else{var p=parseInt(this.currentElement[0].width,10);var z=parseInt(this.currentElement[0].height,10);B[0]=(B[0]+(p/2));B[1]=(B[1]+z);}B[1]=B[1]+15;}else{var m=d.getStyle(this.currentElement[0],"fontSize");if(m&&m.indexOf&&m.indexOf("px")!=-1){B[1]=B[1]+parseInt(d.getStyle(this.currentElement[0],"fontSize"),10)+5;}else{B[1]=B[1]+20;}}if(B[0]<D[0]){B[0]=D[0]+5;x="left";}if((B[0]+(t*2))>(D[0]+parseInt(this.get("iframe").get("element").clientWidth,10))){B[0]=((D[0]+parseInt(this.get("iframe").get("element").clientWidth,10))-(t*2)-5);x="right";}try{A=(B[0]-s[0]);n=(B[1]-s[1]);}catch(E){}var r=D[1]+parseInt(this.get("height"),10);var j=D[0]+parseInt(this.get("width"),10);if(B[1]>r){B[1]=r;}if(B[0]>j){B[0]=(j/2);}A=((A<0)?(A*-1):A);n=((n<0)?(n*-1):n);if(((A>10)||(n>10))||g){var u=0,y=0;if(this.currentElement[0].width){y=(parseInt(this.currentElement[0].width,10)/2);}var o=l[0]+D[0]+y;u=o-B[0];if(u>(parseInt(k.attrs.width,10)-1)){u=((parseInt(k.attrs.width,10)-30)-1);}else{if(u<40){u=1;}}if(isNaN(u)){u=1;}if(g){if(i){i.style.left=u+"px";}q.cfg.setProperty("xy",B);}else{if(this.get("animate")){v=new YAHOO.util.Anim(q.element,{},0.5,YAHOO.util.Easing.easeOut);v.attributes={top:{to:B[1]},left:{to:B[0]}};v.onComplete.subscribe(function(){q.cfg.setProperty("xy",B);});var C=new YAHOO.util.Anim(q.iframe,v.attributes,0.5,YAHOO.util.Easing.easeOut);var f=new YAHOO.util.Anim(i,{left:{to:u}},0.6,YAHOO.util.Easing.easeOut);v.animate();C.animate();f.animate();}else{i.style.left=u+"px";q.cfg.setProperty("xy",B);}}}},_closeWindow:function(f){if(this._checkKey(this._keyMap.CLOSE_WINDOW,f)){if(this.currentWindow){this.closeWindow();}}},closeWindow:function(f){this.fireEvent("window"+this.currentWindow.name+"Close",{type:"window"+this.currentWindow.name+"Close",win:this.currentWindow,el:this.currentElement[0]});this.fireEvent("closeWindow",{type:"closeWindow",win:this.currentWindow});this.currentWindow=null;this.get("panel").hide();this.get("panel").cfg.setProperty("xy",[-900,-900]);this.get("panel").syncIframe();this.unsubscribeAll("afterExecCommand");this.toolbar.set("disabled",false);this.toolbar.resetAllButtons();this.focus();a.removeListener(document,"keydown",this._closeWindow);},cmd_undo:function(h){if(this._hasUndoLevel()){var g=this.getEditorHTML(),f;if(!this._undoLevel){this._undoLevel=this._undoCache.length;}this._undoLevel=(this._undoLevel-1);if(this._undoCache[this._undoLevel]){f=this._getUndo(this._undoLevel);if(f!=g){this.setEditorHTML(f);}else{this._undoLevel=(this._undoLevel-1);f=this._getUndo(this._undoLevel);if(f!=g){this.setEditorHTML(f);}}}else{this._undoLevel=0;this.toolbar.disableButton("undo");}}return[false];},cmd_redo:function(g){this._undoLevel=this._undoLevel+1;if(this._undoLevel>=this._undoCache.length){this._undoLevel=this._undoCache.length;}if(this._undoCache[this._undoLevel]){var f=this._getUndo(this._undoLevel);this.setEditorHTML(f);}else{this.toolbar.disableButton("redo");}return[false];},cmd_heading:function(j){var g=true,h=null,i="heading",k=this._getSelection(),f=this._getSelectedElement();if(f){k=f;}if(this.browser.ie){i="formatblock";}if(j==this.STR_NONE){if((k&&k.tagName&&(k.tagName.toLowerCase().substring(0,1)=="h"))||(k&&k.parentNode&&k.parentNode.tagName&&(k.parentNode.tagName.toLowerCase().substring(0,1)=="h"))){if(k.parentNode.tagName.toLowerCase().substring(0,1)=="h"){k=k.parentNode;}if(this._isElement(k,"html")){return[false];}h=this._swapEl(f,"span",function(l){l.className="yui-non";});this._selectNode(h);this.currentElement[0]=h;}g=false;}else{if(this._isElement(f,"h1")||this._isElement(f,"h2")||this._isElement(f,"h3")||this._isElement(f,"h4")||this._isElement(f,"h5")||this._isElement(f,"h6")){h=this._swapEl(f,j);this._selectNode(h);this.currentElement[0]=h;}else{this._createCurrentElement(j);this._selectNode(this.currentElement[0]);}g=false;}return[g,i];},cmd_hiddenelements:function(f){if(this._showingHiddenElements){this._lastButton=null;this._showingHiddenElements=false;this.toolbar.deselectButton("hiddenelements");d.removeClass(this._getDoc().body,this.CLASS_HIDDEN);}else{this._showingHiddenElements=true;d.addClass(this._getDoc().body,this.CLASS_HIDDEN);this.toolbar.selectButton("hiddenelements");}return[false];},cmd_removeformat:function(j){var g=true;if(this.browser.webkit&&!this._getDoc().queryCommandEnabled("removeformat")){var f=this._getSelection()+"";this._createCurrentElement("span");this.currentElement[0].className="yui-non";this.currentElement[0].innerHTML=f;for(var h=1;h<this.currentElement.length;h++){this.currentElement[h].parentNode.removeChild(this.currentElement[h]);}g=false;}return[g];},cmd_script:function(l,k){var h=true,f=l.toLowerCase().substring(0,3),i=null,g=this._getSelectedElement();if(this.browser.webkit){if(this._isElement(g,f)){i=this._swapEl(this.currentElement[0],"span",function(m){m.className="yui-non";});this._selectNode(i);}else{this._createCurrentElement(f);var j=this._swapEl(this.currentElement[0],f);this._selectNode(j);this.currentElement[0]=j;}h=false;}return h;},cmd_superscript:function(f){return[this.cmd_script("superscript",f)];},cmd_subscript:function(f){return[this.cmd_script("subscript",f)];},cmd_indent:function(i){var f=true,h=this._getSelectedElement(),j=null;if(this.browser.ie){if(this._isElement(h,"blockquote")){j=this._getDoc().createElement("blockquote");j.innerHTML=h.innerHTML;h.innerHTML="";h.appendChild(j);this._selectNode(j);}else{j=this._getDoc().createElement("blockquote");var g=this._getRange().htmlText;j.innerHTML=g;this._createCurrentElement("blockquote");this.currentElement[0].parentNode.replaceChild(j,this.currentElement[0]);this.currentElement[0]=j;this._selectNode(this.currentElement[0]);}f=false;}else{i="blockquote";}return[f,"formatblock",i];},cmd_outdent:function(j){var f=true,i=this._getSelectedElement(),k=null,g=null;if(this.browser.webkit||this.browser.ie){i=this._getSelectedElement();if(this._isElement(i,"blockquote")){var h=i.parentNode;if(this._isElement(i.parentNode,"blockquote")){h.innerHTML=i.innerHTML;this._selectNode(h);}else{g=this._getDoc().createElement("span");g.innerHTML=i.innerHTML;YAHOO.util.Dom.addClass(g,"yui-non");h.replaceChild(g,i);this._selectNode(g);}}else{}f=false;}else{j=false;}return[f,"outdent",j];},cmd_justify:function(f){if(this.browser.ie){if(this._hasSelection()){this._createCurrentElement("span");this._swapEl(this.currentElement[0],"div",function(g){g.style.textAlign=f;});return[false];}}return[true,"justify"+f,""];},cmd_justifycenter:function(){return[this.cmd_justify("center")];},cmd_justifyleft:function(){return[this.cmd_justify("left")];},cmd_justifyright:function(){return[this.cmd_justify("right")];},toString:function(){var f="Editor";if(this.get&&this.get("element_cont")){f="Editor (#"+this.get("element_cont").get("id")+")"+((this.get("disabled")?" Disabled":""));}return f;}});YAHOO.widget.EditorWindow=function(g,f){this.name=g.replace(" ","_");this.attrs=f;};YAHOO.widget.EditorWindow.prototype={header:null,body:null,footer:null,setHeader:function(f){this.header=f;},setBody:function(f){this.body=f;},setFooter:function(f){this.footer=f;},toString:function(){return"Editor Window ("+this.name+")";}};})();YAHOO.register("editor",YAHOO.widget.Editor,{version:"2.8.2r1",build:"7"});
}, '2.8.2' ,{"requires": ["yui2-yahoo", "yui2-dom", "yui2-event", "yui2-containercore", "yui2-element", "yui2-menu", "yui2-button"], "supersedes": ["yui2-simpleeditor"], "optional": ["yui2-animation", "yui2-dragdrop"]});
